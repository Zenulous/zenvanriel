!function t(e,n,s){function i(o,a){if(!n[o]){if(!e[o]){const t="function"==typeof require&&require;if(!a&&t)return t(o,!0);if(r)return r(o,!0);const e=new Error("Cannot find module '"+o+"'");throw e.code="MODULE_NOT_FOUND",e}const l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){const n=e[o][1][t];return i(n||t)},l,l.exports,t,e,n,s)}return n[o].exports}var r="function"==typeof require&&require;for(let t=0;t<s.length;t++)i(s[t]);return i}({1:[function(t,e,n){const s={isDomPresent:!0,navigator:navigator,window:window,document:document,ajax:function(t){const e=new XMLHttpRequest;if(e.open("GET",t,!1),e.overrideMimeType&&e.overrideMimeType("text/plain"),e.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),e.send(null),200!==e.status&&0!==e.status)throw"XMLHttpRequest failed, status code "+e.status;return e.responseText}};window.Processing=t("./src/")(s)},{"./src/":28}],2:[function(t,e,n){e.exports={name:"processing-js",version:"1.6.6",author:"Processing.js",repository:{type:"git",url:"git@github.com/processing-js/processing-js.git"},main:"processing.min.js",bugs:"https://github.com/processing-js/processing-js/issues",devDependencies:{argv:"~0.0.2",browserify:"^11.0.1",express:"~3.3.3",grunt:"~0.4.1","grunt-cli":"~0.1.8","grunt-contrib-jshint":"~0.4.3","http-server":"^0.9.0",minifier:"^0.7.1","node-minify":"~0.7.3",nunjucks:"~0.1.9",open:"0.0.3"},scripts:{test:"node test","test:manual":"http-server -o test/manual",start:"browserify build.js -o processing.js && minify --output processing.min.js processing.js"},license:"MIT",dependencies:{minifier:"^0.7.1"}}},{}],3:[function(t,e,n){e.exports=function(t){if(!(t instanceof Array)){if(t.iterator instanceof Function)return t.iterator();throw"Unable to iterate: "+t}{let e=-1;this.hasNext=function(){return++e<t.length},this.next=function(){return t[e]}}}},{}],4:[function(t,e,n){e.exports={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1e-4,MAX_FLOAT:3.4028235e38,MIN_FLOAT:-3.4028235e38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:Math.PI,TWO_PI:2*Math.PI,TAU:2*Math.PI,HALF_PI:Math.PI/2,THIRD_PI:Math.PI/3,QUARTER_PI:Math.PI/4,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,WHITESPACE:" \t\n\r\fÂ ",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,CHORD:2,PIE:3,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8}},{}],5:[function(e,n,s){n.exports=function(e){let n={BufferMax:200},s=e.createElement("style"),i=!1;return s.textContent=[".pjsconsole.hidden {","  display: none!important;","}"].join("\n"),n.wrapper=e.createElement("div"),s.textContent+=["",".pjsconsole {","  opacity: .75;","  display: block;","  position: fixed;","  bottom: 0px;","  left: 0px;","  right: 0px;","  height: 50px;","  background-color: #aaa;","}"].join("\n"),n.wrapper.classList.add("pjsconsole"),n.dragger=e.createElement("div"),s.textContent+=["",".pjsconsole .dragger {","  display: block;","  border: 3px black raised;","  cursor: n-resize;","  position: absolute;","  top: 0px;","  left: 0px;","  right: 0px;","  height: 5px;","  background-color: #333;","}"].join("\n"),n.dragger.classList.add("dragger"),n.closer=e.createElement("div"),s.textContent+=["",".pjsconsole .closer {","  opacity: .5;","  display: block;","  border: 3px black raised;","  position: absolute;","  top: 10px;","  right: 30px;","  height: 20px;","  width: 20px;","  background-color: #ddd;","  color: #000;","  line-height: 20px;","  text-align: center;","  cursor: pointer","}"].join("\n"),n.closer.classList.add("closer"),n.closer.innerHTML="&#10006;",n.javaconsole=e.createElement("div"),s.textContent+=["",".pjsconsole .console {","  overflow-x: auto;","  display: block;","  position: absolute;","  left: 10px;","  right: 0px;","  bottom: 5px;","  top: 10px;","  overflow-y: scroll;","  height: 40px;","}"].join("\n"),n.javaconsole.setAttribute("class","console"),n.wrapper.appendChild(n.dragger),n.wrapper.appendChild(n.javaconsole),n.wrapper.appendChild(n.closer),n.dragger.onmousedown=function(t){n.divheight=n.wrapper.style.height,e.selection?e.selection.empty():window.getSelection().removeAllRanges();const s=t.screenY;window.onmousemove=function(t){n.wrapper.style.height=parseFloat(n.divheight)+(s-t.screenY)+"px",n.javaconsole.style.height=parseFloat(n.divheight)+(s-t.screenY)-10+"px"},window.onmouseup=function(t){e.selection?e.selection.empty():window.getSelection().removeAllRanges(),n.wrapper.style.height=parseFloat(n.divheight)+(s-t.screenY)+"px",n.javaconsole.style.height=parseFloat(n.divheight)+(s-t.screenY)-10+"px",window.onmousemove=null,window.onmouseup=null}},n.BufferArray=[],n.print=n.log=function(){i||(e.body.appendChild(s),e.body.appendChild(n.wrapper),i=!0);const r=Array.prototype.slice.call(arguments);t=r.map(function(t,e){return t+(e+1===r.length?"":" ")}).join(""),n.BufferArray[n.BufferArray.length-1]?n.BufferArray[n.BufferArray.length-1]+=t+"":n.BufferArray.push(t),n.javaconsole.innerHTML=n.BufferArray.join(""),n.showconsole()},n.println=function(){const t=Array.prototype.slice.call(arguments);t.push("<br>"),n.print.apply(n,t),n.BufferArray.length>n.BufferMax?n.BufferArray.splice(0,1):n.javaconsole.scrollTop=n.javaconsole.scrollHeight},n.showconsole=function(){n.wrapper.classList.remove("hidden")},n.hideconsole=function(){n.wrapper.classList.add("hidden")},n.closer.onclick=function(){n.hideconsole()},n.hideconsole(),n}},{}],6:[function(t,e,n){e.exports=function(t){function e(){}e.prototype=t.PConstants;const n=new e;function s(t,e,n){if(!t.hasOwnProperty(e)||"function"!=typeof t[e])return void(t[e]=n);const s=t[e];if("$overloads"in s)return void(s.$defaultOverload=n);if(!("$overloads"in n)&&s.length===n.length)return;let i,r;"$overloads"in n?((i=n.$overloads.slice(0))[s.length]=s,r=n.$defaultOverload):((i=[])[n.length]=n,i[s.length]=s,r=s);var o=function(){return(o.$overloads[arguments.length]||("$methodArgsIndex"in o&&arguments.length>o.$methodArgsIndex?o.$overloads[o.$methodArgsIndex]:null)||o.$defaultOverload).apply(this,arguments)};o.$overloads=i,"$methodArgsIndex"in n&&(o.$methodArgsIndex=n.$methodArgsIndex),o.$defaultOverload=r,o.name=e,t[e]=o}function i(t,e){function i(s){n.defineProperty(t,s,{get:function(){return e[s]},set:function(t){e[s]=t},enumerable:!0})}const r=[];for(const n in e)"function"==typeof e[n]?s(t,n,e[n]):"$"===n.charAt(0)||n in t||r.push(n);for(;r.length>0;)i(r.shift());t.$super=e}return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.defineProperty=function(t,e,n){"defineProperty"in Object?Object.defineProperty(t,e,n):(n.hasOwnProperty("get")&&t.__defineGetter__(e,n.get),n.hasOwnProperty("set")&&t.__defineSetter__(e,n.set))},n.extendClassChain=function(t){const e=[t];for(let n=t.$upcast;n;n=n.$upcast)i(n,t),e.push(n),t=n;for(;e.length>0;)e.pop().$self=t},n.extendStaticMembers=function(t,e){i(t,e)},n.extendInterfaceMembers=function(t,e){i(t,e)},n.addMethod=function(t,e,n,s){const i=t[e];if(i||s){const o=n.length;if("$overloads"in i)i.$overloads[o]=n;else{var r=function(){return(r.$overloads[arguments.length]||("$methodArgsIndex"in r&&arguments.length>r.$methodArgsIndex?r.$overloads[r.$methodArgsIndex]:null)||r.$defaultOverload).apply(this,arguments)};const a=[];i&&(a[i.length]=i),a[o]=n,r.$overloads=a,r.$defaultOverload=i||n,s&&(r.$methodArgsIndex=o),r.name=e,t[e]=r}}else t[e]=n},n.createJavaArray=function(t,e){let s=null,i=null;if("string"==typeof t&&("boolean"===t?i=!1:function(t){return"string"==typeof t&&-1!==["byte","int","char","color","float","long","double"].indexOf(t)}(t)&&(i=0)),"number"==typeof e[0]){const r=0|e[0];if(e.length<=1){(s=[]).length=r;for(let t=0;t<r;++t)s[t]=i}else{s=[];const i=e.slice(1);for(let e=0;e<r;++e)s.push(n.createJavaArray(t,i))}}return s},n.defineProperty(n,"screenWidth",{get:function(){return window.innerWidth}}),n.defineProperty(n,"screenHeight",{get:function(){return window.innerHeight}}),n}},{}],7:[function(t,e,n){e.exports=function(t,e){let n=e.window,s=e.document,r=n.XMLHttpRequest,o=e.noop,a=e.isDOMPresent,h=e.version;t.version=h||"@DEV-VERSION@",t.lib={},t.registerLibrary=function(e,n){t.lib[e]=n,n.hasOwnProperty("init")&&n.init(defaultScope)},t.Sketch=function(t){this.attachFunction=t,this.options={pauseOnBlur:!1,globalKeyEvents:!1},this.onLoad=o,this.onSetup=o,this.onPause=o,this.onLoop=o,this.onFrameStart=o,this.onFrameEnd=o,this.onExit=o,this.params={},this.imageCache={pending:0,images:{},operaCache:{},add:function(t,e){var i;if(!this.images[t]&&(a||(this.images[t]=null),e||((e=new Image).onload=(i=this,function(){i.pending--}),this.pending++,e.src=t),this.images[t]=e,n.opera)){const n=s.createElement("div");n.appendChild(e),n.style.position="absolute",n.style.opacity=0,n.style.width="1px",n.style.height="1px",this.operaCache[t]||(s.body.appendChild(n),this.operaCache[t]=n)}}},this.sourceCode=void 0,this.attach=function(t){if("function"==typeof this.attachFunction)this.attachFunction(t);else{if(!this.sourceCode)throw"Unable to attach sketch to the processing instance";{const e=new Function("return ("+this.sourceCode+");")();e(t),this.attachFunction=e}}},this.toString=function(){let t,e="((function(Sketch) {\n";for(t in e+="var sketch = new Sketch(\n"+this.sourceCode+");\n",this.options)if(this.options.hasOwnProperty(t)){const n=this.options[t];e+="sketch.options."+t+" = "+("string"==typeof n?'"'+n+'"':""+n)+";\n"}for(t in this.imageCache)this.options.hasOwnProperty(t)&&(e+='sketch.imageCache.add("'+t+'");\n');return e+="return sketch;\n})(Processing.Sketch))"}};const u=t.loadSketchFromSources=function(e,i,o){let a=[],l=[],h=i.length,u=0;function c(i,c){function f(n,s){if(a[i]=n,++u,s&&l.push(c+" ==> "+s),u===h){if(0!==l.length)throw"Processing.js: Unable to load pjs sketch files: "+l.join("\n");{const n=new t(e,a.join("\n"));o&&o(n)}}}if("#"!==c.charAt(0))!function(t,e){const s=new r;s.onreadystatechange=function(){if(4===s.readyState){let t;200!==s.status&&0!==s.status?t="Invalid XHR status "+s.status:""===s.responseText&&(t="withCredentials"in new r&&!1===(new r).withCredentials&&"file:"===n.location.protocol?"XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions.":"File is empty."),e(s.responseText,t)}},s.open("GET",t,!0),s.overrideMimeType&&s.overrideMimeType("application/json"),s.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),s.send(null)}(c,f);else{const t=s.getElementById(c.substring(1));t?f(t.text||t.textContent):f("","Unable to load pjs sketch: element with id '"+c.substring(1)+"' was not found")}}for(let t=0;t<h;++t)c(t,i[t])};let c,f=s.getElementsByTagName("canvas");for(i=0,l=f.length;i<l;i++){let t=f[i].getAttribute("data-processing-sources");if(null===t&&null===(t=f[i].getAttribute("data-src"))&&(t=f[i].getAttribute("datasrc")),t){c=t.split(/\s+/g);for(let t=0;t<c.length;)c[t]?t++:c.splice(t,1);u(f[i],c)}}let p,m,g,d,y=s.getElementsByTagName("script"),b=[];for(p=y.length-1;p>=0;p--)b.push(y[p]);for(p=0,m=b.length;p<m;p++){const e=b[p];if(!e.getAttribute)continue;const n=e.getAttribute("type");if(n&&("text/processing"===n.toLowerCase()||"application/processing"===n.toLowerCase())){const n=e.getAttribute("data-processing-target");if(f=void 0,n)f=s.getElementById(n);else{let t=e.nextSibling;for(;t&&1!==t.nodeType;)t=t.nextSibling;t&&"canvas"===t.nodeName.toLowerCase()&&(f=t)}if(f){if(e.getAttribute("src")){u(f,c=e.getAttribute("src").split(/\s+/));continue}g=e.textContent||e.text,d=new t(f,g)}}}}},{}],8:[function(t,e,n){e.exports=function(t,e){return null===t||null===e?null===t&&null===e:"string"==typeof t?t===e:"object"!=typeof t?t===e:t.equals instanceof Function?t.equals(e):t===e}},{}],9:[function(t,e,n){e.exports=function(t,e){if("string"==typeof t){let e=0;for(let n=0;n<t.length;++n)e=31*e+t.charCodeAt(n)&4294967295;return e}return"object"!=typeof t?4294967295&t:t.hashCode instanceof Function?t.hashCode():(t.$id===e&&(t.$id=Math.floor(65536*Math.random())-32768<<16|Math.floor(65536*Math.random())),t.$id)}},{}],10:[function(t,e,n){e.exports=function(t){t.virtHashCode;const e=t.virtEquals;function n(t){let e=-1;this.hasNext=function(){return e+1<t.length},this.next=function(){return t[++e]},this.remove=function(){t.splice(e--,1)}}return function t(s){let i=[];s&&s.toArray&&(i=s.toArray()),this.get=function(t){return i[t]},this.contains=function(t){return this.indexOf(t)>-1},this.indexOf=function(t){for(let n=0,s=i.length;n<s;++n)if(e(t,i[n]))return n;return-1},this.lastIndexOf=function(t){for(let n=i.length-1;n>=0;--n)if(e(t,i[n]))return n;return-1},this.add=function(){if(1===arguments.length)i.push(arguments[0]);else{if(2!==arguments.length)throw"Please use the proper number of parameters.";{const t=arguments[0];if("number"!=typeof t)throw typeof t+" is not a number";if(!(t>=0&&t<=i.length))throw t+" is not a valid index";i.splice(t,0,arguments[1])}}},this.addAll=function(t,e){let n;if("number"==typeof t){if(t<0||t>i.length)throw"Index out of bounds for addAll: "+t+" greater or equal than "+i.length;for(n=new ObjectIterator(e);n.hasNext();)i.splice(t++,0,n.next())}else for(n=new ObjectIterator(t);n.hasNext();)i.push(n.next())},this.set=function(){if(2!==arguments.length)throw"Please use the proper number of parameters.";{const t=arguments[0];if("number"!=typeof t)throw typeof t+" is not a number";if(!(t>=0&&t<i.length))throw t+" is not a valid index.";i.splice(t,1,arguments[1])}},this.size=function(){return i.length},this.clear=function(){i.length=0},this.remove=function(t){return"number"==typeof t?i.splice(t,1)[0]:(t=this.indexOf(t))>-1&&(i.splice(t,1),!0)},this.removeAll=function(e){let n,s,i,r=new t;for(r.addAll(this),this.clear(),n=0,s=0;n<r.size();n++)i=r.get(n),e.contains(i)||this.add(s++,i);return this.size()<r.size()},this.isEmpty=function(){return!i.length},this.clone=function(){return new t(this)},this.toArray=function(){return i.slice(0)},this.iterator=function(){return new n(i)}}}},{}],11:[function(t,e,n){var s,i;e.exports=(s={},(i=function(t){return"string"==typeof t&&1===t.length?this.code=t.charCodeAt(0):this.code="number"==typeof t?t:t instanceof i?t:NaN,void 0===s[this.code]?s[this.code]=this:s[this.code]}).prototype.toString=function(){return String.fromCharCode(this.code)},i.prototype.valueOf=function(){return this.code},i)},{}],12:[function(t,e,n){e.exports=function(t){const e=t.virtHashCode,n=t.virtEquals;return function t(){if(1===arguments.length&&arguments[0]instanceof t)return arguments[0].clone();const s=arguments.length>0?arguments[0]:16,i=arguments.length>1?arguments[1]:.75;let r=[];r.length=s;let o=0;const a=this;function l(t){const n=e(t)%r.length;return n<0?r.length+n:n}function h(){if(o<=i*r.length)return;let t=[];for(let e=0;e<r.length;++e)void 0!==r[e]&&(t=t.concat(r[e]));const e=2*r.length;(r=[]).length=e;for(let e=0;e<t.length;++e){const n=l(t[e].key);let s=r[n];void 0===s&&(r[n]=s=[]),s.push(t[e])}}function u(t,e){let n,s=0,i=-1,o=!1;function a(){for(;!o;)if(++i,s>=r.length)o=!0;else{if(!(void 0===r[s]||i>=r[s].length))return;i=-1,++s}}this.hasNext=function(){return!o},this.next=function(){return n=t(r[s][i]),a(),n},this.remove=function(){void 0!==n&&(e(n),--i,a())},a()}function c(t,e,n){this.clear=function(){a.clear()},this.contains=function(t){return e(t)},this.containsAll=function(t){const e=t.iterator();for(;e.hasNext();)if(!this.contains(e.next()))return!1;return!0},this.isEmpty=function(){return a.isEmpty()},this.iterator=function(){return new u(t,n)},this.remove=function(t){return!!this.contains(t)&&(n(t),!0)},this.removeAll=function(t){const e=t.iterator();let s=!1;for(;e.hasNext();){const t=e.next();this.contains(t)&&(n(t),s=!0)}return!0},this.retainAll=function(t){const e=this.iterator(),s=[];for(;e.hasNext();){const n=e.next();t.contains(n)||s.push(n)}for(let t=0;t<s.length;++t)n(s[t]);return s.length>0},this.size=function(){return a.size()},this.toArray=function(){const t=[],e=this.iterator();for(;e.hasNext();)t.push(e.next());return t}}function f(t){this._isIn=function(e){return e===a&&void 0===t.removed},this.equals=function(e){return n(t.key,e.getKey())},this.getKey=function(){return t.key},this.getValue=function(){return t.value},this.hashCode=function(n){return e(t.key)},this.setValue=function(e){const n=t.value;return t.value=e,n}}this.clear=function(){o=0,(r=[]).length=s},this.clone=function(){const e=new t;return e.putAll(this),e},this.containsKey=function(t){const e=l(t),s=r[e];if(void 0===s)return!1;for(let e=0;e<s.length;++e)if(n(s[e].key,t))return!0;return!1},this.containsValue=function(t){for(let e=0;e<r.length;++e){const s=r[e];if(void 0!==s)for(let e=0;e<s.length;++e)if(n(s[e].value,t))return!0}return!1},this.entrySet=function(){return new c(function(t){return new f(t)},function(t){return t instanceof f&&t._isIn(a)},function(t){return a.remove(t.getKey())})},this.get=function(t){const e=l(t),s=r[e];if(void 0===s)return null;for(let e=0;e<s.length;++e)if(n(s[e].key,t))return s[e].value;return null},this.isEmpty=function(){return 0===o},this.keySet=function(){return new c(function(t){return t.key},function(t){return a.containsKey(t)},function(t){return a.remove(t)})},this.values=function(){return new c(function(t){return t.value},function(t){return a.containsValue(t)},function(t){return a.removeByValue(t)})},this.put=function(t,e){const s=l(t),i=r[s];if(void 0===i)return++o,r[s]=[{key:t,value:e}],h(),null;for(let s=0;s<i.length;++s)if(n(i[s].key,t)){const t=i[s].value;return i[s].value=e,t}return++o,i.push({key:t,value:e}),h(),null},this.putAll=function(t){const e=t.entrySet().iterator();for(;e.hasNext();){const t=e.next();this.put(t.getKey(),t.getValue())}},this.remove=function(t){const e=l(t),s=r[e];if(void 0===s)return null;for(let i=0;i<s.length;++i)if(n(s[i].key,t)){--o;const t=s[i].value;return s[i].removed=!0,s.length>1?s.splice(i,1):r[e]=void 0,t}return null},this.removeByValue=function(t){let e,n,s,i;for(e in r)if(r.hasOwnProperty(e))for(n=0,s=r[e].length;n<s;n++)if((i=r[e][n]).value===t)return r[e].splice(n,1),!0;return!1},this.size=function(){return o}}}},{}],13:[function(t,e,n){e.exports=function(t,e){t.Browser.window;const n=t.Browser.document,s=t.noop;function i(t,i){t===e&&(t=""),this.name=t,i===e&&(i=0),this.size=i,this.glyph=!1,this.ascent=0,this.descent=0,this.leading=1.2*i;const r=t.indexOf(" Italic Bold");-1!==r&&(t=t.substring(0,r)),this.style="normal";const o=t.indexOf(" Italic");-1!==o&&(t=t.substring(0,o),this.style="italic"),this.weight="normal";const a=t.indexOf(" Bold");if(-1!==a&&(t=t.substring(0,a),this.weight="bold"),this.family="sans-serif",t!==e)switch(t){case"sans-serif":case"serif":case"monospace":case"fantasy":case"cursive":this.family=t;break;default:this.family='"'+t+'", sans-serif'}this.context2d=function(t){const e=t.size/250,i=n.createElement("canvas");i.width=500,i.height=500,i.style.opacity=0;const r=t.getCSSDefinition("250px","normal"),o=i.getContext("2d");o.font=r,i.width=o.measureText("dbflkhyjqpg").width,o.font=r;const a=n.createElement("div");a.style.position="absolute",a.style.opacity=0,a.style.fontFamily='"'+t.name+'"',a.style.fontSize="250px",a.innerHTML="dbflkhyjqpg<br/>dbflkhyjqpg",n.body.appendChild(a);const l=i.width,h=i.height,u=h/2;o.fillStyle="white",o.fillRect(0,0,l,h),o.fillStyle="black",o.fillText("dbflkhyjqpg",0,u);const c=o.getImageData(0,0,l,h).data;let f=0,p=4*l,m=c.length;for(;++f<m&&255===c[f];)s();const g=Math.round(f/p);for(f=m-1;--f>0&&255===c[f];)s();const d=Math.round(f/p);if(t.ascent=e*(u-g),t.descent=e*(d-u),n.defaultView.getComputedStyle){let s=n.defaultView.getComputedStyle(a,null).getPropertyValue("height");(s=e*s.replace("px",""))>=2*t.size&&(t.leading=Math.round(s/2))}if(n.body.removeChild(a),t.caching)return o}(this),this.css=this.getCSSDefinition(),this.context2d&&(this.context2d.font=this.css)}return i.prototype.caching=!0,i.prototype.getCSSDefinition=function(t,n){return t===e&&(t=this.size+"px"),n===e&&(n=this.leading+"px"),[this.style,"normal",this.weight,t+"/"+n,this.family].join(" ")},i.prototype.measureTextWidth=function(t){return this.context2d.measureText(t).width},i.prototype.measureTextWidthFallback=function(t){const e=n.createElement("canvas").getContext("2d");return e.font=this.css,e.measureText(t).width},i.PFontCache={length:0},i.get=function(t,e){e=(10*e+.5|0)/10;const n=i.PFontCache,s=t+"/"+e;if(!n[s]){if(n[s]=new i(t,e),n.length++,50===n.length){let s;for(s in i.prototype.measureTextWidth=i.prototype.measureTextWidthFallback,i.prototype.caching=!1,n)"length"!==s&&(n[s].context2d=null);return new i(t,e)}if(400===n.length)return i.PFontCache={},i.get=i.getFallback,new i(t,e)}return n[s]},i.getFallback=function(t,e){return new i(t,e)},i.list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]},i.preloading={template:{},initialized:!1,initialize:function(){const t=n.createElement("style");t.setAttribute("type","text/css"),t.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+"#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#".replace(/[#237]/g,function(t){return"AAAAAAAA".substr(~~t?7-t:6)})+"')\n       format('truetype');\n}",n.head.appendChild(t);const e=n.createElement("span");e.style.cssText='position: absolute; top: -1000; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;',e.innerHTML="AAAAAAAA",n.body.appendChild(e),this.template=e,this.initialized=!0},getElementWidth:function(t){return n.defaultView.getComputedStyle(t,"").getPropertyValue("width")},timeAttempted:0,pending:function(t){this.initialized||this.initialize();let e,s,i=this.getElementWidth(this.template);for(let r=0;r<this.fontList.length;r++){if(e=this.fontList[r],s=this.getElementWidth(e),this.timeAttempted<4e3&&s===i)return this.timeAttempted+=t,!0;n.body.removeChild(e),this.fontList.splice(r--,1),this.timeAttempted=0}return 0!==this.fontList.length},fontList:[],addedList:{},add:function(t){this.initialized||this.initialize();const e="object"==typeof t?t.fontFace:t,s="object"==typeof t?t.url:t;if(this.addedList[e])return;const i=n.createElement("style");i.setAttribute("type","text/css"),i.innerHTML="@font-face{\n  font-family: '"+e+"';\n  src:  url('"+s+"');\n}\n",n.head.appendChild(i),this.addedList[e]=!0;const r=n.createElement("span");r.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",r.style.fontFamily='"'+e+'", "PjsEmptyFont", fantasy',r.innerHTML="AAAAAAAA",n.body.appendChild(r),this.fontList.push(r)}},i}},{}],14:[function(t,e,n){e.exports=function(t,e){const n=t.p;var s=function(){0===arguments.length?this.reset():1===arguments.length&&arguments[0]instanceof s?this.set(arguments[0].array()):6===arguments.length&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};return s.prototype={set:function(){if(6===arguments.length){const t=arguments;this.set([t[0],t[1],t[2],t[3],t[4],t[5]])}else 1===arguments.length&&arguments[0]instanceof s?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){const t=new s;return t.set(this.elements),t},reset:function(){this.set([1,0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(t,e){this.elements[2]=t*this.elements[0]+e*this.elements[1]+this.elements[2],this.elements[5]=t*this.elements[3]+e*this.elements[4]+this.elements[5]},invTranslate:function(t,e){this.translate(-t,-e)},transpose:function(){},mult:function(t,e){let n,s;return t instanceof PVector?(n=t.x,s=t.y,e||(e=new PVector)):t instanceof Array&&(n=t[0],s=t[1],e||(e=[])),e instanceof Array?(e[0]=this.elements[0]*n+this.elements[1]*s+this.elements[2],e[1]=this.elements[3]*n+this.elements[4]*s+this.elements[5]):e instanceof PVector&&(e.x=this.elements[0]*n+this.elements[1]*s+this.elements[2],e.y=this.elements[3]*n+this.elements[4]*s+this.elements[5],e.z=0),e},multX:function(t,e){return t*this.elements[0]+e*this.elements[1]+this.elements[2]},multY:function(t,e){return t*this.elements[3]+e*this.elements[4]+this.elements[5]},skewX:function(t){this.apply(1,0,1,t,0,0)},skewY:function(t){this.apply(1,0,1,0,t,0)},shearX:function(t){this.apply(1,0,1,Math.tan(t),0,0)},shearY:function(t){this.apply(1,0,1,0,Math.tan(t),0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){const t=this.determinant();if(Math.abs(t)>PConstants.MIN_INT){const e=this.elements[0],n=this.elements[1],s=this.elements[2],i=this.elements[3],r=this.elements[4],o=this.elements[5];return this.elements[0]=r/t,this.elements[3]=-i/t,this.elements[1]=-n/t,this.elements[4]=e/t,this.elements[2]=(n*o-r*s)/t,this.elements[5]=(i*s-e*o)/t,!0}return!1},scale:function(t,n){t&&n===e&&(n=t),t&&n&&(this.elements[0]*=t,this.elements[1]*=n,this.elements[3]*=t,this.elements[4]*=n)},invScale:function(t,e){t&&!e&&(e=t),this.scale(1/t,1/e)},apply:function(){let t;1===arguments.length&&arguments[0]instanceof s?t=arguments[0].array():6===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,this.elements[2],0,0,this.elements[5]];let n=0;for(let s=0;s<2;s++)for(let i=0;i<3;i++,n++)e[n]+=this.elements[3*s+0]*t[i+0]+this.elements[3*s+1]*t[i+3];this.elements=e.slice()},preApply:function(){let t;1===arguments.length&&arguments[0]instanceof s?t=arguments[0].array():6===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,t[2],0,0,t[5]];e[2]=t[2]+this.elements[2]*t[0]+this.elements[5]*t[1],e[5]=t[5]+this.elements[2]*t[3]+this.elements[5]*t[4],e[0]=this.elements[0]*t[0]+this.elements[3]*t[1],e[3]=this.elements[0]*t[3]+this.elements[3]*t[4],e[1]=this.elements[1]*t[0]+this.elements[4]*t[1],e[4]=this.elements[1]*t[3]+this.elements[4]*t[4],this.elements=e.slice()},rotate:function(t){const e=Math.cos(t),n=Math.sin(t);let s=this.elements[0],i=this.elements[1];this.elements[0]=e*s+n*i,this.elements[1]=-n*s+e*i,s=this.elements[3],i=this.elements[4],this.elements[3]=e*s+n*i,this.elements[4]=-n*s+e*i},rotateZ:function(t){this.rotate(t)},invRotateZ:function(t){this.rotateZ(t-Math.PI)},print:function(){const t=printMatrixHelper(this.elements),e=n.nfs(this.elements[0],t,4)+" "+n.nfs(this.elements[1],t,4)+" "+n.nfs(this.elements[2],t,4)+"\n"+n.nfs(this.elements[3],t,4)+" "+n.nfs(this.elements[4],t,4)+" "+n.nfs(this.elements[5],t,4)+"\n\n";n.println(e)}},s}},{}],15:[function(t,e,n){e.exports=function(t,e){const n=t.p,s=function(){this.reset()};return s.prototype={set:function(){16===arguments.length?this.elements=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof s?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){const t=new s;return t.set(this.elements),t},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function(){return this.elements.slice()},translate:function(t,n,s){s===e&&(s=0),this.elements[3]+=t*this.elements[0]+n*this.elements[1]+s*this.elements[2],this.elements[7]+=t*this.elements[4]+n*this.elements[5]+s*this.elements[6],this.elements[11]+=t*this.elements[8]+n*this.elements[9]+s*this.elements[10],this.elements[15]+=t*this.elements[12]+n*this.elements[13]+s*this.elements[14]},transpose:function(){let t=this.elements[4];this.elements[4]=this.elements[1],this.elements[1]=t,t=this.elements[8],this.elements[8]=this.elements[2],this.elements[2]=t,t=this.elements[6],this.elements[6]=this.elements[9],this.elements[9]=t,t=this.elements[3],this.elements[3]=this.elements[12],this.elements[12]=t,t=this.elements[7],this.elements[7]=this.elements[13],this.elements[13]=t,t=this.elements[11],this.elements[11]=this.elements[14],this.elements[14]=t},mult:function(t,e){let n,s,i,r;return t instanceof PVector?(n=t.x,s=t.y,i=t.z,r=1,e||(e=new PVector)):t instanceof Array&&(n=t[0],s=t[1],i=t[2],r=t[3]||1,(!e||3!==e.length&&4!==e.length)&&(e=[0,0,0])),e instanceof Array&&(3===e.length?(e[0]=this.elements[0]*n+this.elements[1]*s+this.elements[2]*i+this.elements[3],e[1]=this.elements[4]*n+this.elements[5]*s+this.elements[6]*i+this.elements[7],e[2]=this.elements[8]*n+this.elements[9]*s+this.elements[10]*i+this.elements[11]):4===e.length&&(e[0]=this.elements[0]*n+this.elements[1]*s+this.elements[2]*i+this.elements[3]*r,e[1]=this.elements[4]*n+this.elements[5]*s+this.elements[6]*i+this.elements[7]*r,e[2]=this.elements[8]*n+this.elements[9]*s+this.elements[10]*i+this.elements[11]*r,e[3]=this.elements[12]*n+this.elements[13]*s+this.elements[14]*i+this.elements[15]*r)),e instanceof PVector&&(e.x=this.elements[0]*n+this.elements[1]*s+this.elements[2]*i+this.elements[3],e.y=this.elements[4]*n+this.elements[5]*s+this.elements[6]*i+this.elements[7],e.z=this.elements[8]*n+this.elements[9]*s+this.elements[10]*i+this.elements[11]),e},preApply:function(){let t;1===arguments.length&&arguments[0]instanceof s?t=arguments[0].array():16===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let n=0;for(let s=0;s<4;s++)for(let i=0;i<4;i++,n++)e[n]+=this.elements[i+0]*t[4*s+0]+this.elements[i+4]*t[4*s+1]+this.elements[i+8]*t[4*s+2]+this.elements[i+12]*t[4*s+3];this.elements=e.slice()},apply:function(){let t;1===arguments.length&&arguments[0]instanceof s?t=arguments[0].array():16===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let n=0;for(let s=0;s<4;s++)for(let i=0;i<4;i++,n++)e[n]+=this.elements[4*s+0]*t[i+0]+this.elements[4*s+1]*t[i+4]+this.elements[4*s+2]*t[i+8]+this.elements[4*s+3]*t[i+12];this.elements=e.slice()},rotate:function(t,e,n,s){if(n){const i=Math.cos(t),r=Math.sin(t),o=1-i;this.apply(o*e*e+i,o*e*n-r*s,o*e*s+r*n,0,o*e*n+r*s,o*n*n+i,o*n*s-r*e,0,o*e*s-r*n,o*n*s+r*e,o*s*s+i,0,0,0,0,1)}else this.rotateZ(t)},invApply:function(){inverseCopy===e&&(inverseCopy=new s);const t=arguments;return inverseCopy.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),!!inverseCopy.invert()&&(this.preApply(inverseCopy),!0)},rotateX:function(t){const e=Math.cos(t),n=Math.sin(t);this.apply([1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1])},rotateY:function(t){const e=Math.cos(t),n=Math.sin(t);this.apply([e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1])},rotateZ:function(t){const e=Math.cos(t),n=Math.sin(t);this.apply([e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1])},scale:function(t,n,s){t&&n===e&&s===e?n=s=t:t&&n&&s===e&&(s=1),t&&n&&s&&(this.elements[0]*=t,this.elements[1]*=n,this.elements[2]*=s,this.elements[4]*=t,this.elements[5]*=n,this.elements[6]*=s,this.elements[8]*=t,this.elements[9]*=n,this.elements[10]*=s,this.elements[12]*=t,this.elements[13]*=n,this.elements[14]*=s)},skewX:function(t){const e=Math.tan(t);this.apply(1,e,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(t){const e=Math.tan(t);this.apply(1,0,0,0,e,1,0,0,0,0,1,0,0,0,0,1)},shearX:function(t){const e=Math.tan(t);this.apply(1,e,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},shearY:function(t){const e=Math.tan(t);this.apply(1,0,0,0,e,1,0,0,0,0,1,0,0,0,0,1)},multX:function(t,e,n,s){return n?s?this.elements[0]*t+this.elements[1]*e+this.elements[2]*n+this.elements[3]*s:this.elements[0]*t+this.elements[1]*e+this.elements[2]*n+this.elements[3]:this.elements[0]*t+this.elements[1]*e+this.elements[3]},multY:function(t,e,n,s){return n?s?this.elements[4]*t+this.elements[5]*e+this.elements[6]*n+this.elements[7]*s:this.elements[4]*t+this.elements[5]*e+this.elements[6]*n+this.elements[7]:this.elements[4]*t+this.elements[5]*e+this.elements[7]},multZ:function(t,e,n,s){return s?this.elements[8]*t+this.elements[9]*e+this.elements[10]*n+this.elements[11]*s:this.elements[8]*t+this.elements[9]*e+this.elements[10]*n+this.elements[11]},multW:function(t,e,n,s){return s?this.elements[12]*t+this.elements[13]*e+this.elements[14]*n+this.elements[15]*s:this.elements[12]*t+this.elements[13]*e+this.elements[14]*n+this.elements[15]},invert:function(){const t=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],e=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],n=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],s=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5],i=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],r=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],o=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],a=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],l=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],h=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],u=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13],c=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],f=t*c-e*u+n*h+s*l-i*a+r*o;if(Math.abs(f)<=1e-9)return!1;const p=[];p[0]=+this.elements[5]*c-this.elements[6]*u+this.elements[7]*h,p[4]=-this.elements[4]*c+this.elements[6]*l-this.elements[7]*a,p[8]=+this.elements[4]*u-this.elements[5]*l+this.elements[7]*o,p[12]=-this.elements[4]*h+this.elements[5]*a-this.elements[6]*o,p[1]=-this.elements[1]*c+this.elements[2]*u-this.elements[3]*h,p[5]=+this.elements[0]*c-this.elements[2]*l+this.elements[3]*a,p[9]=-this.elements[0]*u+this.elements[1]*l-this.elements[3]*o,p[13]=+this.elements[0]*h-this.elements[1]*a+this.elements[2]*o,p[2]=+this.elements[13]*r-this.elements[14]*i+this.elements[15]*s,p[6]=-this.elements[12]*r+this.elements[14]*n-this.elements[15]*e,p[10]=+this.elements[12]*i-this.elements[13]*n+this.elements[15]*t,p[14]=-this.elements[12]*s+this.elements[13]*e-this.elements[14]*t,p[3]=-this.elements[9]*r+this.elements[10]*i-this.elements[11]*s,p[7]=+this.elements[8]*r-this.elements[10]*n+this.elements[11]*e,p[11]=-this.elements[8]*i+this.elements[9]*n-this.elements[11]*t,p[15]=+this.elements[8]*s-this.elements[9]*e+this.elements[10]*t;const m=1/f;return p[0]*=m,p[1]*=m,p[2]*=m,p[3]*=m,p[4]*=m,p[5]*=m,p[6]*=m,p[7]*=m,p[8]*=m,p[9]*=m,p[10]*=m,p[11]*=m,p[12]*=m,p[13]*=m,p[14]*=m,p[15]*=m,this.elements=p.slice(),!0},toString:function(){let t="";for(let e=0;e<15;e++)t+=this.elements[e]+", ";return t+=this.elements[15]},print:function(){const t=printMatrixHelper(this.elements),e=n.nfs(this.elements[0],t,4)+" "+n.nfs(this.elements[1],t,4)+" "+n.nfs(this.elements[2],t,4)+" "+n.nfs(this.elements[3],t,4)+"\n"+n.nfs(this.elements[4],t,4)+" "+n.nfs(this.elements[5],t,4)+" "+n.nfs(this.elements[6],t,4)+" "+n.nfs(this.elements[7],t,4)+"\n"+n.nfs(this.elements[8],t,4)+" "+n.nfs(this.elements[9],t,4)+" "+n.nfs(this.elements[10],t,4)+" "+n.nfs(this.elements[11],t,4)+"\n"+n.nfs(this.elements[12],t,4)+" "+n.nfs(this.elements[13],t,4)+" "+n.nfs(this.elements[14],t,4)+" "+n.nfs(this.elements[15],t,4)+"\n\n";n.println(e)},invTranslate:function(t,e,n){this.preApply(1,0,0,-t,0,1,0,-e,0,0,1,-n,0,0,0,1)},invRotateX:function(t){const e=Math.cos(-t),n=Math.sin(-t);this.preApply([1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1])},invRotateY:function(t){const e=Math.cos(-t),n=Math.sin(-t);this.preApply([e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1])},invRotateZ:function(t){const e=Math.cos(-t),n=Math.sin(-t);this.preApply([e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1])},invScale:function(t,e,n){this.preApply([1/t,0,0,0,0,1/e,0,0,0,0,1/n,0,0,0,0,1])}},s}},{}],16:[function(t,e,n){e.exports=function(t){const e=t.PConstants,n=t.PMatrix2D,s=t.PMatrix3D,i=function(t){this.family=t||e.GROUP,this.visible=!0,this.style=!0,this.children=[],this.nameTable=[],this.params=[],this.name="",this.image=null,this.matrix=null,this.kind=null,this.close=null,this.width=null,this.height=null,this.parent=null};return i.prototype={isVisible:function(){return this.visible},setVisible:function(t){this.visible=t},disableStyle:function(){this.style=!1;for(let t=0,e=this.children.length;t<e;t++)this.children[t].disableStyle()},enableStyle:function(){this.style=!0;for(let t=0,e=this.children.length;t<e;t++)this.children[t].enableStyle()},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(t){this.name=t},getName:function(){return this.name},draw:function(t){if(!t)throw"render context missing for draw() in PShape";this.visible&&(this.pre(t),this.drawImpl(t),this.post(t))},drawImpl:function(t){this.family===e.GROUP?this.drawGroup(t):this.family===e.PRIMITIVE?this.drawPrimitive(t):this.family===e.GEOMETRY?this.drawGeometry(t):this.family===e.PATH&&this.drawPath(t)},drawPath:function(t){let n,s;if(0!==this.vertices.length){if(t.beginShape(),0===this.vertexCodes.length)if(2===this.vertices[0].length)for(n=0,s=this.vertices.length;n<s;n++)t.vertex(this.vertices[n][0],this.vertices[n][1]);else for(n=0,s=this.vertices.length;n<s;n++)t.vertex(this.vertices[n][0],this.vertices[n][1],this.vertices[n][2]);else{let i=0;if(2===this.vertices[0].length)for(n=0,s=this.vertexCodes.length;n<s;n++)this.vertexCodes[n]===e.VERTEX?(t.vertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i].moveTo),t.breakShape=!1,i++):this.vertexCodes[n]===e.BEZIER_VERTEX?(t.bezierVertex(this.vertices[i+0][0],this.vertices[i+0][1],this.vertices[i+1][0],this.vertices[i+1][1],this.vertices[i+2][0],this.vertices[i+2][1]),i+=3):this.vertexCodes[n]===e.CURVE_VERTEX?(t.curveVertex(this.vertices[i][0],this.vertices[i][1]),i++):this.vertexCodes[n]===e.BREAK&&(t.breakShape=!0);else for(n=0,s=this.vertexCodes.length;n<s;n++)this.vertexCodes[n]===e.VERTEX?(t.vertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]),!0===this.vertices[i].moveTo?vertArray[vertArray.length-1].moveTo=!0:!1===this.vertices[i].moveTo&&(vertArray[vertArray.length-1].moveTo=!1),t.breakShape=!1):this.vertexCodes[n]===e.BEZIER_VERTEX?(t.bezierVertex(this.vertices[i+0][0],this.vertices[i+0][1],this.vertices[i+0][2],this.vertices[i+1][0],this.vertices[i+1][1],this.vertices[i+1][2],this.vertices[i+2][0],this.vertices[i+2][1],this.vertices[i+2][2]),i+=3):this.vertexCodes[n]===e.CURVE_VERTEX?(t.curveVertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]),i++):this.vertexCodes[n]===e.BREAK&&(t.breakShape=!0)}t.endShape(this.close?e.CLOSE:e.OPEN)}},drawGeometry:function(t){let e,n;if(t.beginShape(this.kind),this.style)for(e=0,n=this.vertices.length;e<n;e++)t.vertex(this.vertices[e]);else for(e=0,n=this.vertices.length;e<n;e++){const n=this.vertices[e];0===n[2]?t.vertex(n[0],n[1]):t.vertex(n[0],n[1],n[2])}t.endShape()},drawGroup:function(t){for(let e=0,n=this.children.length;e<n;e++)this.children[e].draw(t)},drawPrimitive:function(t){if(this.kind===e.POINT)t.point(this.params[0],this.params[1]);else if(this.kind===e.LINE)4===this.params.length?t.line(this.params[0],this.params[1],this.params[2],this.params[3]):t.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(this.kind===e.TRIANGLE)t.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(this.kind===e.QUAD)t.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7]);else if(this.kind===e.RECT)if(null!==this.image){const n=imageModeConvert;t.imageMode(e.CORNER),t.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3]),imageModeConvert=n}else{const n=t.curRectMode;t.rectMode(e.CORNER),t.rect(this.params[0],this.params[1],this.params[2],this.params[3]),t.curRectMode=n}else if(this.kind===e.ELLIPSE){const n=t.curEllipseMode;t.ellipseMode(e.CORNER),t.ellipse(this.params[0],this.params[1],this.params[2],this.params[3]),t.curEllipseMode=n}else if(this.kind===e.ARC){const n=curEllipseMode;t.ellipseMode(e.CORNER),t.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]),curEllipseMode=n}else this.kind===e.BOX?1===this.params.length?t.box(this.params[0]):t.box(this.params[0],this.params[1],this.params[2]):this.kind===e.SPHERE&&t.sphere(this.params[0])},pre:function(t){this.matrix&&(t.pushMatrix(),t.transform(this.matrix)),this.style&&(t.pushStyle(),this.styles(t))},post:function(t){this.matrix&&t.popMatrix(),this.style&&t.popStyle()},styles:function(t){this.stroke?(t.stroke(this.strokeColor),t.strokeWeight(this.strokeWeight),t.strokeCap(this.strokeCap),t.strokeJoin(this.strokeJoin)):t.noStroke(),this.fill?t.fill(this.fillColor):t.noFill()},getChild:function(t){let e,n,s;if("number"==typeof t)return this.children[t];if(""===t||this.name===t)return this;if(this.nameTable.length>0){for(e=0,n=this.nameTable.length;e<n||s;e++)if(this.nameTable[e].getName===t){s=this.nameTable[e];break}if(s)return s}for(e=0,n=this.children.length;e<n;e++)if(s=this.children[e].getChild(t))return s;return null},getChildCount:function(){return this.children.length},addChild:function(t){this.children.push(t),t.parent=this,null!==t.getName()&&this.addName(t.getName(),t)},addName:function(t,e){null!==this.parent?this.parent.addName(t,e):this.nameTable.push([t,e])},translate:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.translate(arguments[0],arguments[1])):(this.checkMatrix(3),this.matrix.translate(arguments[0],arguments[1],0))},checkMatrix:function(t){null===this.matrix?this.matrix=2===t?new n:new s:3===t&&this.matrix instanceof n&&(this.matrix=new s)},rotateX:function(t){this.rotate(t,1,0,0)},rotateY:function(t){this.rotate(t,0,1,0)},rotateZ:function(t){this.rotate(t,0,0,1)},rotate:function(){1===arguments.length?(this.checkMatrix(2),this.matrix.rotate(arguments[0])):(this.checkMatrix(3),this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3]))},scale:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1])):3===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1],arguments[2])):(this.checkMatrix(2),this.matrix.scale(arguments[0]))},resetMatrix:function(){this.checkMatrix(2),this.matrix.reset()},applyMatrix:function(t){1===arguments.length?this.applyMatrix(t.elements[0],t.elements[1],0,t.elements[2],t.elements[3],t.elements[4],0,t.elements[5],0,0,1,0,0,0,0,1):6===arguments.length?(this.checkMatrix(2),this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)):16===arguments.length&&(this.checkMatrix(3),this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]))}},i}},{}],17:[function(t,e,n){e.exports=function(t){const e=t.CommonFunctions,n=t.PConstants,s=t.PShape,i=t.XMLElement,r=t.colors,o=function(){if(s.call(this),1===arguments.length){if(this.element=arguments[0],this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=n.ALPHA_MASK,this.strokeWeight=1,this.strokeCap=n.SQUARE,this.strokeJoin=n.MITER,this.strokeGradient=null,this.strokeGradientPaint=null,this.strokeName=null,this.strokeOpacity=1,this.fill=!0,this.fillColor=n.ALPHA_MASK,this.fillGradient=null,this.fillGradientPaint=null,this.fillName=null,this.fillOpacity=1,"svg"!==this.element.getName())throw"root is not <svg>, it's <"+this.element.getName()+">"}else 2===arguments.length&&("string"==typeof arguments[1]?arguments[1].indexOf(".svg")>-1&&(this.element=new i(!0,arguments[1]),this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=n.ALPHA_MASK,this.strokeWeight=1,this.strokeCap=n.SQUARE,this.strokeJoin=n.MITER,this.strokeGradient="",this.strokeGradientPaint="",this.strokeName="",this.strokeOpacity=1,this.fill=!0,this.fillColor=n.ALPHA_MASK,this.fillGradient=null,this.fillGradientPaint=null,this.fillOpacity=1):arguments[0]&&(this.element=arguments[1],this.vertexCodes=arguments[0].vertexCodes.slice(),this.vertices=arguments[0].vertices.slice(),this.stroke=arguments[0].stroke,this.strokeColor=arguments[0].strokeColor,this.strokeWeight=arguments[0].strokeWeight,this.strokeCap=arguments[0].strokeCap,this.strokeJoin=arguments[0].strokeJoin,this.strokeGradient=arguments[0].strokeGradient,this.strokeGradientPaint=arguments[0].strokeGradientPaint,this.strokeName=arguments[0].strokeName,this.fill=arguments[0].fill,this.fillColor=arguments[0].fillColor,this.fillGradient=arguments[0].fillGradient,this.fillGradientPaint=arguments[0].fillGradientPaint,this.fillName=arguments[0].fillName,this.strokeOpacity=arguments[0].strokeOpacity,this.fillOpacity=arguments[0].fillOpacity,this.opacity=arguments[0].opacity));this.name=this.element.getStringAttribute("id");const t=this.element.getStringAttribute("display","inline");this.visible="none"!==t;const e=this.element.getAttribute("transform");e&&(this.matrix=this.parseMatrix(e));const r=this.element.getStringAttribute("viewBox");if(null!==r){const t=r.split(" ");this.width=t[2],this.height=t[3]}const o=this.element.getStringAttribute("width"),a=this.element.getStringAttribute("height");if(null!==o)this.width=this.parseUnitSize(o),this.height=this.parseUnitSize(a);else if(0===this.width||0===this.height)throw this.width=1,this.height=1,"The width and/or height is not readable in the <svg> tag of this file.";this.parseColors(this.element),this.parseChildren(this.element)};return(o.prototype=new s).parseMatrix=function(){function t(t){let e=[];return t.replace(/\((.*?)\)/,function(t,n){e=n.replace(/,+/g," ").split(/\s+/)}),e}return function(n){this.checkMatrix(2);const s=[];if(n.replace(/\s*(\w+)\((.*?)\)/g,function(t){s.push(e.trim(t))}),0===s.length)return null;for(let n=0,i=s.length;n<i;n++){const i=t(s[n]);if(-1!==s[n].indexOf("matrix"))this.matrix.set(i[0],i[2],i[4],i[1],i[3],i[5]);else if(-1!==s[n].indexOf("translate")){const t=i[0],e=2===i.length?i[1]:0;this.matrix.translate(t,e)}else if(-1!==s[n].indexOf("scale")){const t=i[0],e=2===i.length?i[1]:i[0];this.matrix.scale(t,e)}else if(-1!==s[n].indexOf("rotate")){const t=i[0];1===i.length?this.matrix.rotate(e.radians(t)):3===i.length&&(this.matrix.translate(i[1],i[2]),this.matrix.rotate(e.radians(i[0])),this.matrix.translate(-i[1],-i[2]))}else-1!==s[n].indexOf("skewX")?this.matrix.skewX(parseFloat(i[0])):-1!==s[n].indexOf("skewY")?this.matrix.skewY(i[0]):-1!==s[n].indexOf("shearX")?this.matrix.shearX(i[0]):-1!==s[n].indexOf("shearY")&&this.matrix.shearY(i[0])}return this.matrix}}(),o.prototype.parseChildren=function(t){const e=t.getChildren(),n=new s;let i,r;for(i=0,r=e.length;i<r;i++){const t=this.parseChild(e[i]);t&&n.addChild(t)}for(i=0,r=n.children.length;i<r;i++)this.children.push(n.children[i])},o.prototype.getName=function(){return this.name},o.prototype.parseChild=function(t){const e=t.getName();let n;return"g"===e?n=new o(this,t):"defs"===e?n=new o(this,t):"line"===e?(n=new o(this,t)).parseLine():"circle"===e?(n=new o(this,t)).parseEllipse(!0):"ellipse"===e?(n=new o(this,t)).parseEllipse(!1):"rect"===e?(n=new o(this,t)).parseRect():"polygon"===e?(n=new o(this,t)).parsePoly(!0):"polyline"===e?(n=new o(this,t)).parsePoly(!1):"path"===e?(n=new o(this,t)).parsePath():"radialGradient"===e?unimplemented("PShapeSVG.prototype.parseChild, name = radialGradient"):"linearGradient"===e?unimplemented("PShapeSVG.prototype.parseChild, name = linearGradient"):"text"===e?unimplemented("PShapeSVG.prototype.parseChild, name = text"):"filter"===e?unimplemented("PShapeSVG.prototype.parseChild, name = filter"):"mask"===e&&unimplemented("PShapeSVG.prototype.parseChild, name = mask"),n},o.prototype.parsePath=function(){this.family=n.PATH,this.kind=0;let t=e.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," "));if(null===t)return;t=t.split("");let s,i,r,o,a=0,l=0,h=0,u=0,c=0,f=0,p=0,m=0,g=0,d=0,y=0,b=0,A=0,x=0,w=0,E=0,v="",S=[],P=!1;for(;w<t.length;)if((E=t[w].charCodeAt(0))>=65&&E<=90||E>=97&&E<=122){if(r=w,++w<t.length)for(S=[],E=t[w].charCodeAt(0);!(E>=65&&E<=90||E>=97&&E<=100||E>=102&&E<=122)&&!1===P;)32===E?(""!==v&&(S.push(parseFloat(v)),v=""),w++):45===E?101===t[w-1].charCodeAt(0)?(v+=t[w].toString(),w++):(""!==v&&S.push(parseFloat(v)),v=t[w].toString(),w++):(v+=t[w].toString(),w++),w===t.length?P=!0:E=t[w].charCodeAt(0);if(""!==v&&(S.push(parseFloat(v)),v=""),77===(E=(i=t[r]).charCodeAt(0))){if(S.length>=2&&S.length%2==0&&(a=S[0],l=S[1],this.parsePathMoveto(a,l),S.length>2))for(r=2,o=S.length;r<o;r+=2)a=S[r],l=S[r+1],this.parsePathLineto(a,l)}else if(109===E){if(S.length>=2&&S.length%2==0&&(a+=S[0],l+=S[1],this.parsePathMoveto(a,l),S.length>2))for(r=2,o=S.length;r<o;r+=2)a+=S[r],l+=S[r+1],this.parsePathLineto(a,l)}else if(76===E){if(S.length>=2&&S.length%2==0)for(r=0,o=S.length;r<o;r+=2)a=S[r],l=S[r+1],this.parsePathLineto(a,l)}else if(108===E){if(S.length>=2&&S.length%2==0)for(r=0,o=S.length;r<o;r+=2)a+=S[r],l+=S[r+1],this.parsePathLineto(a,l)}else if(72===E)for(r=0,o=S.length;r<o;r++)a=S[r],this.parsePathLineto(a,l);else if(104===E)for(r=0,o=S.length;r<o;r++)a+=S[r],this.parsePathLineto(a,l);else if(86===E)for(r=0,o=S.length;r<o;r++)l=S[r],this.parsePathLineto(a,l);else if(118===E)for(r=0,o=S.length;r<o;r++)l+=S[r],this.parsePathLineto(a,l);else if(67===E){if(S.length>=6&&S.length%6==0)for(r=0,o=S.length;r<o;r+=6)c=S[r],p=S[r+1],f=S[r+2],m=S[r+3],g=S[r+4],d=S[r+5],this.parsePathCurveto(c,p,f,m,g,d),a=g,l=d}else if(99===E){if(S.length>=6&&S.length%6==0)for(r=0,o=S.length;r<o;r+=6)c=a+S[r],p=l+S[r+1],f=a+S[r+2],m=l+S[r+3],g=a+S[r+4],d=l+S[r+5],this.parsePathCurveto(c,p,f,m,g,d),a=g,l=d}else if(83===E){if(S.length>=4&&S.length%4==0)for(r=0,o=S.length;r<o;r+=4)"c"===s.toLowerCase()||"s"===s.toLowerCase()?(y=this.vertices[this.vertices.length-2][0],b=this.vertices[this.vertices.length-2][1],c=(A=this.vertices[this.vertices.length-1][0])+(A-y),p=(x=this.vertices[this.vertices.length-1][1])+(x-b)):(c=this.vertices[this.vertices.length-1][0],p=this.vertices[this.vertices.length-1][1]),f=S[r],m=S[r+1],g=S[r+2],d=S[r+3],this.parsePathCurveto(c,p,f,m,g,d),a=g,l=d}else if(115===E){if(S.length>=4&&S.length%4==0)for(r=0,o=S.length;r<o;r+=4)"c"===s.toLowerCase()||"s"===s.toLowerCase()?(y=this.vertices[this.vertices.length-2][0],b=this.vertices[this.vertices.length-2][1],c=(A=this.vertices[this.vertices.length-1][0])+(A-y),p=(x=this.vertices[this.vertices.length-1][1])+(x-b)):(c=this.vertices[this.vertices.length-1][0],p=this.vertices[this.vertices.length-1][1]),f=a+S[r],m=l+S[r+1],g=a+S[r+2],d=l+S[r+3],this.parsePathCurveto(c,p,f,m,g,d),a=g,l=d}else if(81===E){if(S.length>=4&&S.length%4==0)for(r=0,o=S.length;r<o;r+=4)h=S[r],u=S[r+1],g=S[r+2],d=S[r+3],this.parsePathQuadto(a,l,h,u,g,d),a=g,l=d}else if(113===E){if(S.length>=4&&S.length%4==0)for(r=0,o=S.length;r<o;r+=4)h=a+S[r],u=l+S[r+1],g=a+S[r+2],d=l+S[r+3],this.parsePathQuadto(a,l,h,u,g,d),a=g,l=d}else if(84===E){if(S.length>=2&&S.length%2==0)for(r=0,o=S.length;r<o;r+=2)"q"===s.toLowerCase()||"t"===s.toLowerCase()?(y=this.vertices[this.vertices.length-2][0],b=this.vertices[this.vertices.length-2][1],h=(A=this.vertices[this.vertices.length-1][0])+(A-y),u=(x=this.vertices[this.vertices.length-1][1])+(x-b)):(h=a,u=l),g=S[r],d=S[r+1],this.parsePathQuadto(a,l,h,u,g,d),a=g,l=d}else if(116===E){if(S.length>=2&&S.length%2==0)for(r=0,o=S.length;r<o;r+=2)"q"===s.toLowerCase()||"t"===s.toLowerCase()?(y=this.vertices[this.vertices.length-2][0],b=this.vertices[this.vertices.length-2][1],h=(A=this.vertices[this.vertices.length-1][0])+(A-y),u=(x=this.vertices[this.vertices.length-1][1])+(x-b)):(h=a,u=l),g=a+S[r],d=l+S[r+1],this.parsePathQuadto(a,l,h,u,g,d),a=g,l=d}else 90!==E&&122!==E||(this.close=!0);s=i.toString()}else w++},o.prototype.parsePathQuadto=function(t,e,s,i,r,o){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(n.BEZIER_VERTEX),this.parsePathVertex(t+2*(s-t)/3,e+2*(i-e)/3),this.parsePathVertex(r+2*(s-r)/3,o+2*(i-o)/3),this.parsePathVertex(r,o)},o.prototype.parsePathCurveto=function(t,e,s,i,r,o){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(n.BEZIER_VERTEX),this.parsePathVertex(t,e),this.parsePathVertex(s,i),this.parsePathVertex(r,o)},o.prototype.parsePathLineto=function(t,e){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(n.VERTEX),this.parsePathVertex(t,e),this.vertices[this.vertices.length-1].moveTo=!1},o.prototype.parsePathMoveto=function(t,e){this.vertices.length>0&&this.parsePathCode(n.BREAK),this.parsePathCode(n.VERTEX),this.parsePathVertex(t,e),this.vertices[this.vertices.length-1].moveTo=!0},o.prototype.parsePathVertex=function(t,e){const n=[];n[0]=t,n[1]=e,this.vertices.push(n)},o.prototype.parsePathCode=function(t){this.vertexCodes.push(t)},o.prototype.parsePoly=function(t){this.family=n.PATH,this.close=t;const s=e.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," "));if(null!==s){const t=s.split(" ");if(t.length%2!=0)throw"Error parsing polygon points: odd number of coordinates provided";for(let e=0,n=t.length;e<n;e++){const n=[];n[0]=t[e],n[1]=t[++e],this.vertices.push(n)}}},o.prototype.parseRect=function(){if(this.kind=n.RECT,this.family=n.PRIMITIVE,this.params=[],this.params[0]=this.element.getFloatAttribute("x"),this.params[1]=this.element.getFloatAttribute("y"),this.params[2]=this.element.getFloatAttribute("width"),this.params[3]=this.element.getFloatAttribute("height"),this.params[2]<0||this.params[3]<0)throw"svg error: negative width or height found while parsing <rect>"},o.prototype.parseEllipse=function(t){let e,s;if(this.kind=n.ELLIPSE,this.family=n.PRIMITIVE,this.params=[],this.params[0]=0|this.element.getFloatAttribute("cx"),this.params[1]=0|this.element.getFloatAttribute("cy"),t){if((e=s=this.element.getFloatAttribute("r"))<0)throw"svg error: negative radius found while parsing <circle>"}else if(e=this.element.getFloatAttribute("rx"),s=this.element.getFloatAttribute("ry"),e<0||s<0)throw"svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>";this.params[0]-=e,this.params[1]-=s,this.params[2]=2*e,this.params[3]=2*s},o.prototype.parseLine=function(){this.kind=n.LINE,this.family=n.PRIMITIVE,this.params=[],this.params[0]=this.element.getFloatAttribute("x1"),this.params[1]=this.element.getFloatAttribute("y1"),this.params[2]=this.element.getFloatAttribute("x2"),this.params[3]=this.element.getFloatAttribute("y2")},o.prototype.parseColors=function(t){if(t.hasAttribute("opacity")&&this.setOpacity(t.getAttribute("opacity")),t.hasAttribute("stroke")&&this.setStroke(t.getAttribute("stroke")),t.hasAttribute("stroke-width")&&this.setStrokeWeight(t.getAttribute("stroke-width")),t.hasAttribute("stroke-linejoin")&&this.setStrokeJoin(t.getAttribute("stroke-linejoin")),t.hasAttribute("stroke-linecap")&&this.setStrokeCap(t.getStringAttribute("stroke-linecap")),t.hasAttribute("fill")&&this.setFill(t.getStringAttribute("fill")),t.hasAttribute("style")){const n=t.getStringAttribute("style").toString().split(";");for(let t=0,s=n.length;t<s;t++){const s=e.trim(n[t].split(":"));"fill"===s[0]?this.setFill(s[1]):"fill-opacity"===s[0]?this.setFillOpacity(s[1]):"stroke"===s[0]?this.setStroke(s[1]):"stroke-width"===s[0]?this.setStrokeWeight(s[1]):"stroke-linecap"===s[0]?this.setStrokeCap(s[1]):"stroke-linejoin"===s[0]?this.setStrokeJoin(s[1]):"stroke-opacity"===s[0]?this.setStrokeOpacity(s[1]):"opacity"===s[0]&&this.setOpacity(s[1])}}},o.prototype.setFillOpacity=function(t){this.fillOpacity=parseFloat(t),this.fillColor=255*this.fillOpacity<<24|16777215&this.fillColor},o.prototype.setFill=function(t){const e=4278190080&this.fillColor;"none"===t?this.fill=!1:0===t.indexOf("#")?(this.fill=!0,4===t.length&&(t=t.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.fillColor=e|16777215&parseInt(t.substring(1),16)):0===t.indexOf("rgb")?(this.fill=!0,this.fillColor=e|this.parseRGB(t)):0===t.indexOf("url(#")?this.fillName=t.substring(5,t.length-1):r[t]&&(this.fill=!0,this.fillColor=e|16777215&parseInt(r[t].substring(1),16))},o.prototype.setOpacity=function(t){this.strokeColor=255*parseFloat(t)<<24|16777215&this.strokeColor,this.fillColor=255*parseFloat(t)<<24|16777215&this.fillColor},o.prototype.setStroke=function(t){const e=4278190080&this.strokeColor;"none"===t?this.stroke=!1:"#"===t.charAt(0)?(this.stroke=!0,4===t.length&&(t=t.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.strokeColor=e|16777215&parseInt(t.substring(1),16)):0===t.indexOf("rgb")?(this.stroke=!0,this.strokeColor=e|this.parseRGB(t)):0===t.indexOf("url(#")?this.strokeName=t.substring(5,t.length-1):r[t]&&(this.stroke=!0,this.strokeColor=e|16777215&parseInt(r[t].substring(1),16))},o.prototype.setStrokeWeight=function(t){this.strokeWeight=this.parseUnitSize(t)},o.prototype.setStrokeJoin=function(t){"miter"===t?this.strokeJoin=n.MITER:"round"===t?this.strokeJoin=n.ROUND:"bevel"===t&&(this.strokeJoin=n.BEVEL)},o.prototype.setStrokeCap=function(t){"butt"===t?this.strokeCap=n.SQUARE:"round"===t?this.strokeCap=n.ROUND:"square"===t&&(this.strokeCap=n.PROJECT)},o.prototype.setStrokeOpacity=function(t){this.strokeOpacity=parseFloat(t),this.strokeColor=255*this.strokeOpacity<<24|16777215&this.strokeColor},o.prototype.parseRGB=function(t){const e=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(", ");return e[0]<<16|e[1]<<8|e[2]},o.prototype.parseUnitSize=function(t){const e=t.length-2;return e<0?t:t.indexOf("pt")===e?1.25*parseFloat(t.substring(0,e)):t.indexOf("pc")===e?15*parseFloat(t.substring(0,e)):t.indexOf("mm")===e?3.543307*parseFloat(t.substring(0,e)):t.indexOf("cm")===e?35.43307*parseFloat(t.substring(0,e)):t.indexOf("in")===e?90*parseFloat(t.substring(0,e)):t.indexOf("px")===e?parseFloat(t.substring(0,e)):parseFloat(t)},o}},{}],18:[function(t,e,n){e.exports=function(t,e){const n=t.PConstants;function s(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function i(t){return function(e,n){const s=e.get();return s[t](n),s}}s.fromAngle=function(t,n){return n!==e&&null!==n||(n=new s),n.x=Math.cos(t),n.y=Math.sin(t),n},s.random2D=function(t){return s.fromAngle(Math.random()*n.TWO_PI,t)},s.random3D=function(t){const i=Math.random()*n.TWO_PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r),a=o*Math.cos(i),l=o*Math.sin(i);return t===e||null===t?t=new s(a,l,r):t.set(a,l,r),t},s.dist=function(t,e){return t.dist(e)},s.dot=function(t,e){return t.dot(e)},s.cross=function(t,e){return t.cross(e)},s.sub=function(t,e){return new s(t.x-e.x,t.y-e.y,t.z-e.z)},s.angleBetween=function(t,e){return Math.acos(t.dot(e)/Math.sqrt(t.magSq()*e.magSq()))},s.lerp=function(t,e,n){const i=new s(t.x,t.y,t.z);return i.lerp(e,n),i},s.prototype={set:function(t,e,n){1===arguments.length?this.set(t.x||t[0]||0,t.y||t[1]||0,t.z||t[2]||0):(this.x=t,this.y=e,this.z=n)},get:function(){return new s(this.x,this.y,this.z)},mag:function(){const t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)},magSq:function(){const t=this.x,e=this.y,n=this.z;return t*t+e*e+n*n},setMag:function(t,n){if(n!==e){const e=t;return e.normalize(),e.mult(n),e}n=t,this.normalize(),this.mult(n)},add:function(t,e,n){1===arguments.length?(this.x+=t.x,this.y+=t.y,this.z+=t.z):2===arguments.length?(this.x+=t,this.y+=e):(this.x+=t,this.y+=e,this.z+=n)},sub:function(t,e,n){1===arguments.length?(this.x-=t.x,this.y-=t.y,this.z-=t.z):2===arguments.length?(this.x-=t,this.y-=e):(this.x-=t,this.y-=e,this.z-=n)},mult:function(t){"number"==typeof t?(this.x*=t,this.y*=t,this.z*=t):(this.x*=t.x,this.y*=t.y,this.z*=t.z)},div:function(t){"number"==typeof t?(this.x/=t,this.y/=t,this.z/=t):(this.x/=t.x,this.y/=t.y,this.z/=t.z)},rotate:function(t){const e=this.x,n=Math.cos(t),s=Math.sin(t);this.x=n*this.x-s*this.y,this.y=s*e+n*this.y},dist:function(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return Math.sqrt(e*e+n*n+s*s)},dot:function(t,e,n){return 1===arguments.length?this.x*t.x+this.y*t.y+this.z*t.z:this.x*t+this.y*e+this.z*n},cross:function(t){const e=this.x,n=this.y,i=this.z;return new s(n*t.z-t.y*i,i*t.x-t.z*e,e*t.y-t.x*n)},lerp:function(t,e,n,s){const i=function(t,e,n){return t+(e-t)*n};let r,o;2===arguments.length?(s=e,r=t.x,o=t.y,n=t.z):(r=t,o=e),this.x=i(this.x,r,s),this.y=i(this.y,o,s),this.z=i(this.z,n,s)},normalize:function(){const t=this.mag();t>0&&this.div(t)},limit:function(t){this.mag()>t&&(this.normalize(),this.mult(t))},heading:function(){return-Math.atan2(-this.y,this.x)},heading2D:function(){return this.heading()},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};for(const t in s.prototype)s.prototype.hasOwnProperty(t)&&!s.hasOwnProperty(t)&&(s[t]=i(t));return s}},{}],19:[function(t,e,n){e.exports=function(){const t=function(t,e,n,s,i){this.fullName=t||"",this.name=e||"",this.namespace=n||"",this.value=s,this.type=i};return t.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(t){this.value=t}},t}},{}],20:[function(t,e,n){e.exports=function(t,e){const n=t.Browser,s=n.ajax,i=n.window,r=(i.XMLHttpRequest,i.DOMParser),o=t.XMLAttribute,a=function(t,n,s,i){this.attributes=[],this.children=[],this.fullName=null,this.name=null,this.namespace="",this.content=null,this.parent=null,this.lineNr="",this.systemID="",this.type="ELEMENT",t&&("string"==typeof t?n===e&&t.indexOf("<")>-1?this.parse(t):(this.fullName=t,this.namespace=n,this.systemId=s,this.lineNr=i):this.parse(n,!0))};return a.prototype={parse:function(t,e){let n;try{e&&(t=s(t));const i=(n=(new r).parseFromString(t,"text/xml")).documentElement;if(!i)throw"Error loading document";return this.parseChildrenRecursive(null,i),this}catch(t){throw t}},parseChildrenRecursive:function(t,e){let n,s,i,r,l,h;if(t?(n=new a(e.nodeName)).parent=t:(this.fullName=e.localName,this.name=e.nodeName,n=this),3===e.nodeType&&""!==e.textContent)return this.createPCDataElement(e.textContent);if(4===e.nodeType)return this.createCDataElement(e.textContent);if(e.attributes)for(r=0,l=e.attributes.length;r<l;r++)i=e.attributes[r],s=new o(i.getname,i.nodeName,i.namespaceURI,i.nodeValue,i.nodeType),n.attributes.push(s);if(e.childNodes)for(r=0,l=e.childNodes.length;r<l;r++){const t=e.childNodes[r];null!==(h=n.parseChildrenRecursive(n,t))&&n.children.push(h)}return n},createElement:function(t,n,s,i){return s===e?new a(t,n):new a(t,n,s,i)},createPCDataElement:function(t,e){if(""===t.replace(/^\s+$/g,""))return null;const n=new a;return n.type="TEXT",n.content=t,n},createCDataElement:function(t){const e=this.createPCDataElement(t);if(null===e)return null;e.type="CDATA";let n,s={"<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};for(n in s)Object.hasOwnProperty(s,n)||(t=t.replace(new RegExp(n,"g"),s[n]));return e.cdata=t,e},hasAttribute:function(){return 1===arguments.length?null!==this.getAttribute(arguments[0]):2===arguments.length?null!==this.getAttribute(arguments[0],arguments[1]):void 0},equals:function(t){if(!(t instanceof a))return!1;let e,n,s,i,r;if(this.fullName!==t.fullName)return!1;if(this.attributes.length!==t.getAttributeCount())return!1;if(this.attributes.length!==t.attributes.length)return!1;for(e=0,n=this.attributes.length;e<n;e++){if(s=this.attributes[e].getName(),i=this.attributes[e].getNamespace(),null===(r=t.findAttribute(s,i)))return!1;if(this.attributes[e].getValue()!==r.getValue())return!1;if(this.attributes[e].getType()!==r.getType())return!1}if(this.children.length!==t.getChildCount())return!1;if(this.children.length>0){let s,i;for(e=0,n=this.children.length;e<n;e++)if(s=this.getChild(e),i=t.getChild(e),!s.equals(i))return!1;return!0}return this.content===t.content},getContent:function(){if("TEXT"===this.type||"CDATA"===this.type)return this.content;const t=this.children;return 1!==t.length||"TEXT"!==t[0].type&&"CDATA"!==t[0].type?null:t[0].content},getAttribute:function(){let t;return 2===arguments.length?(t=this.findAttribute(arguments[0]))?t.getValue():arguments[1]:1===arguments.length?(t=this.findAttribute(arguments[0]))?t.getValue():null:3===arguments.length?(t=this.findAttribute(arguments[0],arguments[1]))?t.getValue():arguments[2]:void 0},getStringAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0]):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(t){return this.getStringAttribute(t)},getFloatAttribute:function(){return 1===arguments.length?parseFloat(this.getAttribute(arguments[0],0)):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(t){return this.getFloatAttribute(t)},getIntAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0],0):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(t){return this.getIntAttribute(t)},hasChildren:function(){return this.children.length>0},addChild:function(t){null!==t&&(t.parent=this,this.children.push(t))},insertChild:function(t,e){if(t){if(null===t.getLocalName()&&!this.hasChildren()){const e=this.children[this.children.length-1];if(null===e.getLocalName())return void e.setContent(e.getContent()+t.getContent())}t.parent=this,this.children.splice(e,0,t)}},getChild:function(t){if("number"==typeof t)return this.children[t];if(-1!==t.indexOf("/"))return this.getChildRecursive(t.split("/"),0);let e,n;for(let s=0,i=this.getChildCount();s<i;s++)if(null!==(n=(e=this.getChild(s)).getName())&&n===t)return e;return null},getChildren:function(){if(1===arguments.length){if("number"==typeof arguments[0])return this.getChild(arguments[0]);if(-1!==arguments[0].indexOf("/"))return this.getChildrenRecursive(arguments[0].split("/"),0);const t=[];let e,n;for(let s=0,i=this.getChildCount();s<i;s++)null!==(n=(e=this.getChild(s)).getName())&&n===arguments[0]&&t.push(e);return t}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(t,e){if(e===t.length)return this;let n,s,i=t[e];for(let r=0,o=this.getChildCount();r<o;r++)if(null!==(s=(n=this.getChild(r)).getName())&&s===i)return n.getChildRecursive(t,e+1);return null},getChildrenRecursive:function(t,e){if(e===t.length-1)return this.getChildren(t[e]);const n=this.getChildren(t[e]);let s=[];for(let i=0;i<n.length;i++)s=s.concat(n[i].getChildrenRecursive(t,e+1));return s},isLeaf:function(){return!this.hasChildren()},listChildren:function(){const t=[];for(let e=0,n=this.children.length;e<n;e++)t.push(this.getChild(e).getName());return t},removeAttribute:function(t,e){this.namespace=e||"";for(let e=0,n=this.attributes.length;e<n;e++)if(this.attributes[e].getName()===t&&this.attributes[e].getNamespace()===this.namespace){this.attributes.splice(e,1);break}},removeChild:function(t){if(t)for(let e=0,n=this.children.length;e<n;e++)if(this.children[e].equals(t)){this.children.splice(e,1);break}},removeChildAtIndex:function(t){this.children.length>t&&this.children.splice(t,1)},findAttribute:function(t,e){this.namespace=e||"";for(let e=0,n=this.attributes.length;e<n;e++)if(this.attributes[e].getName()===t&&this.attributes[e].getNamespace()===this.namespace)return this.attributes[e];return null},setAttribute:function(){let t;if(3===arguments.length){const e=arguments[0].indexOf(":"),n=arguments[0].substring(e+1);(t=this.findAttribute(n,arguments[1]))?t.setValue(arguments[2]):(t=new o(arguments[0],n,arguments[1],arguments[2],"CDATA"),this.attributes.push(t))}else(t=this.findAttribute(arguments[0]))?t.setValue(arguments[1]):(t=new o(arguments[0],arguments[0],null,arguments[1],"CDATA"),this.attributes.push(t))},setString:function(t,e){this.setAttribute(t,e)},setInt:function(t,e){this.setAttribute(t,e)},setFloat:function(t,e){this.setAttribute(t,e)},setContent:function(t){this.children.length>0&&Processing.debug("Tried to set content for XMLElement with children"),this.content=t},setName:function(){if(1===arguments.length)this.name=arguments[0],this.fullName=arguments[0],this.namespace=null;else{const t=arguments[0].indexOf(":");null===arguments[1]||t<0?this.name=arguments[0]:this.name=arguments[0].substring(t+1),this.fullName=arguments[0],this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){if("TEXT"===this.type)return this.content||"";if("CDATA"===this.type)return this.cdata||"";const t=this.fullName;let e,n,s="<"+t;for(e=0;e<this.attributes.length;e++){const t=this.attributes[e];s+=" "+t.getName()+'="'+t.getValue()+'"'}if(0===this.children.length)""===this.content||null===this.content||void 0===this.content?s+="/>":s+=">"+this.content+"</"+t+">";else{for(s+=">",n=0;n<this.children.length;n++)s+=this.children[n].toString();s+="</"+t+">"}return s}},a.parse=function(t){const e=new a;return e.parse(t),e},a}},{}],21:[function(t,e,n){e.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],22:[function(t,e,n){e.exports=function(t,e,n){return function(s,i){s.__contains=function(t,e){return"string"!=typeof t?t.contains.apply(t,i(arguments)):null!==t&&null!==e&&"string"==typeof e&&t.indexOf(e)>-1},s.__replaceAll=function(t,e,n){return"string"!=typeof t?t.replaceAll.apply(t,i(arguments)):t.replace(new RegExp(e,"g"),n)},s.__replaceFirst=function(t,e,n){return"string"!=typeof t?t.replaceFirst.apply(t,i(arguments)):t.replace(new RegExp(e,""),n)},s.__replace=function(t,e,n){if("string"!=typeof t)return t.replace.apply(t,i(arguments));if(e instanceof RegExp)return t.replace(e,n);if("string"!=typeof e&&(e=e.toString()),""===e)return t;let s=t.indexOf(e);if(s<0)return t;let r=0,o="";do{o+=t.substring(r,s)+n,r=s+e.length}while((s=t.indexOf(e,r))>=0);return o+t.substring(r)},s.__equals=function(t,n){return t.equals instanceof Function?t.equals.apply(t,i(arguments)):e(t,n)},s.__equalsIgnoreCase=function(t,e){return"string"!=typeof t?t.equalsIgnoreCase.apply(t,i(arguments)):t.toLowerCase()===e.toLowerCase()},s.__toCharArray=function(t){if("string"!=typeof t)return t.toCharArray.apply(t,i(arguments));const e=[];for(let n=0,s=t.length;n<s;++n)e[n]=new Char(t.charAt(n));return e},s.__split=function(t,e,s){if("string"!=typeof t)return t.split.apply(t,i(arguments));const r=new RegExp(e);if(s===n||s<1)return t.split(r);let o,a=[],l=t;for(;-1!==(o=l.search(r))&&a.length<s-1;){const t=r.exec(l).toString();a.push(l.substring(0,o)),l=l.substring(o+t.length)}return-1===o&&""===l||a.push(l),a},s.__codePointAt=function(t,e){let n,s,i=t.charCodeAt(e);return 55296<=i&&i<=56319?1024*((n=i)-55296)+((s=t.charCodeAt(e+1))-56320)+65536:i},s.__matches=function(t,e){return new RegExp(e).test(t)},s.__startsWith=function(t,e,n){return"string"!=typeof t?t.startsWith.apply(t,i(arguments)):!((n=n||0)<0||n>t.length)&&(""===e||e===t||t.indexOf(e)===n)},s.__endsWith=function(t,e){if("string"!=typeof t)return t.endsWith.apply(t,i(arguments));const n=e?e.length:0;return""===e||e===t||t.indexOf(e)===t.length-n},s.__hashCode=function(e){return e.hashCode instanceof Function?e.hashCode.apply(e,i(arguments)):t(e)},s.__printStackTrace=function(t){s.println("Exception: "+t.toString())}}}},{}],23:[function(t,e,n){e.exports=function(t,e){let n=function(){return Math.random()};function s(t,e){let n=t||362436069,s=e||521288629;const i=function(){return 4294967295&((65535&(n=36969*(65535&n)+(n>>>16)&4294967295))<<16|65535&(s=18e3*(65535&s)+(s>>>16)&4294967295))};this.doubleGenerator=function(){const t=i()/4294967296;return t<0?1+t:t},this.intGenerator=i}function i(t){const n=t!==e?new s(t,(t<<16)+(t>>16)):s.createRandomized();let i,r;const o=new Uint8Array(512);for(i=0;i<256;++i)o[i]=i;for(i=0;i<256;++i){const t=o[r=255&n.intGenerator()];o[r]=o[i],o[i]=t}for(i=0;i<256;++i)o[i+256]=o[i];function a(t,e,n,s){const i=15&t,r=i<8?e:n,o=i<4?n:12===i||14===i?e:s;return(0==(1&i)?r:-r)+(0==(2&i)?o:-o)}function l(t,e,n){const s=0==(1&t)?e:n;return 0==(2&t)?-s:s}function h(t,e){return 0==(1&t)?-e:e}function u(t,e,n){return e+t*(n-e)}this.noise3d=function(t,e,n){const s=255&Math.floor(t),i=255&Math.floor(e),r=255&Math.floor(n),l=(3-2*(t-=Math.floor(t)))*t*t,h=(3-2*(e-=Math.floor(e)))*e*e,c=(3-2*(n-=Math.floor(n)))*n*n,f=o[s]+i,p=o[f]+r,m=o[f+1]+r,g=o[s+1]+i,d=o[g]+r,y=o[g+1]+r;return u(c,u(h,u(l,a(o[p],t,e,n),a(o[d],t-1,e,n)),u(l,a(o[m],t,e-1,n),a(o[y],t-1,e-1,n))),u(h,u(l,a(o[p+1],t,e,n-1),a(o[d+1],t-1,e,n-1)),u(l,a(o[m+1],t,e-1,n-1),a(o[y+1],t-1,e-1,n-1))))},this.noise2d=function(t,e){const n=255&Math.floor(t),s=255&Math.floor(e),i=(3-2*(t-=Math.floor(t)))*t*t,r=(3-2*(e-=Math.floor(e)))*e*e,a=o[n]+s,h=o[n+1]+s;return u(r,u(i,l(o[a],t,e),l(o[h],t-1,e)),u(i,l(o[a+1],t,e-1),l(o[h+1],t-1,e-1)))},this.noise1d=function(t){const e=255&Math.floor(t);return u((3-2*(t-=Math.floor(t)))*t*t,h(o[e],t),h(o[e+1],t-1))}}t.abs=Math.abs,t.ceil=Math.ceil,t.exp=Math.exp,t.floor=Math.floor,t.log=Math.log,t.pow=Math.pow,t.round=Math.round,t.sqrt=Math.sqrt,t.acos=Math.acos,t.asin=Math.asin,t.atan=Math.atan,t.atan2=Math.atan2,t.cos=Math.cos,t.sin=Math.sin,t.tan=Math.tan,t.constrain=function(t,e,n){return t>n?n:t<e?e:t},t.dist=function(){let t,e,n;return 4===arguments.length?(t=arguments[0]-arguments[2],e=arguments[1]-arguments[3],Math.sqrt(t*t+e*e)):6===arguments.length?(t=arguments[0]-arguments[3],e=arguments[1]-arguments[4],n=arguments[2]-arguments[5],Math.sqrt(t*t+e*e+n*n)):void 0},t.lerp=function(t,e,n){return(e-t)*n+t},t.mag=function(t,e,n){return n?Math.sqrt(t*t+e*e+n*n):Math.sqrt(t*t+e*e)},t.map=function(t,e,n,s,i){return s+(t-e)/(n-e)*(i-s)},t.max=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[1]:arguments[0];const t=1===arguments.length?arguments[0]:arguments;if(!("length"in t&&t.length>0))throw"Non-empty array is expected";let e=t[0],n=t.length;for(let s=1;s<n;++s)e<t[s]&&(e=t[s]);return e},t.min=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[0]:arguments[1];const t=1===arguments.length?arguments[0]:arguments;if(!("length"in t&&t.length>0))throw"Non-empty array is expected";let e=t[0],n=t.length;for(let s=1;s<n;++s)e>t[s]&&(e=t[s]);return e},t.norm=function(t,e,n){return(t-e)/(n-e)},t.sq=function(t){return t*t},t.degrees=function(t){return 180*t/Math.PI},t.random=function(t,e){if(0===arguments.length?(e=1,t=0):1===arguments.length&&(e=t,t=0),t===e)return t;for(let s=0;s<100;s++){const s=n()*(e-t)+t;if(s!==e)return s}return t},s.createRandomized=function(){const t=new Date;return new s(t/6e4&4294967295,4294967295&t)},t.randomSeed=function(t){n=new s(t,(t<<16)+(t>>16)).doubleGenerator,this.haveNextNextGaussian=!1},t.randomGaussian=function(){if(this.haveNextNextGaussian)return this.haveNextNextGaussian=!1,this.nextNextGaussian;let t,e,s;do{s=(t=2*n()-1)*t+(e=2*n()-1)*e}while(s>=1||0===s);const i=Math.sqrt(-2*Math.log(s)/s);return this.nextNextGaussian=e*i,this.haveNextNextGaussian=!0,t*i};const r={generator:e,octaves:4,fallout:.5,seed:e};t.noise=function(t,n,s){r.generator===e&&(r.generator=new i(r.seed));const o=r.generator;let a=1,l=1,h=0;for(let e=0;e<r.octaves;++e){switch(a*=r.fallout,arguments.length){case 1:h+=a*(1+o.noise1d(l*t))/2;break;case 2:h+=a*(1+o.noise2d(l*t,l*n))/2;break;case 3:h+=a*(1+o.noise3d(l*t,l*n,l*s))/2}l*=2}return h},t.noiseDetail=function(t,n){r.octaves=t,n!==e&&(r.fallout=n)},t.noiseSeed=function(t){r.seed=t,r.generator=e}}},{}],24:[function(t,e,n){var s,i;e.exports=i={trim:function(t){if(t instanceof Array){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""));return e}return t.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")},radians:function(t){return t/180*Math.PI},nfCoreScalar:function(t,e,n,i,r,o){const a=t<0?n:e,l=0===r;let h=r===s||r<0?0:r,u=Math.abs(t);if(l)for(h=1,u*=10;Math.abs(Math.round(u)-u)>1e-6&&h<7;)++h,u*=10;else 0!==h&&(u*=Math.pow(10,h));let c,f=2*u;if(Math.floor(u)===u)c=u;else if(Math.floor(f)===f){const t=Math.floor(u);c=t+t%2}else c=Math.round(u);let p="",m=i+h;for(;m>0||c>0;)m--,p=""+c%10+p,c=Math.floor(c/10);if(o!==s){let t=p.length-3-h;for(;t>0;)p=p.substring(0,t)+o+p.substring(t),t-=3}return h>0?a+p.substring(0,p.length-h)+"."+p.substring(p.length-h,p.length):a+p},nfCore:function(t,e,n,s,r,o){if(t instanceof Array){const a=[];for(let l=0,h=t.length;l<h;l++)a.push(i.nfCoreScalar(t[l],e,n,s,r,o));return a}return i.nfCoreScalar(t,e,n,s,r,o)},nf:function(t,e,n){return i.nfCore(t,"","-",e,n)},nfs:function(t,e,n){return i.nfCore(t," ","-",e,n)},nfp:function(t,e,n){return i.nfCore(t,"+","-",e,n)},nfc:function(t,e){return i.nfCore(t,"","-",0,e,",")},withCommonFunctions:function(t){["trim","radians","nf","nfs","nfp","nfc"].forEach(function(e){t[e]=i[e]})}}},{}],25:[function(t,e,n){e.exports=function(t,e,n,s,i,r,o){const a=["mouseout","mousemove","mousedown","mouseup","DOMMouseScroll","mousewheel","touchstart"];function l(e,n){let s,r,o,a,l=e,h=0,u=0;if(t.pmouseX=t.mouseX,t.pmouseY=t.mouseY,l.offsetParent)do{h+=l.offsetLeft,u+=l.offsetTop}while(l=l.offsetParent);l=e;do{h-=l.scrollLeft||0,u-=l.scrollTop||0}while(l=l.parentNode);return i.defaultView&&i.defaultView.getComputedStyle&&(s=parseInt(i.defaultView.getComputedStyle(e,null).paddingLeft,10)||0,r=parseInt(i.defaultView.getComputedStyle(e,null).paddingTop,10)||0,o=parseInt(i.defaultView.getComputedStyle(e,null).borderLeftWidth,10)||0,a=parseInt(i.defaultView.getComputedStyle(e,null).borderTopWidth,10)||0),h+=s,u+=r,h+=o,u+=a,{X:h+=window.pageXOffset,Y:u+=window.pageYOffset}}function h(e,n){const s=l(e);t.mouseX=n.pageX-s.X,t.mouseY=n.pageY-s.Y}function u(t){let e,n=l(t.changedTouches[0].target,t.changedTouches[0]);for(e=0;e<t.touches.length;e++){const s=t.touches[e];s.offsetX=s.pageX-n.X,s.offsetY=s.pageY-n.Y}for(e=0;e<t.targetTouches.length;e++){const s=t.targetTouches[e];s.offsetX=s.pageX-n.X,s.offsetY=s.pageY-n.Y}for(e=0;e<t.changedTouches.length;e++){const s=t.changedTouches[e];s.offsetX=s.pageX-n.X,s.offsetY=s.pageY-n.Y}return t}n(e,"touchstart",function(i){e.setAttribute("style","-webkit-user-select: none"),e.setAttribute("onclick","void(0)"),e.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)"),s(e,a),t.touchStart!==o||t.touchMove!==o||t.touchEnd!==o||t.touchCancel!==o?(n(e,"touchstart",function(e){t.touchStart!==o&&(e=u(e),t.touchStart(e))}),n(e,"touchmove",function(e){t.touchMove!==o&&(e.preventDefault(),e=u(e),t.touchMove(e))}),n(e,"touchend",function(e){t.touchEnd!==o&&(e=u(e),t.touchEnd(e))}),n(e,"touchcancel",function(e){t.touchCancel!==o&&(e=u(e),t.touchCancel(e))})):(n(e,"touchstart",function(n){h(e,n.touches[0]),t.__mousePressed=!0,t.mouseDragging=!1,t.mouseButton=r.LEFT,"function"==typeof t.mousePressed&&t.mousePressed()}),n(e,"touchmove",function(n){n.preventDefault(),h(e,n.touches[0]),"function"!=typeof t.mouseMoved||t.__mousePressed||t.mouseMoved(),"function"==typeof t.mouseDragged&&t.__mousePressed&&(t.mouseDragged(),t.mouseDragging=!0)}),n(e,"touchend",function(e){t.__mousePressed=!1,"function"!=typeof t.mouseClicked||t.mouseDragging||t.mouseClicked(),"function"==typeof t.mouseReleased&&t.mouseReleased()}))}),function(){let s=!0,i=function(t){t.preventDefault(),t.stopPropagation()};t.disableContextMenu=function(){s&&(n(e,"contextmenu",i),s=!1)},t.enableContextMenu=function(){s||(detachEventHandler({elem:e,type:"contextmenu",fn:i}),s=!0)}}(),n(e,"mousemove",function(n){h(e,n),"function"!=typeof t.mouseMoved||t.__mousePressed||t.mouseMoved(),"function"==typeof t.mouseDragged&&t.__mousePressed&&(t.mouseDragged(),t.mouseDragging=!0)}),n(e,"mouseout",function(e){"function"==typeof t.mouseOut&&t.mouseOut()}),n(e,"mouseover",function(n){h(e,n),"function"==typeof t.mouseOver&&t.mouseOver()}),e.onmousedown=function(){return e.focus(),!1},n(e,"mousedown",function(e){switch(t.__mousePressed=!0,t.mouseDragging=!1,e.which){case 1:t.mouseButton=r.LEFT;break;case 2:t.mouseButton=r.CENTER;break;case 3:t.mouseButton=r.RIGHT}"function"==typeof t.mousePressed&&t.mousePressed()}),n(e,"mouseup",function(e){t.__mousePressed=!1,"function"!=typeof t.mouseClicked||t.mouseDragging||t.mouseClicked(),"function"==typeof t.mouseReleased&&t.mouseReleased()});const c=function(n){if(n.target!==e)return;let s=0;n.wheelDelta?(s=n.wheelDelta/120,window.opera&&(s=-s)):n.detail&&(s=-n.detail/3),t.mouseScroll=s,s&&"function"==typeof t.mouseScrolled&&(n.stopPropagation(),n.preventDefault(),t.mouseScrolled())};n(i,"DOMMouseScroll",c),n(i,"mousewheel",c)}},{}],26:[function(t,e,n){e.exports=function(e,n){let s,i=n.defaultScope,r=i.PConstants,o=n.aFunctions,a=n.Browser.document;function l(t){const n=function(){const t=["abs","acos","alpha","ambient","ambientLight","append","applyMatrix","arc","arrayCopy","asin","atan","atan2","background","beginCamera","beginDraw","beginShape","bezier","bezierDetail","bezierPoint","bezierTangent","bezierVertex","binary","blend","blendColor","blit_resize","blue","box","breakShape","brightness","camera","ceil","Character","color","colorMode","concat","constrain","copy","cos","createFont","createGraphics","createImage","cursor","curve","curveDetail","curvePoint","curveTangent","curveTightness","curveVertex","day","degrees","directionalLight","disableContextMenu","dist","draw","ellipse","ellipseMode","emissive","enableContextMenu","endCamera","endDraw","endShape","exit","exp","expand","externals","fill","filter","floor","focused","frameCount","frameRate","frustum","get","glyphLook","glyphTable","green","height","hex","hint","hour","hue","image","imageMode","intersect","join","key","keyCode","keyPressed","keyReleased","keyTyped","lerp","lerpColor","lightFalloff","lights","lightSpecular","line","link","loadBytes","loadFont","loadGlyphs","loadImage","loadPixels","loadShape","loadXML","loadStrings","log","loop","mag","map","match","matchAll","max","millis","min","minute","mix","modelX","modelY","modelZ","modes","month","mouseButton","mouseClicked","mouseDragged","mouseMoved","mouseOut","mouseOver","mousePressed","mouseReleased","mouseScroll","mouseScrolled","mouseX","mouseY","name","nf","nfc","nfp","nfs","noCursor","noFill","noise","noiseDetail","noiseSeed","noLights","noLoop","norm","normal","noSmooth","noStroke","noTint","ortho","param","parseBoolean","parseByte","parseChar","parseFloat","parseInt","parseXML","peg","perspective","PImage","pixels","PMatrix2D","PMatrix3D","PMatrixStack","pmouseX","pmouseY","point","pointLight","popMatrix","popStyle","pow","print","printCamera","println","printMatrix","printProjection","PShape","PShapeSVG","pushMatrix","pushStyle","quad","radians","random","randomGaussian","randomSeed","rect","rectMode","red","redraw","requestImage","resetMatrix","reverse","rotate","rotateX","rotateY","rotateZ","round","saturation","save","saveFrame","saveStrings","scale","screenX","screenY","screenZ","second","set","setup","shape","shapeMode","shared","shearX","shearY","shininess","shorten","sin","size","smooth","sort","specular","sphere","sphereDetail","splice","split","splitTokens","spotLight","sq","sqrt","status","str","stroke","strokeCap","strokeJoin","strokeWeight","subset","tan","text","textAlign","textAscent","textDescent","textFont","textLeading","textMode","textSize","texture","textureMode","textWidth","tint","toImageData","touchCancel","touchEnd","touchMove","touchStart","translate","transform","triangle","trim","unbinary","unhex","updatePixels","use3DContext","vertex","width","XMLElement","XML","year","__contains","__equals","__equalsIgnoreCase","__frameRate","__hashCode","__int_cast","__instanceof","__keyPressed","__mousePressed","__printStackTrace","__replace","__replaceAll","__replaceFirst","__toCharArray","__split","__codePointAt","__startsWith","__endsWith","__matches"];o&&Object.keys(o).forEach(function(e){t.push(e)});const n={};let s,i;for(s=0,i=t.length;s<i;++s)n[t[s]]=null;for(const t in e.lib)if(e.lib.hasOwnProperty(t)&&e.lib[t].exports){const r=e.lib[t].exports;for(s=0,i=r.length;s<i;++s)n[r[s]]=null}return n}();function a(t){let e,n=/^\s*/.exec(t);if(n[0].length===t.length)e={left:n[0],middle:"",right:""};else{const s=/\s*$/.exec(t);e={left:n[0],middle:t.substring(n[0].length,s.index),right:s[0]}}return e.untrim=function(t){return this.left+t+this.right},e}function l(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function h(t,e){for(let n=0,s=e.length;n<s;++n)t[e[n]]=null;return t}function u(t){return t.substring(2,t.length-1)}const c=t.replace(/\r\n?|\n\r/g,"\n"),f=[];let p,m=c.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,function(t,e,n,s,i,r,o,a){let l;return e||n?(l=f.length,f.push(t),"'"+l+"'"):s?(l=f.length,f.push(r),i+"'"+l+"'"):""!==a?" ":"\n"}),g=m=(m=(m=m.replace(/__x([0-9A-F]{4})/g,function(t,e){return"__x005F_x"+e})).replace(/\$/g,"__x0024")).replace(/return\s*[\n\r]+/g,"return ");const d=function(t,e,n,s){return e||s?t:(p=!0,"")};do{p=!1,g=g.replace(/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g,d)}while(p);const y=function(t){const e=[],n=t.split(/([\{\[\(\)\]\}])/);let s=n[0];const i=[];for(let t=1;t<n.length;t+=2){const r=n[t];if("["===r||"{"===r||"("===r)i.push(s),s=r;else if("]"===r||"}"===r||")"===r){const t="}"===r?"A":")"===r?"B":"C",n=e.length;e.push(s+r),s=i.pop()+'"'+t+(n+1)+'"'}s+=n[t+1]}return e.unshift(s),e}(g);let b,A,x,w,E,v,S,P,C={},T=0;function M(t,e){const n=y.length;return y.push(t),'"'+e+n+'"'}function _(){return"class"+ ++T}function R(t,e,n){t.classId=e,t.scopeId=n,C[e]=t}const L=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g,I=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g,D=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/,O=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g,N=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/,F=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g;function k(t){let e=t;return e=(e=(e=e.replace(L,function(t){return M(t,"E")})).replace(I,function(t){return M(t,"D")})).replace(F,function(t){return M(t,"H")})}function B(t,e){return t.replace(O,function(t,n,s,i,r,o){return s!==e?t:M(t,"G")})}function $(t){this.name=t}function G(t,e){this.params=t,this.methodArgsParam=e}function V(t){const e=l(t.substring(1,t.length-1));let n=[],s=null;if(""!==e){const t=e.split(",");for(let e=0;e<t.length;++e){const i=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(t[e]);if(e===t.length-1&&t[e].indexOf("...")>=0){s=new $(i[1]);break}n.push(new $(i[1]))}}return new G(n,s)}function z(t,e){this.baseInterfaceName=t,this.body=e,e.owner=this}function U(t,e,n){this.name=t,this.params=e,this.body=n}function H(t){const e=new RegExp(/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/).exec(t);return new U("function"!==e[1]?e[1]:null,V(y[e[2]]),E(y[e[3]]))}function X(t){this.members=t}function j(t){if("("===t.charAt(0)||"["===t.charAt(0))return t.charAt(0)+j(t.substring(1,t.length-1))+t.charAt(t.length-1);if("{"===t.charAt(0))return/^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(t)?"{"+M(t.substring(1,t.length-1),"I")+"}":"["+j(t.substring(1,t.length-1))+"]";const e=a(t);let n=function(t){let e,n=t;function s(t,n,s,i){const r=y[i];e=!0;const o=a(r.substring(1,r.length-1));return"__"+s+(""===o.middle?M("("+n.replace(/\.\s*$/,"")+")","B"):M("("+n.replace(/\.\s*$/,"")+","+o.middle+")","B"))}n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g,function(t,e,n){return n})).replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g,function(t,e,n){return M(t,"F")})).replace(F,function(t){return M(t,"H")})).replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g,function(t,e,n){const s=n.replace(/"C(\d+)"/g,function(t,e){return y[e]}).replace(/\[\s*\]/g,"[null]").replace(/\s*\]\s*\[\s*/g,", "),i="('"+e+"', "+M("{"+s.substring(1,s.length-1)+"}","A")+")";return"$p.createJavaArray"+M(i,"B")})).replace(/(\.\s*length)\s*"B\d+"/g,"$1")).replace(/#([0-9A-Fa-f]{6})\b/g,function(t,e){return"0xFF"+e})).replace(/"B(\d+)"(\s*(?:[\w$']|"B))/g,function(t,e,n){const s=y[e];if(!/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/.test(s))return t;if(/^\(\s*int\s*\)$/.test(s))return"(int)"+n;const i=s.split(/"C(\d+)"/g);return i.length>1&&!/^\[\s*\]$/.test(y[i[1]])?t:""+n})).replace(/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g,function(t,e){const n=a(e);return n.untrim("__int_cast("+n.middle+")")})).replace(/\bsuper(\s*"B\d+")/g,"$$superCstr$1").replace(/\bsuper(\s*\.)/g,"$$super$1")).replace(/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/,function(t,e,n){return e===n?t:""===n?"0"+e:e})).replace(/\b(\.?\d+\.?)[fF]\b/g,"$1")).replace(/([^\s])%([^=\s])/g,"$1 % $2")).replace(/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g,"__$1")).replace(/\b(boolean|byte|char|float|int)\s*"B/g,function(t,e){return"parse"+e.substring(0,1).toUpperCase()+e.substring(1)+'"B'})).replace(/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g,function(t,e,n,s,i,r){if(n){const t=y[s];return i?"pixels.setPixel"+M("("+t.substring(1,t.length-1)+","+r+")","B"):"pixels.getPixel"+M("("+t.substring(1,t.length-1)+")","B")}return e?"pixels.getLength"+M("()","B"):i?"pixels.set"+M("("+r+")","B"):"pixels.toArray"+M("()","B")});do{e=!1,n=n.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\s*"B(\d+)"/g,s)}while(e);function i(t,n,s){return e=!0,"__instanceof"+M("("+n+", "+s+")","B")}do{e=!1,n=n.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g,i)}while(e);return n=n.replace(/\bthis(\s*"B\d+")/g,"$$constr$1")}(e.middle);return n=n.replace(/"[ABC](\d+)"/g,function(t,e){return j(y[e])}),e.untrim(n)}function Y(t,e){this.expr=t,this.transforms=e}function K(t,e,n){this.name=t,this.value=e,this.isDefault=n}function W(t,e){const n=t.indexOf("=");let s,i,r;return n<0?(s=t,i=e,r=!0):(s=t.substring(0,n),i=P(t.substring(n+1)),r=!1),new K(l(s.replace(/(\s*"C\d+")+/g,"")),i,r)}function Z(t){return"int"===t||"float"===t?"0":"boolean"===t?"false":"color"===t?"0x00000000":"null"}function q(t,e){this.definitions=t,this.varType=e}function Q(t){this.expression=t}function J(t){if(D.test(t)){const e=N.exec(t),n=t.substring(e[0].length).split(","),s=Z(e[2]);for(let t=0;t<n.length;++t)n[t]=W(n[t],s);return new q(n,e[2])}return new Q(P(t))}function tt(t,e,n){this.initStatement=t,this.condition=e,this.step=n}function et(t,e){this.initStatement=t,this.container=e}function nt(t,e){this.initStatement=t,this.container=e}function st(t){let e;return/\bin\b/.test(t)?new et(J(l((e=t.substring(1,t.length-1).split(/\bin\b/g))[0])),P(e[1])):t.indexOf(":")>=0&&t.indexOf(";")<0?new nt(J(l((e=t.substring(1,t.length-1).split(":"))[0])),P(e[1])):new tt(J(l((e=t.substring(1,t.length-1).split(";"))[0])),P(e[1]),P(e[2]))}function it(t){t.sort(function(t,e){return e.weight-t.weight})}function rt(t,e,n){this.name=t,this.body=e,this.isStatic=n,e.owner=this}function ot(t,e,n){this.name=t,this.body=e,this.isStatic=n,e.owner=this}function at(t){const e=L.exec(t);L.lastIndex=0;const n=e[1].indexOf("static")>=0;let s,i=y[u(e[6])];const r=A,o=_();return A=o,R(s="interface"===e[2]?new rt(e[3],w(i,e[3],e[4]),n):new ot(e[3],x(i,e[3],e[4],e[5]),n),o,r),A=r,s}function lt(t,e,n,s){this.name=t,this.params=e,this.body=n,this.isStatic=s}function ht(t){const e=I.exec(t);I.lastIndex=0;const n=e[1].indexOf("static")>=0,s=";"!==e[6]?y[u(e[6])]:"{}";return new lt(e[3],V(y[u(e[4])]),E(s),n)}function ut(t,e,n){this.definitions=t,this.fieldType=e,this.isStatic=n}function ct(t){const e=N.exec(t),n=e[1].indexOf("static")>=0,s=t.substring(e[0].length).split(/,\s*/g),i=Z(e[2]);for(let t=0;t<s.length;++t)s[t]=W(s[t],i);return new ut(s,e[2],n)}function ft(t,e){this.params=t,this.body=e}function pt(t){const e=new RegExp(/"B(\d+)"\s*"A(\d+)"/).exec(t);return new ft(V(y[e[1]]),E(y[e[2]]))}function mt(t,e,n,s,i,r){let o,a;for(this.name=t,this.interfacesNames=e,this.methodsNames=n,this.fields=s,this.innerClasses=i,this.misc=r,o=0,a=s.length;o<a;++o)s[o].owner=this}function gt(t,e,n,s,i,r,o,a,l){let h,u;for(this.name=t,this.baseClassName=e,this.interfacesNames=n,this.functions=s,this.methods=i,this.fields=r,this.cstrs=o,this.innerClasses=a,this.misc=l,h=0,u=r.length;h<u;++h)r[h].owner=this}function dt(t,e){this.name=t,this.body=e,e.owner=this}function yt(t,e){this.name=t,this.body=e,e.owner=this}function bt(t){const e=L.exec(t);L.lastIndex=0;const n=y[u(e[6])],s=A,i=_();let r;return A=i,R(r="interface"===e[2]?new dt(e[3],w(n,e[3],e[4])):new yt(e[3],x(n,e[3],e[4],e[5])),i,s),A=s,r}function At(t,e,n){this.name=t,this.params=e,this.body=n}function xt(t){const e=I.exec(t);I.lastIndex=0;return new At(e[3],V(y[u(e[4])]),E(y[u(e[6])]))}function wt(t,e){this.argument=t,this.misc=e}function Et(t,e){this.argument=t,this.misc=e}function vt(t,e,n){this.name=t,this.argument=e,this.misc=n}function St(t){this.expr=t}function Pt(t){this.label=t}function Ct(t){let e=[];for(let n=0,s=t.length;n<s;++n){const s=t[n];s instanceof q?e=e.concat(s.getNames()):s instanceof wt&&s.argument.initStatement instanceof q?e=e.concat(s.argument.initStatement.getNames()):(s instanceof rt||s instanceof ot||s instanceof dt||s instanceof yt||s instanceof At||s instanceof U)&&e.push(s.name)}return h({},e)}function Tt(t){this.statements=t}function Mt(t){this.statements=t}$.prototype.toString=function(){return this.name},G.prototype.getNames=function(){const t=[];for(let e=0,n=this.params.length;e<n;++e)t.push(this.params[e].name);return t},G.prototype.prependMethodArgs=function(t){return this.methodArgsParam?"{\nvar "+this.methodArgsParam.name+" = Array.prototype.slice.call(arguments, "+this.params.length+");\n"+t.substring(1):t},G.prototype.toString=function(){if(0===this.params.length)return"()";let t="(";for(let e=0,n=this.params.length;e<n;++e)t+=this.params[e]+", ";return t.substring(0,t.length-2)+")"},z.prototype.toString=function(){return"new ("+this.body+")"},U.prototype.toString=function(){const t=b,e=h({this:null},this.params.getNames());b=function(n){return e.hasOwnProperty(n.name)?n.name:t(n)};let n="function";this.name&&(n+=" "+this.name);const s=this.params.prependMethodArgs(this.body.toString());return n+=this.params+" "+s,b=t,n},X.prototype.toString=function(){const t=b;b=function(e){return"this"===e.name?"this":t(e)};let e="";for(let t=0,n=this.members.length;t<n;++t)this.members[t].label&&(e+=this.members[t].label+": "),e+=this.members[t].value.toString()+", ";return b=t,e.substring(0,e.length-2)},Y.prototype.toString=function(){const t=this.transforms;return function(t){return t.replace(/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g,function(t,e,n,i,r,o){return e?t:b({name:n,member:r,callSign:!!o})+(i===s?"":i)})}(this.expr).replace(/"!(\d+)"/g,function(e,n){return t[n].toString()})},P=function(t){const e=[];let n=j(t);return new Y(n=(n=(n=n.replace(/"H(\d+)"/g,function(t,n){return e.push(H(y[n])),'"!'+(e.length-1)+'"'})).replace(/"F(\d+)"/g,function(t,n){return e.push(function(t){const e=new RegExp(/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/).exec(t),n=A,s=_();A=s;const i=e[1]+"$"+s,r=new z(i,x(y[e[2]],i,"","implements "+e[1]));return R(r,s,n),A=n,r}(y[n])),'"!'+(e.length-1)+'"'})).replace(/"I(\d+)"/g,function(t,n){return e.push(function(t){const e=t.split(",");for(let t=0;t<e.length;++t){const n=e[t].indexOf(":");e[t]=n<0?{value:P(e[t])}:{label:l(e[t].substring(0,n)),value:P(l(e[t].substring(n+1)))}}return new X(e)}(y[n])),'"!'+(e.length-1)+'"'}),e)},K.prototype.toString=function(){return this.name+" = "+this.value},q.prototype.getNames=function(){const t=[];for(let e=0,n=this.definitions.length;e<n;++e)t.push(this.definitions[e].name);return t},q.prototype.toString=function(){return"var "+this.definitions.join(",")},Q.prototype.toString=function(){return this.expression.toString()},tt.prototype.toString=function(){return"("+this.initStatement+"; "+this.condition+"; "+this.step+")"},et.prototype.toString=function(){let t=this.initStatement.toString();return t.indexOf("=")>=0&&(t=t.substring(0,t.indexOf("="))),"("+t+" in "+this.container+")"},nt.iteratorId=0,nt.prototype.toString=function(){const t=this.initStatement.toString(),e="$it"+nt.iteratorId++,n=t.replace(/^\s*var\s*/,"").split("=")[0];return"("+("var "+e+" = new $p.ObjectIterator("+this.container+"), "+n+" = void(0)")+"; "+(e+".hasNext() && (("+n+" = "+e+".next()) || true)")+";)"},rt.prototype.toString=function(){return""+this.body},ot.prototype.toString=function(){return""+this.body},lt.prototype.toString=function(){const t=h({},this.params.getNames()),e=b;b=function(n){return t.hasOwnProperty(n.name)?n.name:e(n)};const n=this.params.prependMethodArgs(this.body.toString()),s="function "+this.methodId+this.params+" "+n+"\n";return b=e,s},ut.prototype.getNames=function(){const t=[];for(let e=0,n=this.definitions.length;e<n;++e)t.push(this.definitions[e].name);return t},ut.prototype.toString=function(){const t=b({name:"[this]"});if(this.isStatic){const e=this.owner.name,n=[];for(let s=0,i=this.definitions.length;s<i;++s){const i=this.definitions[s],r=i.name,o=e+"."+r,a="if("+o+" === void(0)) {\n "+o+" = "+i.value+"; }\n$p.defineProperty("+t+", '"+r+"', { get: function(){return "+o+";}, set: function(val){"+o+" = val;} });\n";n.push(a)}return n.join("")}return t+"."+this.definitions.join("; "+t+".")},ft.prototype.toString=function(){const t=h({},this.params.getNames()),e=b;b=function(n){return t.hasOwnProperty(n.name)?n.name:e(n)};const n="function $constr_"+this.params.params.length+this.params.toString();let s=this.params.prependMethodArgs(this.body.toString());return/\$(superCstr|constr)\b/.test(s)||(s="{\n$superCstr();\n"+s.substring(1)),b=e,n+s+"\n"},mt.prototype.getMembers=function(t,e,n){let s,i,r,o;for(this.owner.base&&this.owner.base.body.getMembers(t,e,n),s=0,r=this.fields.length;s<r;++s){const e=this.fields[s].getNames();for(i=0,o=e.length;i<o;++i)t[e[i]]=this.fields[s]}for(s=0,r=this.methodsNames.length;s<r;++s){e[this.methodsNames[s]]=!0}for(s=0,r=this.innerClasses.length;s<r;++s){const t=this.innerClasses[s];n[t.name]=t}},mt.prototype.toString=function(){!function(t){let e=0;for(;t;)++e,t=t.scope}(this.owner);const t=this.name;let e="",n="";let s,i;if(this.getMembers({},{},{}),this.owner.interfaces){let r,o=[];for(s=0,i=this.interfacesNames.length;s<i;++s)this.owner.interfaces[s]&&(r=b({name:this.interfacesNames[s]}),o.push(r),e+="$p.extendInterfaceMembers("+t+", "+r+");\n");n+=t+".$interfaces = ["+o.join(", ")+"];\n"}for(n+=t+".$isInterface = true;\n",n+=t+".$methods = ['"+this.methodsNames.join("', '")+"'];\n",it(this.innerClasses),s=0,i=this.innerClasses.length;s<i;++s){const n=this.innerClasses[s];n.isStatic&&(e+=t+"."+n.name+" = "+n+";\n")}for(s=0,i=this.fields.length;s<i;++s){const n=this.fields[s];n.isStatic&&(e+=t+"."+n.definitions.join(";\n"+t+".")+";\n")}return"(function() {\nfunction "+t+"() { throw 'Unable to create the interface'; }\n"+e+n+"return "+t+";\n})()"},w=function(t,e,n){let i=t.substring(1,t.length-1);i=B(i=k(i),e);const r=[],o=[],l=(i=i.replace(/"([DE])(\d+)"/g,function(t,e,n){return"D"===e?r.push(n):"E"===e&&o.push(n),""})).split(/;(?:\s*;)*/g);let h,u,c;for(n!==s&&(h=n.replace(/^\s*extends\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),u=0,c=r.length;u<c;++u){const t=ht(y[r[u]]);r[u]=t.name}for(u=0,c=l.length-1;u<c;++u){const t=a(l[u]);l[u]=ct(t.middle)}const f=l.pop();for(u=0,c=o.length;u<c;++u)o[u]=at(y[o[u]]);return new mt(e,h,r,l,o,{tail:f})},gt.prototype.getMembers=function(t,e,n){let s,i,r,o;for(this.owner.base&&this.owner.base.body.getMembers(t,e,n),s=0,r=this.fields.length;s<r;++s){const e=this.fields[s].getNames();for(i=0,o=e.length;i<o;++i)t[e[i]]=this.fields[s]}for(s=0,r=this.methods.length;s<r;++s){const t=this.methods[s];e[t.name]=t}for(s=0,r=this.innerClasses.length;s<r;++s){const t=this.innerClasses[s];n[t.name]=t}},gt.prototype.toString=function(){const t="$this_"+function(t){let e=0;for(;t;)++e,t=t.scope;return e}(this.owner),e=this.name;let n="var "+t+" = this;\n",s="",i="";const r={},o={},a={};this.getMembers(r,o,a);const h=b;let u,c,f,p,m;if(b=function(n){const s=n.name;return"this"===s?n.callSign||!n.member?t+".$self":t:r.hasOwnProperty(s)?r[s].isStatic?e+"."+s:t+"."+s:a.hasOwnProperty(s)?t+"."+s:o.hasOwnProperty(s)?o[s].isStatic?e+"."+s:t+".$self."+s:h(n)},this.baseClassName?(u=h({name:this.baseClassName}),n+="var $super = { $upcast: "+t+" };\n",n+="function $superCstr(){"+u+".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\n",i+=e+".$base = "+u+";\n"):n+="function $superCstr(){$p.extendClassChain("+t+")}\n",this.owner.base&&(s+="$p.extendStaticMembers("+e+", "+u+");\n"),this.owner.interfaces){let t,n=[];for(c=0,f=this.interfacesNames.length;c<f;++c)this.owner.interfaces[c]&&(t=h({name:this.interfacesNames[c]}),n.push(t),s+="$p.extendInterfaceMembers("+e+", "+t+");\n");i+=e+".$interfaces = ["+n.join(", ")+"];\n"}for(this.functions.length>0&&(n+=this.functions.join("\n")+"\n"),it(this.innerClasses),c=0,f=this.innerClasses.length;c<f;++c){const i=this.innerClasses[c];i.isStatic?(s+=e+"."+i.name+" = "+i+";\n",n+=t+"."+i.name+" = "+e+"."+i.name+";\n"):n+=t+"."+i.name+" = "+i+";\n"}for(c=0,f=this.fields.length;c<f;++c){const i=this.fields[c];if(i.isStatic)for(s+=e+"."+i.definitions.join(";\n"+e+".")+";\n",p=0,m=i.definitions.length;p<m;++p){const s=i.definitions[p].name,r=e+"."+s;n+="$p.defineProperty("+t+", '"+s+"', {get: function(){return "+r+"}, set: function(val){"+r+" = val}});\n"}else n+=t+"."+i.definitions.join(";\n"+t+".")+";\n"}const g={};for(c=0,f=this.methods.length;c<f;++c){const i=this.methods[c];let r=g[i.name],o=i.name+"$"+i.params.params.length;const a=!!i.params.methodArgsParam;r?o+="_"+ ++r:r=1,i.methodId=o,g[i.name]=r,i.isStatic?(s+=i,s+="$p.addMethod("+e+", '"+i.name+"', "+o+", "+a+");\n",n+="$p.addMethod("+t+", '"+i.name+"', "+o+", "+a+");\n"):(n+=i,n+="$p.addMethod("+t+", '"+i.name+"', "+o+", "+a+");\n")}n+=l(this.misc.tail),this.cstrs.length>0&&(n+=this.cstrs.join("\n")+"\n"),n+="function $constr() {\n";const d=[];for(c=0,f=this.cstrs.length;c<f;++c){const e=this.cstrs[c].params.params.length,n=!!this.cstrs[c].params.methodArgsParam;d.push("if(arguments.length "+(n?">=":"===")+" "+e+") { $constr_"+e+".apply("+t+", arguments); }")}return d.length>0&&(n+=d.join(" else ")+" else "),n+="$superCstr();\n}\n",b=h,"(function() {\nfunction "+e+"() {\n"+(n+="$constr.apply(null, arguments);\n")+"}\n"+s+i+"return "+e+";\n})()"},x=function(t,e,n,i){let r=t.substring(1,t.length-1);r=B(r=k(r),e);const o=[],l=[],h=[],u=[],c=(r=r.replace(/"([DEGH])(\d+)"/g,function(t,e,n){return"D"===e?o.push(n):"E"===e?l.push(n):"H"===e?u.push(n):h.push(n),""})).replace(/^(?:\s*;)+/,"").split(/;(?:\s*;)*/g);let f,p,m;for(n!==s&&(f=n.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,"$1")),i!==s&&(p=i.replace(/^\s*implements\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),m=0;m<u.length;++m)u[m]=H(y[u[m]]);for(m=0;m<o.length;++m)o[m]=ht(y[o[m]]);for(m=0;m<c.length-1;++m){const t=a(c[m]);c[m]=ct(t.middle)}const g=c.pop();for(m=0;m<h.length;++m)h[m]=pt(y[h[m]]);for(m=0;m<l.length;++m)l[m]=at(y[l[m]]);return new gt(e,f,p,u,o,c,h,l,{tail:g})},dt.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"},yt.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"},At.prototype.toString=function(){const t=h({},this.params.getNames()),e=b;b=function(n){return t.hasOwnProperty(n.name)?n.name:e(n)};const n=this.params.prependMethodArgs(this.body.toString()),s="function "+this.name+this.params+" "+n+"\n$p."+this.name+" = "+this.name+";\n"+this.name+" = "+this.name+".bind($p);";return b=e,s},wt.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},Et.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},vt.prototype.toString=function(){let t=this.misc.prefix;return this.argument!==s&&(t+=this.argument.toString()),t},St.prototype.toString=function(){return"case "+this.expr+":"},Pt.prototype.toString=function(){return this.label},v=function(t,e,n){const i=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g),r=[];t=function(t){let e=t;return e=e.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,"$1")}(t);let o,h,u=0;for(;null!==(o=i.exec(t));){if(o[1]!==s){const e=t.lastIndexOf('"B',i.lastIndex),n=t.substring(u,e);"for"===o[1]?r.push(new wt(st(y[o[2]]),{prefix:n})):"catch"===o[1]?r.push(new Et(V(y[o[2]]),{prefix:n})):r.push(new vt(o[1],P(y[o[2]]),{prefix:n}))}else if(o[3]!==s)r.push(new vt(o[3],s,{prefix:t.substring(u,i.lastIndex)}));else if(o[4]!==s){if(0!==l(h=t.substring(u,i.lastIndex-o[4].length)).length)continue;r.push(h);const s=o[4].charAt(1),a=o[5];"D"===s?r.push(e(y[a])):"E"===s?r.push(n(y[a])):"H"===s?r.push(H(y[a])):r.push(E(y[a]))}else if(o[6]!==s)r.push(new St(P(l(o[7]))));else if(o[8]!==s){if(0!==l(h=t.substring(u,i.lastIndex-o[8].length)).length)continue;r.push(new Pt(t.substring(u,i.lastIndex)))}else{const e=a(t.substring(u,i.lastIndex-1));r.push(e.left),r.push(J(e.middle)),r.push(e.right+";")}u=i.lastIndex}const c=a(t.substring(u));return r.push(c.left),""!==c.middle&&(r.push(J(c.middle)),r.push(";"+c.right)),r},Tt.prototype.toString=function(){const t=Ct(this.statements),e=b;(function(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0})(t)||(b=function(n){return t.hasOwnProperty(n.name)?n.name:e(n)});const n="{\n"+this.statements.join("")+"\n}";return b=e,n},E=function(t){const e=a(t.substring(1,t.length-1));return new Tt(v(e.middle))},Mt.prototype.toString=function(){let t,e=[],s=[];for(let n=0,i=this.statements.length;n<i;++n)(t=this.statements[n])instanceof yt||t instanceof dt?e.push(t):s.push(t);it(e);const o=Ct(this.statements);b=function(t){const e=t.name;return o.hasOwnProperty(e)?e:n.hasOwnProperty(e)||r.hasOwnProperty(e)||i.hasOwnProperty(e)?"$p."+e:e};const a="// this code was autogenerated from PJS\n(function($p) {\n"+e.join("")+"\n"+s.join("")+"\n})";return b=null,a};const _t=(S=function(){let t=k(y[0]);return t=t.replace(/\bimport\s+[^;]+;/g,""),new Mt(v(t,xt,bt))})();!function(t){const e={};let n,i;for(n in C)if(C.hasOwnProperty(n)){const t=(i=C[n]).scopeId,r=i.name;if(t){const e=C[t];i.scope=e,e.inScope===s&&(e.inScope={}),e.inScope[r]=i}else e[r]=i}function r(t,n){const i=n.split(".");let r,o=t.scope;for(;o;){if(o.hasOwnProperty(i[0])){r=o[i[0]];break}o=o.scope}r===s&&(r=e[i[0]]);for(let t=1,e=i.length;t<e&&r;++t)r=r.inScope[i[t]];return r}for(n in C)if(C.hasOwnProperty(n)){const t=(i=C[n]).body.baseClassName;if(t){const e=r(i,t);e&&(i.base=e,e.derived||(e.derived=[]),e.derived.push(i))}var o,a,l=i.body.interfacesNames,h=[];if(l&&l.length>0){for(o=0,a=l.length;o<a;++o){const t=r(i,l[o]);h.push(t),t&&(t.derived||(t.derived=[]),t.derived.push(i))}h.length>0&&(i.interfaces=h)}}}(),function(t){const e=[],n={};let s,i,r;for(s in C)if(C.hasOwnProperty(s))if((r=C[s]).inScope||r.derived){let t=[];if(r.inScope)for(i in r.inScope)r.inScope.hasOwnProperty(i)&&t.push(r.inScope[i]);r.derived&&(t=t.concat(r.derived)),n[s]=t}else e.push(s),r.weight=0;function o(t,e){const s=n[t];if(!s)return!1;const i=s.indexOf(e);return!(i<0||(s.splice(i,1),s.length>0||(delete n[t],0)))}for(;e.length>0;){var a,l;if(s=e.shift(),(r=C[s]).scopeId&&o(r.scopeId,r)&&(e.push(r.scopeId),C[r.scopeId].weight=r.weight+1),r.base&&o(r.base.classId,r)&&(e.push(r.base.classId),r.base.weight=r.weight+1),r.interfaces)for(a=0,l=r.interfaces.length;a<l;++a)r.interfaces[a]&&o(r.interfaces[a].classId,r)&&(e.push(r.interfaces[a].classId),r.interfaces[a].weight=r.weight+1)}}();let Rt=_t.toString();return function(t,e){return t.replace(/'(\d+)'/g,function(t,n){const s=e[n];return"/"===s.charAt(0)?s:/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(s)?"(new $p.Character("+s+"))":s})}(Rt=(Rt=Rt.replace(/\s*\n(?:[\t ]*\n)+/g,"\n\n")).replace(/__x([0-9A-F]{4})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}),f)}e.compile=function(t){const n=new e.Sketch,s=l(function(t,e){const n=new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g).exec(t);if(n&&2===n.length){const t=[],s=n.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(e,n){return t.push(n),"{"+(t.length-1)+"}"}).replace("\n","").replace("\r","").split(";"),i=function(t){return t.replace(/^\s*["']?/,"").replace(/["']?\s*$/,"")};for(let n=0,r=s.length;n<r;n++){const r=s[n].split("=");if(r&&2===r.length){let n=i(r[0]),s=i(r[1]),o=[];if("preload"===n)for(let t=0,n=(o=s.split(",")).length;t<n;t++){const n=i(o[t]);e.imageCache.add(n)}else if("font"===n)for(let e=0,n=(o=s.split(",")).length;e<n;e++){const n=i(o[e]),s=/^\{(\d*?)\}$/.exec(n);PFont.preloading.add(s?JSON.parse("{"+t[s[1]]+"}"):n)}else"pauseOnBlur"===n?e.options.pauseOnBlur="true"===s:"globalKeyEvents"===n?e.options.globalKeyEvents="true"===s:"param-"===n.substring(0,6)?e.params[n.substring(6)]=s:e.options[n]=s}}}return t}(t,n));return n.sourceCode=s,n};const h=t("../Helpers/PjsConsole");return e.logger=new h(a),e}},{"../Helpers/PjsConsole":5}],27:[function(t,e,n){e.exports=function(t,e){const n=t.defaultScope,s=t.extend,i=t.Browser,r=i.ajax,o=i.navigator,a=i.window,l=(a.XMLHttpRequest,i.document),h=t.noop,u=n.PConstants;PFont=n.PFont,PShapeSVG=n.PShapeSVG,PVector=n.PVector,Char=Character=n.Char,ObjectIterator=n.ObjectIterator,XMLElement=n.XMLElement,XML=n.XML;const c=a.HTMLCanvasElement,f=a.HTMLImageElement;let p;try{p=a.localStorage}catch(t){p={}}"document"in this&&this.document;l.head||(l.head=l.getElementsByTagName("head")[0]);const m=b("Float32Array","WebGLFloatArray"),g=b("Int32Array","WebGLIntArray"),d=b("Uint16Array","WebGLUnsignedShortArray"),y=b("Uint8Array","WebGLUnsignedByteArray");function b(t,e){return t in a?a[t]:"function"==typeof a[e]?a[e]:function(t){if(t instanceof Array)return t;if("number"==typeof t){const e=[];return e.length=t,e}}}if(l.documentMode>=9&&!l.doctype)throw"The doctype directive is missing. The recommended doctype in Internet Explorer is the HTML5 doctype: <!DOCTYPE html>";const A=[],x={};var w=this.Processing=function(t,i,b){if(!(this instanceof w))throw"called Processing constructor as if it were a function: missing 'new'.";let E={},v=t===e&&i===e;if(!("getContext"in(E=v?l.createElement("canvas"):"string"==typeof t?l.getElementById(t):t)))throw"called Processing constructor without passing canvas element reference or id.";let S=[];function P(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n),S.push({elem:t,type:e,fn:n})}function C(t){const e=t.elem,n=t.type,s=t.fn;e.removeEventListener?e.removeEventListener(n,s,!1):e.detachEvent&&e.detachEvent("on"+n,s)}const T=this;T.Char=T.Character=Char,S=[],s.withCommonFunctions(T),s.withMath(T),s.withProxyFunctions(T,function(t){return Array.prototype.slice.call(t,1)}),s.withTouch(T,E,P,function(t,e){Object.keys(S).forEach(function(n){e.indexOf(n.type)>-1&&n.elem==t&&C(n.type)})},l,u),b&&Object.keys(b).forEach(function(t){T[t]=b[t]}),T.externals={canvas:E,context:e,sketch:e,window:a},T.name="Processing.js Instance",T.use3DContext=!1,T.focused=!1,T.breakShape=!1,T.glyphTable={},T.pmouseX=0,T.pmouseY=0,T.mouseX=0,T.mouseY=0,T.mouseButton=0,T.mouseScroll=0,T.mouseClicked=e,T.mouseDragged=e,T.mouseMoved=e,T.mousePressed=e,T.mouseReleased=e,T.mouseScrolled=e,T.mouseOver=e,T.mouseOut=e,T.touchStart=e,T.touchEnd=e,T.touchMove=e,T.touchCancel=e,T.key=e,T.keyCode=e,T.keyPressed=h,T.keyReleased=h,T.keyTyped=h,T.draw=e,T.setup=e,T.__mousePressed=!1,T.__keyPressed=!1,T.__frameRate=60,T.frameCount=0,T.width=100,T.height=100;let M,_,R,L,I,D,O,N,F,k,B,$,G,V,z,U,H,X,j,Y,K,W,Z,q,Q,J,tt,et,nt,st,it,rt,ot,at,lt,ht,ut,ct,ft,pt,mt,gt=!0,dt=[1,1,1,1],yt=4294967295,bt=!0,At=!0,xt=[0,0,0,1],wt=4278190080,Et=!0,vt=1,St=!1,Pt=!1,Ct=!0,Tt=0,Mt=u.CORNER,_t=u.CENTER,Rt=0,Lt=0,It=0,Dt=u.NORMAL_MODE_AUTO,Ot=60,Nt=1e3/Ot,Ft=u.ARROW,kt=E.style.cursor,Bt=u.POLYGON,$t=[],Gt=0,Vt=20,zt=!1,Ut=-3355444,Ht=20,Xt=255,jt=255,Yt=255,Kt=255,Wt=0,Zt=0,qt=u.RGB,Qt=null,Jt=null,te=Date.now(),ee=te,ne=0,se={attributes:{},locations:{}},ie={width:0,height:0},re=u.IMAGE,oe=!1,ae=u.LEFT,le=u.BASELINE,he=u.MODEL,ue="Arial",ce=12,fe=9,pe=2,me=14,ge=PFont.get(ue,ce),de=null,ye=!1,be=1e3,Ae=[],xe=null,we=[u.SHIFT,u.CONTROL,u.ALT,u.CAPSLK,u.PGUP,u.PGDN,u.END,u.HOME,u.LEFT,u.UP,u.RIGHT,u.DOWN,u.NUMLK,u.INSERT,u.F1,u.F2,u.F3,u.F4,u.F5,u.F6,u.F7,u.F8,u.F9,u.F10,u.F11,u.F12,u.META],Ee=0,ve=0,Se=0,Pe=[],Ce=[],Te=[],Me=new m(u.SINCOS_LENGTH),_e=new m(u.SINCOS_LENGTH),Re=!1,Le=!1,Ie=Math.PI/180*60,De=T.width/2,Oe=T.height/2,Ne=Oe/Math.tan(Ie/2),Fe=Ne/10,ke=10*Ne,Be=T.width/T.height,$e=[],Ge=[],Ve=0,ze=!1,Ue=!1,He=!0,Xe=u.CORNER;const je=[],Ye=new m([.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),Ke=new m([.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5]),We=new m([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),Ze=new m([0,0,0,0,1,0,1,1,0,1,0,0]),qe=new m([0,0,1,0,0,1,0,0,1,0,0,1]),Qe="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec3 aNormal;attribute vec4 aColor;attribute vec2 aTexture;varying   vec2 vTexture;uniform vec4 uColor;uniform bool uUsingMat;uniform vec3 uSpecular;uniform vec3 uMaterialEmissive;uniform vec3 uMaterialAmbient;uniform vec3 uMaterialSpecular;uniform float uShininess;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform mat4 uNormalTransform;uniform int uLightCount;uniform vec3 uFalloff;struct Light {  int type;  vec3 color;  vec3 position;  vec3 direction;  float angle;  vec3 halfVector;  float concentration;};uniform Light uLights0;uniform Light uLights1;uniform Light uLights2;uniform Light uLights3;uniform Light uLights4;uniform Light uLights5;uniform Light uLights6;uniform Light uLights7;Light getLight(int index){  if(index == 0) return uLights0;  if(index == 1) return uLights1;  if(index == 2) return uLights2;  if(index == 3) return uLights3;  if(index == 4) return uLights4;  if(index == 5) return uLights5;  if(index == 6) return uLights6;  return uLights7;}void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {  float d = length( light.position - ecPos );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  totalAmbient += light.color * attenuation;}void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor = 0.0;  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));  if( nDotVP != 0.0 ){    powerFactor = pow( nDotVH, uShininess );  }  col += light.color * nDotVP;  spec += uSpecular * powerFactor;}void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor;   vec3 VP = light.position - ecPos;  float d = length( VP );   VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0 ) {    powerFactor = 0.0;  }  else {    powerFactor = pow( nDotHV, uShininess );  }  spec += uSpecular * powerFactor * attenuation;  col += light.color * nDotVP * attenuation;}void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float spotAttenuation;  float powerFactor = 0.0;  vec3 VP = light.position - ecPos;  vec3 ldir = normalize( -light.direction );  float d = length( VP );  VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ) );  float spotDot = dot( VP, ldir );"+(/Windows/.test(o.userAgent)?"  spotAttenuation = 1.0; ":"  if( spotDot > cos( light.angle ) ) {    spotAttenuation = pow( spotDot, light.concentration );  }  else{    spotAttenuation = 0.0;  }  attenuation *= spotAttenuation;")+"  float nDotVP = max( 0.0, dot( vertNormal, VP ) );  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ) );  if( nDotVP != 0.0 ) {    powerFactor = pow( nDotHV, uShininess );  }  spec += uSpecular * powerFactor * attenuation;  col += light.color * nDotVP * attenuation;}void main(void) {  vec3 finalAmbient = vec3( 0.0 );  vec3 finalDiffuse = vec3( 0.0 );  vec3 finalSpecular = vec3( 0.0 );  vec4 col = uColor;  if ( uColor[0] == -1.0 ){    col = aColor;  }  vec3 norm = normalize(vec3( uNormalTransform * vec4( aNormal, 0.0 ) ));  vec4 ecPos4 = uView * uModel * vec4(aVertex, 1.0);  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;  if( uLightCount == 0 ) {    vFrontColor = col + vec4(uMaterialSpecular, 1.0);  }  else {    for( int i = 0; i < 8; i++ ) {      Light l = getLight(i);      if( i >= uLightCount ){        break;      }      if( l.type == 0 ) {        AmbientLight( finalAmbient, ecPos, l );      }      else if( l.type == 1 ) {        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else if( l.type == 2 ) {        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else {        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }    }   if( uUsingMat == false ) {     vFrontColor = vec4(       vec3( col ) * finalAmbient +       vec3( col ) * finalDiffuse +       vec3( col ) * finalSpecular,       col[3] );   }   else{     vFrontColor = vec4(        uMaterialEmissive +        (vec3(col) * uMaterialAmbient * finalAmbient ) +        (vec3(col) * finalDiffuse) +        (uMaterialSpecular * finalSpecular),        col[3] );    }  }  vTexture.xy = aTexture.xy;  gl_Position = uProjection * uView * uModel * vec4( aVertex, 1.0 );}";function Je(t,n,s,i){let r=se.locations[t];r===e&&(r=M.getUniformLocation(n,s),se.locations[t]=r),null!==r&&(4===i.length?M.uniform4fv(r,i):3===i.length?M.uniform3fv(r,i):2===i.length?M.uniform2fv(r,i):M.uniform1f(r,i))}function tn(t,n,s,i){let r=se.locations[t];r===e&&(r=M.getUniformLocation(n,s),se.locations[t]=r),null!==r&&(4===i.length?M.uniform4iv(r,i):3===i.length?M.uniform3iv(r,i):2===i.length?M.uniform2iv(r,i):M.uniform1i(r,i))}function en(t,n,s,i,r){let o=se.locations[t];o===e&&(o=M.getUniformLocation(n,s),se.locations[t]=o),-1!==o&&(16===r.length?M.uniformMatrix4fv(o,i,r):9===r.length?M.uniformMatrix3fv(o,i,r):M.uniformMatrix2fv(o,i,r))}function nn(t,n,s,i,r){let o=se.attributes[t];o===e&&(o=M.getAttribLocation(n,s),se.attributes[t]=o),-1!==o&&(M.bindBuffer(M.ARRAY_BUFFER,r),M.vertexAttribPointer(o,i,M.FLOAT,!1,0,0),M.enableVertexAttribArray(o))}function sn(t,n,s){let i=se.attributes[t];i===e&&(i=M.getAttribLocation(n,s),se.attributes[t]=i),-1!==i&&M.disableVertexAttribArray(i)}const rn=function(t,e,n){const s=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS))throw t.getShaderInfoLog(s);const i=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw t.getShaderInfoLog(i);const r=t.createProgram();if(t.attachShader(r,s),t.attachShader(r,i),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw"Error linking shaders.";return r},on=function(t,e,n,s,i){return{x:t,y:e,w:n,h:s}};let an=on;const ln=function(t,e,n,s,i){return{x:t,y:e,w:i?n:n-t,h:i?s:s-e}},hn=function(t,e,n,s,i){return{x:t-n/2,y:e-s/2,w:n,h:s}},un=function(){},cn=function(){},fn=function(){},pn=function(){};cn.prototype=new un,cn.prototype.constructor=cn,fn.prototype=new un,fn.prototype.constructor=fn,pn.prototype=new un,pn.prototype.constructor=pn,un.prototype.a3DOnlyFunction=h,T.shape=function(t,e,n,s,i){arguments.length>=1&&null!==arguments[0]&&t.isVisible()&&(T.pushMatrix(),Xe===u.CENTER?5===arguments.length?(T.translate(e-s/2,n-i/2),T.scale(s/t.getWidth(),i/t.getHeight())):3===arguments.length?T.translate(e-t.getWidth()/2,-t.getHeight()/2):T.translate(-t.getWidth()/2,-t.getHeight()/2):Xe===u.CORNER?5===arguments.length?(T.translate(e,n),T.scale(s/t.getWidth(),i/t.getHeight())):3===arguments.length&&T.translate(e,n):Xe===u.CORNERS&&(5===arguments.length?(s-=e,i-=n,T.translate(e,n),T.scale(s/t.getWidth(),i/t.getHeight())):3===arguments.length&&T.translate(e,n)),t.draw(T),(1===arguments.length&&Xe===u.CENTER||arguments.length>1)&&T.popMatrix())},T.shapeMode=function(t){Xe=t},T.loadShape=function(t){return 1===arguments.length&&t.indexOf(".svg")>-1?new PShapeSVG(null,t):null},T.loadXML=function(t){return new XML(T,t)},T.parseXML=function(t){const e=new XML;return e.parse(t),e};const mn=function(t){let e=0;for(let n=0;n<t.length;n++)e=0!==n?Math.max(e,Math.abs(t[n])):Math.abs(t[n]);let n=(e+"").indexOf(".");return 0===n?n=1:-1===n&&(n=(e+"").length),n};var gn=T.PMatrix2D=function(){0===arguments.length?this.reset():1===arguments.length&&arguments[0]instanceof gn?this.set(arguments[0].array()):6===arguments.length&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};gn.prototype={set:function(){if(6===arguments.length){const t=arguments;this.set([t[0],t[1],t[2],t[3],t[4],t[5]])}else 1===arguments.length&&arguments[0]instanceof gn?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){const t=new gn;return t.set(this.elements),t},reset:function(){this.set([1,0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(t,e){this.elements[2]=t*this.elements[0]+e*this.elements[1]+this.elements[2],this.elements[5]=t*this.elements[3]+e*this.elements[4]+this.elements[5]},invTranslate:function(t,e){this.translate(-t,-e)},transpose:function(){},mult:function(t,e){let n,s;return t instanceof PVector?(n=t.x,s=t.y,e||(e=new PVector)):t instanceof Array&&(n=t[0],s=t[1],e||(e=[])),e instanceof Array?(e[0]=this.elements[0]*n+this.elements[1]*s+this.elements[2],e[1]=this.elements[3]*n+this.elements[4]*s+this.elements[5]):e instanceof PVector&&(e.x=this.elements[0]*n+this.elements[1]*s+this.elements[2],e.y=this.elements[3]*n+this.elements[4]*s+this.elements[5],e.z=0),e},multX:function(t,e){return t*this.elements[0]+e*this.elements[1]+this.elements[2]},multY:function(t,e){return t*this.elements[3]+e*this.elements[4]+this.elements[5]},skewX:function(t){this.apply(1,0,1,t,0,0)},skewY:function(t){this.apply(1,0,1,0,t,0)},shearX:function(t){this.apply(1,0,1,Math.tan(t),0,0)},shearY:function(t){this.apply(1,0,1,0,Math.tan(t),0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){const t=this.determinant();if(Math.abs(t)>u.MIN_INT){const e=this.elements[0],n=this.elements[1],s=this.elements[2],i=this.elements[3],r=this.elements[4],o=this.elements[5];return this.elements[0]=r/t,this.elements[3]=-i/t,this.elements[1]=-n/t,this.elements[4]=e/t,this.elements[2]=(n*o-r*s)/t,this.elements[5]=(i*s-e*o)/t,!0}return!1},scale:function(t,e){t&&!e&&(e=t),t&&e&&(this.elements[0]*=t,this.elements[1]*=e,this.elements[3]*=t,this.elements[4]*=e)},invScale:function(t,e){t&&!e&&(e=t),this.scale(1/t,1/e)},apply:function(){let t;1===arguments.length&&arguments[0]instanceof gn?t=arguments[0].array():6===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,this.elements[2],0,0,this.elements[5]];let n=0;for(let s=0;s<2;s++)for(let i=0;i<3;i++,n++)e[n]+=this.elements[3*s+0]*t[i+0]+this.elements[3*s+1]*t[i+3];this.elements=e.slice()},preApply:function(){let t;1===arguments.length&&arguments[0]instanceof gn?t=arguments[0].array():6===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,t[2],0,0,t[5]];e[2]=t[2]+this.elements[2]*t[0]+this.elements[5]*t[1],e[5]=t[5]+this.elements[2]*t[3]+this.elements[5]*t[4],e[0]=this.elements[0]*t[0]+this.elements[3]*t[1],e[3]=this.elements[0]*t[3]+this.elements[3]*t[4],e[1]=this.elements[1]*t[0]+this.elements[4]*t[1],e[4]=this.elements[1]*t[3]+this.elements[4]*t[4],this.elements=e.slice()},rotate:function(t){const e=Math.cos(t),n=Math.sin(t);let s=this.elements[0],i=this.elements[1];this.elements[0]=e*s+n*i,this.elements[1]=-n*s+e*i,s=this.elements[3],i=this.elements[4],this.elements[3]=e*s+n*i,this.elements[4]=-n*s+e*i},rotateZ:function(t){this.rotate(t)},invRotateZ:function(t){this.rotateZ(t-Math.PI)},print:function(){const t=mn(this.elements),e=T.nfs(this.elements[0],t,4)+" "+T.nfs(this.elements[1],t,4)+" "+T.nfs(this.elements[2],t,4)+"\n"+T.nfs(this.elements[3],t,4)+" "+T.nfs(this.elements[4],t,4)+" "+T.nfs(this.elements[5],t,4)+"\n\n";T.println(e)}};const dn=T.PMatrix3D=function(){this.reset()};dn.prototype={set:function(){16===arguments.length?this.elements=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof dn?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){const t=new dn;return t.set(this.elements),t},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function(){return this.elements.slice()},translate:function(t,n,s){s===e&&(s=0),this.elements[3]+=t*this.elements[0]+n*this.elements[1]+s*this.elements[2],this.elements[7]+=t*this.elements[4]+n*this.elements[5]+s*this.elements[6],this.elements[11]+=t*this.elements[8]+n*this.elements[9]+s*this.elements[10],this.elements[15]+=t*this.elements[12]+n*this.elements[13]+s*this.elements[14]},transpose:function(){let t=this.elements[4];this.elements[4]=this.elements[1],this.elements[1]=t,t=this.elements[8],this.elements[8]=this.elements[2],this.elements[2]=t,t=this.elements[6],this.elements[6]=this.elements[9],this.elements[9]=t,t=this.elements[3],this.elements[3]=this.elements[12],this.elements[12]=t,t=this.elements[7],this.elements[7]=this.elements[13],this.elements[13]=t,t=this.elements[11],this.elements[11]=this.elements[14],this.elements[14]=t},mult:function(t,e){let n,s,i,r;return t instanceof PVector?(n=t.x,s=t.y,i=t.z,r=1,e||(e=new PVector)):t instanceof Array&&(n=t[0],s=t[1],i=t[2],r=t[3]||1,(!e||3!==e.length&&4!==e.length)&&(e=[0,0,0])),e instanceof Array&&(3===e.length?(e[0]=this.elements[0]*n+this.elements[1]*s+this.elements[2]*i+this.elements[3],e[1]=this.elements[4]*n+this.elements[5]*s+this.elements[6]*i+this.elements[7],e[2]=this.elements[8]*n+this.elements[9]*s+this.elements[10]*i+this.elements[11]):4===e.length&&(e[0]=this.elements[0]*n+this.elements[1]*s+this.elements[2]*i+this.elements[3]*r,e[1]=this.elements[4]*n+this.elements[5]*s+this.elements[6]*i+this.elements[7]*r,e[2]=this.elements[8]*n+this.elements[9]*s+this.elements[10]*i+this.elements[11]*r,e[3]=this.elements[12]*n+this.elements[13]*s+this.elements[14]*i+this.elements[15]*r)),e instanceof PVector&&(e.x=this.elements[0]*n+this.elements[1]*s+this.elements[2]*i+this.elements[3],e.y=this.elements[4]*n+this.elements[5]*s+this.elements[6]*i+this.elements[7],e.z=this.elements[8]*n+this.elements[9]*s+this.elements[10]*i+this.elements[11]),e},preApply:function(){let t;1===arguments.length&&arguments[0]instanceof dn?t=arguments[0].array():16===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let n=0;for(let s=0;s<4;s++)for(let i=0;i<4;i++,n++)e[n]+=this.elements[i+0]*t[4*s+0]+this.elements[i+4]*t[4*s+1]+this.elements[i+8]*t[4*s+2]+this.elements[i+12]*t[4*s+3];this.elements=e.slice()},apply:function(){let t;1===arguments.length&&arguments[0]instanceof dn?t=arguments[0].array():16===arguments.length?t=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(t=arguments[0]);const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let n=0;for(let s=0;s<4;s++)for(let i=0;i<4;i++,n++)e[n]+=this.elements[4*s+0]*t[i+0]+this.elements[4*s+1]*t[i+4]+this.elements[4*s+2]*t[i+8]+this.elements[4*s+3]*t[i+12];this.elements=e.slice()},rotate:function(t,e,n,s){if(arguments.length<4)this.rotateZ(t);else{const i=new PVector(e,n,s),r=i.mag();if(0===r)return;1!=r&&(i.normalize(),e=i.x,n=i.y,s=i.z);const o=T.cos(t),a=T.sin(t),l=1-o;this.apply(l*e*e+o,l*e*n-a*s,l*e*s+a*n,0,l*e*n+a*s,l*n*n+o,l*n*s-a*e,0,l*e*s-a*n,l*n*s+a*e,l*s*s+o,0,0,0,0,1)}},invApply:function(){pt===e&&(pt=new dn);const t=arguments;return pt.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),!!pt.invert()&&(this.preApply(pt),!0)},rotateX:function(t){const e=T.cos(t),n=T.sin(t);this.apply([1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1])},rotateY:function(t){const e=T.cos(t),n=T.sin(t);this.apply([e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1])},rotateZ:function(t){const e=Math.cos(t),n=Math.sin(t);this.apply([e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1])},scale:function(t,e,n){!t||e||n?t&&e&&!n&&(n=1):e=n=t,t&&e&&n&&(this.elements[0]*=t,this.elements[1]*=e,this.elements[2]*=n,this.elements[4]*=t,this.elements[5]*=e,this.elements[6]*=n,this.elements[8]*=t,this.elements[9]*=e,this.elements[10]*=n,this.elements[12]*=t,this.elements[13]*=e,this.elements[14]*=n)},skewX:function(t){const e=Math.tan(t);this.apply(1,e,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(t){const e=Math.tan(t);this.apply(1,0,0,0,e,1,0,0,0,0,1,0,0,0,0,1)},shearX:function(t){const e=Math.tan(t);this.apply(1,e,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},shearY:function(t){const e=Math.tan(t);this.apply(1,0,0,0,e,1,0,0,0,0,1,0,0,0,0,1)},multX:function(t,e,n,s){return n?s?this.elements[0]*t+this.elements[1]*e+this.elements[2]*n+this.elements[3]*s:this.elements[0]*t+this.elements[1]*e+this.elements[2]*n+this.elements[3]:this.elements[0]*t+this.elements[1]*e+this.elements[3]},multY:function(t,e,n,s){return n?s?this.elements[4]*t+this.elements[5]*e+this.elements[6]*n+this.elements[7]*s:this.elements[4]*t+this.elements[5]*e+this.elements[6]*n+this.elements[7]:this.elements[4]*t+this.elements[5]*e+this.elements[7]},multZ:function(t,e,n,s){return s?this.elements[8]*t+this.elements[9]*e+this.elements[10]*n+this.elements[11]*s:this.elements[8]*t+this.elements[9]*e+this.elements[10]*n+this.elements[11]},multW:function(t,e,n,s){return s?this.elements[12]*t+this.elements[13]*e+this.elements[14]*n+this.elements[15]*s:this.elements[12]*t+this.elements[13]*e+this.elements[14]*n+this.elements[15]},invert:function(){const t=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],e=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],n=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],s=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5],i=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],r=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],o=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],a=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],l=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],h=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],u=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13],c=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],f=t*c-e*u+n*h+s*l-i*a+r*o;if(Math.abs(f)<=1e-9)return!1;const p=[];p[0]=+this.elements[5]*c-this.elements[6]*u+this.elements[7]*h,p[4]=-this.elements[4]*c+this.elements[6]*l-this.elements[7]*a,p[8]=+this.elements[4]*u-this.elements[5]*l+this.elements[7]*o,p[12]=-this.elements[4]*h+this.elements[5]*a-this.elements[6]*o,p[1]=-this.elements[1]*c+this.elements[2]*u-this.elements[3]*h,p[5]=+this.elements[0]*c-this.elements[2]*l+this.elements[3]*a,p[9]=-this.elements[0]*u+this.elements[1]*l-this.elements[3]*o,p[13]=+this.elements[0]*h-this.elements[1]*a+this.elements[2]*o,p[2]=+this.elements[13]*r-this.elements[14]*i+this.elements[15]*s,p[6]=-this.elements[12]*r+this.elements[14]*n-this.elements[15]*e,p[10]=+this.elements[12]*i-this.elements[13]*n+this.elements[15]*t,p[14]=-this.elements[12]*s+this.elements[13]*e-this.elements[14]*t,p[3]=-this.elements[9]*r+this.elements[10]*i-this.elements[11]*s,p[7]=+this.elements[8]*r-this.elements[10]*n+this.elements[11]*e,p[11]=-this.elements[8]*i+this.elements[9]*n-this.elements[11]*t,p[15]=+this.elements[8]*s-this.elements[9]*e+this.elements[10]*t;const m=1/f;return p[0]*=m,p[1]*=m,p[2]*=m,p[3]*=m,p[4]*=m,p[5]*=m,p[6]*=m,p[7]*=m,p[8]*=m,p[9]*=m,p[10]*=m,p[11]*=m,p[12]*=m,p[13]*=m,p[14]*=m,p[15]*=m,this.elements=p.slice(),!0},toString:function(){let t="";for(let e=0;e<15;e++)t+=this.elements[e]+", ";return t+=this.elements[15]},print:function(){const t=mn(this.elements),e=T.nfs(this.elements[0],t,4)+" "+T.nfs(this.elements[1],t,4)+" "+T.nfs(this.elements[2],t,4)+" "+T.nfs(this.elements[3],t,4)+"\n"+T.nfs(this.elements[4],t,4)+" "+T.nfs(this.elements[5],t,4)+" "+T.nfs(this.elements[6],t,4)+" "+T.nfs(this.elements[7],t,4)+"\n"+T.nfs(this.elements[8],t,4)+" "+T.nfs(this.elements[9],t,4)+" "+T.nfs(this.elements[10],t,4)+" "+T.nfs(this.elements[11],t,4)+"\n"+T.nfs(this.elements[12],t,4)+" "+T.nfs(this.elements[13],t,4)+" "+T.nfs(this.elements[14],t,4)+" "+T.nfs(this.elements[15],t,4)+"\n\n";T.println(e)},invTranslate:function(t,e,n){this.preApply(1,0,0,-t,0,1,0,-e,0,0,1,-n,0,0,0,1)},invRotateX:function(t){const e=Math.cos(-t),n=Math.sin(-t);this.preApply([1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1])},invRotateY:function(t){const e=Math.cos(-t),n=Math.sin(-t);this.preApply([e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1])},invRotateZ:function(t){const e=Math.cos(-t),n=Math.sin(-t);this.preApply([e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1])},invScale:function(t,e,n){this.preApply([1/t,0,0,0,0,1/e,0,0,0,0,1/n,0,0,0,0,1])}};const yn=T.PMatrixStack=function(){this.matrixStack=[]};function bn(t,e,n,s){let i,r,o,a;if(qt===u.HSB){const s=T.color.toRGB(t,e,n);i=s[0],r=s[1],o=s[2]}else i=Math.round(t/jt*255),r=Math.round(e/Yt*255),o=Math.round(n/Kt*255);return i=(i=i<0?0:i)>255?255:i,r=(r=r<0?0:r)>255?255:r,o=(o=o<0?0:o)>255?255:o,(a=(a=(a=Math.round(s/Xt*255))<0?0:a)>255?255:a)<<24&u.ALPHA_MASK|i<<16&u.RED_MASK|r<<8&u.GREEN_MASK|o&u.BLUE_MASK}function An(t){let e,n,s;e=((t&u.RED_MASK)>>>16)/255,n=((t&u.GREEN_MASK)>>>8)/255,s=(t&u.BLUE_MASK)/255;let i,r,o=T.max(T.max(e,n),s),a=T.min(T.min(e,n),s);return a===o?[0,0,o*Kt]:(i=e===o?(n-s)/(o-a):n===o?2+(s-e)/(o-a):4+(e-n)/(o-a),(i/=6)<0?i+=1:i>1&&(i-=1),[i*jt,(r=(o-a)/o)*Yt,o*Kt])}function xn(){M.save()}function wn(){M.restore(),Et=!0,bt=!0}function En(){const t=(Date.now()-ee)/1e3,e=++ne/t;t>.5&&(ee=Date.now(),ne=0,T.__frameRate=e),T.frameCount++}yn.prototype.load=function(){const t=R.$newPMatrix();1===arguments.length?t.set(arguments[0]):t.set(arguments),this.matrixStack.push(t)},cn.prototype.$newPMatrix=function(){return new gn},fn.prototype.$newPMatrix=function(){return new dn},yn.prototype.push=function(){this.matrixStack.push(this.peek())},yn.prototype.pop=function(){return this.matrixStack.pop()},yn.prototype.peek=function(){const t=R.$newPMatrix();return t.set(this.matrixStack[this.matrixStack.length-1]),t},yn.prototype.mult=function(t){this.matrixStack[this.matrixStack.length-1].apply(t)},T.split=function(t,e){return t.split(e)},T.splitTokens=function(t,n){if(n===e)return t.split(/\s+/g);let s,i,r=n.split(/()/g),o="",a=t.length,l=[];for(s=0;s<a;s++)i=t[s],r.indexOf(i)>-1?(""!==o&&l.push(o),o=""):o+=i;return""!==o&&l.push(o),l},T.append=function(t,e){return t[t.length]=e,t},T.concat=function(t,e){return t.concat(e)},T.sort=function(t,e){const n=[];if(t.length>0){const s=e>0?e:t.length;for(let e=0;e<s;e++)n.push(t[e]);if("string"==typeof t[0]?n.sort():n.sort(function(t,e){return t-e}),e>0)for(let e=n.length;e<t.length;e++)n.push(t[e])}return n},T.splice=function(t,e,n){if(0===e.length)return t;if(e instanceof Array)for(let s=0,i=n;s<e.length;i++,s++)t.splice(i,0,e[s]);else t.splice(n,0,e);return t},T.subset=function(t,n,s){const i=s!==e?n+s:t.length;return t.slice(n,i)},T.join=function(t,e){return t.join(e)},T.shorten=function(t){const e=[],n=t.length;for(let s=0;s<n;s++)e[s]=t[s];return e.pop(),e},T.expand=function(t,e){const n=t.slice(0),s=e||2*t.length;return n.length=s,n},T.arrayCopy=function(){let t,n,s,i=0,r=0;2===arguments.length?(t=arguments[0],n=arguments[1],s=t.length):3===arguments.length?(t=arguments[0],n=arguments[1],s=arguments[2]):5===arguments.length&&(t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4]);for(let o=i,a=r;o<s+i;o++,a++){if(n[a]===e)throw"array index out of bounds exception";n[a]=t[o]}},T.reverse=function(t){return t.reverse()},T.mix=function(t,e,n){return t+((e-t)*n>>8)},T.peg=function(t){return t<0?0:t>255?255:t},T.modes=function(){const t=u.ALPHA_MASK,e=u.RED_MASK,n=u.GREEN_MASK,s=u.BLUE_MASK,i=Math.min,r=Math.max;function o(t,e,n,s,r,o,a,l,h,u,c){let f=n+((h-n)*e>>8),p=s+((u-s)*e>>8),m=r+((c-r)*e>>8);return i(((4278190080&t)>>>24)+e,255)<<24|(f=(f<0?0:f>255?255:f)<<16)|(p=(p<0?0:p>255?255:p)<<8)|(m=m<0?0:m>255?255:m)}return{replace:function(t,e){return e},blend:function(r,o){const a=(o&t)>>>24,l=r&e,h=r&n,u=r&s,c=o&e,f=o&n,p=o&s;return i(((r&t)>>>24)+a,255)<<24|l+((c-l)*a>>8)&e|h+((f-h)*a>>8)&n|u+((p-u)*a>>8)&s},add:function(r,o){const a=(o&t)>>>24;return i(((r&t)>>>24)+a,255)<<24|i((r&e)+((o&e)>>8)*a,e)&e|i((r&n)+((o&n)>>8)*a,n)&n|i((r&s)+((o&s)*a>>8),s)},subtract:function(o,a){const l=(a&t)>>>24;return i(((o&t)>>>24)+l,255)<<24|r((o&e)-((a&e)>>8)*l,n)&e|r((o&n)-((a&n)>>8)*l,s)&n|r((o&s)-((a&s)*l>>8),0)},lightest:function(o,a){const l=(a&t)>>>24;return i(((o&t)>>>24)+l,255)<<24|r(o&e,((a&e)>>8)*l)&e|r(o&n,((a&n)>>8)*l)&n|r(o&s,(a&s)*l>>8)},darkest:function(r,o){const a=(o&t)>>>24,l=r&e,h=r&n,u=r&s,c=i(r&e,((o&e)>>8)*a),f=i(r&n,((o&n)>>8)*a),p=i(r&s,(o&s)*a>>8);return i(((r&t)>>>24)+a,255)<<24|l+((c-l)*a>>8)&e|h+((f-h)*a>>8)&n|u+((p-u)*a>>8)&s},difference:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;return o(i,(r&t)>>>24,a,l,h,0,0,0,a>u?a-u:u-a,l>c?l-c:c-l,h>f?h-f:f-h)},exclusion:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;return o(i,(r&t)>>>24,a,l,h,0,0,0,a+u-(a*u>>7),l+c-(l*c>>7),h+f-(h*f>>7))},multiply:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;return o(i,(r&t)>>>24,a,l,h,0,0,0,a*u>>8,l*c>>8,h*f>>8)},screen:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;return o(i,(r&t)>>>24,a,l,h,0,0,0,255-((255-a)*(255-u)>>8),255-((255-l)*(255-c)>>8),255-((255-h)*(255-f)>>8))},hard_light:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;return o(i,(r&t)>>>24,a,l,h,0,0,0,u<128?a*u>>7:255-((255-a)*(255-u)>>7),c<128?l*c>>7:255-((255-l)*(255-c)>>7),f<128?h*f>>7:255-((255-h)*(255-f)>>7))},soft_light:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;return o(i,(r&t)>>>24,a,l,h,0,0,0,(a*u>>7)+(a*a>>8)-(a*a*u>>15),(l*c>>7)+(l*l>>8)-(l*l*c>>15),(h*f>>7)+(h*h>>8)-(h*h*f>>15))},overlay:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;return o(i,(r&t)>>>24,a,l,h,0,0,0,a<128?a*u>>7:255-((255-a)*(255-u)>>7),l<128?l*c>>7:255-((255-l)*(255-c)>>7),h<128?h*f>>7:255-((255-h)*(255-f)>>7))},dodge:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;let p=255;255!==u&&(p=(p=(a<<8)/(255-u))<0?0:p>255?255:p);let m=255;255!==c&&(m=(m=(l<<8)/(255-c))<0?0:m>255?255:m);let g=255;return 255!==f&&(g=(g=(h<<8)/(255-f))<0?0:g>255?255:g),o(i,(r&t)>>>24,a,l,h,0,0,0,p,m,g)},burn:function(i,r){const a=(i&e)>>16,l=(i&n)>>8,h=i&s,u=(r&e)>>16,c=(r&n)>>8,f=r&s;let p=0;0!==u&&(p=255-((p=(255-a<<8)/u)<0?0:p>255?255:p));let m=0;0!==c&&(m=255-((m=(255-l<<8)/c)<0?0:m>255?255:m));let g=0;return 0!==f&&(g=255-((g=(255-h<<8)/f)<0?0:g>255?255:g)),o(i,(r&t)>>>24,a,l,h,0,0,0,p,m,g)}}}(),T.color=function(t,n,s,i){return t!==e&&n!==e&&s!==e&&i!==e?bn(t,n,s,i):t!==e&&n!==e&&s!==e?bn(t,n,s,Xt):t!==e&&n!==e?function(t,e){let n;return t&u.ALPHA_MASK?(n=(n=(n=Math.round(e/Xt*255))>255?255:n)<0?0:n,t-(t&u.ALPHA_MASK)+(n<<24&u.ALPHA_MASK)):qt===u.RGB?bn(t,t,t,e):qt===u.HSB?bn(0,0,t/jt*Kt,e):void 0}(t,n):"number"==typeof t?function(t){if(t<=jt&&t>=0){if(qt===u.RGB)return bn(t,t,t,Xt);if(qt===u.HSB)return bn(0,0,t/jt*Kt,Xt)}if(t)return t>2147483647&&(t-=4294967296),t}(t):bn(jt,Yt,Kt,Xt)},T.color.toString=function(t){return"rgba("+((t&u.RED_MASK)>>>16)+","+((t&u.GREEN_MASK)>>>8)+","+(t&u.BLUE_MASK)+","+((t&u.ALPHA_MASK)>>>24)/255+")"},T.color.toInt=function(t,e,n,s){return s<<24&u.ALPHA_MASK|t<<16&u.RED_MASK|e<<8&u.GREEN_MASK|n&u.BLUE_MASK},T.color.toArray=function(t){return[(t&u.RED_MASK)>>>16,(t&u.GREEN_MASK)>>>8,t&u.BLUE_MASK,(t&u.ALPHA_MASK)>>>24]},T.color.toGLArray=function(t){return[((t&u.RED_MASK)>>>16)/255,((t&u.GREEN_MASK)>>>8)/255,(t&u.BLUE_MASK)/255,((t&u.ALPHA_MASK)>>>24)/255]},T.color.toRGB=function(t,e,n){t=(t=(t=t>jt?jt:t)<0?0:t)/jt*360,e=(e=e>Yt?Yt:e)/Yt*100,n=(n=n>Kt?Kt:n)/Kt*100;const s=Math.round(n/100*255);if(0===e)return[s,s,s];const i=t%360,r=i%60,o=Math.round(n*(100-e)/1e4*255),a=Math.round(n*(6e3-e*r)/6e5*255),l=Math.round(n*(6e3-e*(60-r))/6e5*255);switch(Math.floor(i/60)){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a];default:w.debug("Unexpectedly hit default case in toRGB function.")}},T.brightness=function(t){return An(t)[2]},T.saturation=function(t){return An(t)[1]},T.hue=function(t){return An(t)[0]},T.red=function(t){return((t&u.RED_MASK)>>>16)/255*jt},T.green=function(t){return((t&u.GREEN_MASK)>>>8)/255*Yt},T.blue=function(t){return(t&u.BLUE_MASK)/255*Kt},T.alpha=function(t){return((t&u.ALPHA_MASK)>>>24)/255*Xt},T.lerpColor=function(t,e,n){let s,i,r,o,a,l,h,c,f,p,m,g,d,y,b,A,x;const w=T.color(t),E=T.color(e);return qt===u.HSB?(d=An(w),c=((w&u.ALPHA_MASK)>>>24)/Xt,y=An(E),g=((E&u.ALPHA_MASK)>>>24)/Xt,A=T.lerp(d[0],y[0],n),x=T.lerp(d[1],y[1],n),r=T.lerp(d[2],y[2],n),b=T.color.toRGB(A,x,r),(o=T.lerp(c,g,n)*Xt+.5|0)<<24&u.ALPHA_MASK|b[0]<<16&u.RED_MASK|b[1]<<8&u.GREEN_MASK|b[2]&u.BLUE_MASK):(a=(w&u.RED_MASK)>>>16,l=(w&u.GREEN_MASK)>>>8,h=w&u.BLUE_MASK,c=((w&u.ALPHA_MASK)>>>24)/Xt,f=(E&u.RED_MASK)>>>16,p=(E&u.GREEN_MASK)>>>8,m=E&u.BLUE_MASK,g=((E&u.ALPHA_MASK)>>>24)/Xt,s=T.lerp(a,f,n)+.5|0,i=T.lerp(l,p,n)+.5|0,r=T.lerp(h,m,n)+.5|0,(o=T.lerp(c,g,n)*Xt+.5|0)<<24&u.ALPHA_MASK|s<<16&u.RED_MASK|i<<8&u.GREEN_MASK|r&u.BLUE_MASK)},T.colorMode=function(){qt=arguments[0],arguments.length>1&&(jt=arguments[1],Yt=arguments[2]||arguments[1],Kt=arguments[3]||arguments[1],Xt=arguments[4]||arguments[1])},T.blendColor=function(t,e,n){return n===u.REPLACE?T.modes.replace(t,e):n===u.BLEND?T.modes.blend(t,e):n===u.ADD?T.modes.add(t,e):n===u.SUBTRACT?T.modes.subtract(t,e):n===u.LIGHTEST?T.modes.lightest(t,e):n===u.DARKEST?T.modes.darkest(t,e):n===u.DIFFERENCE?T.modes.difference(t,e):n===u.EXCLUSION?T.modes.exclusion(t,e):n===u.MULTIPLY?T.modes.multiply(t,e):n===u.SCREEN?T.modes.screen(t,e):n===u.HARD_LIGHT?T.modes.hard_light(t,e):n===u.SOFT_LIGHT?T.modes.soft_light(t,e):n===u.OVERLAY?T.modes.overlay(t,e):n===u.DODGE?T.modes.dodge(t,e):n===u.BURN?T.modes.burn(t,e):void 0},T.printMatrix=function(){ht.print()},cn.prototype.translate=function(t,e){ht.translate(t,e),ut.invTranslate(t,e),M.translate(t,e)},fn.prototype.translate=function(t,e,n){ht.translate(t,e,n),ut.invTranslate(t,e,n)},cn.prototype.scale=function(t,e){ht.scale(t,e),ut.invScale(t,e),M.scale(t,e||t)},fn.prototype.scale=function(t,e,n){ht.scale(t,e,n),ut.invScale(t,e,n)},cn.prototype.transform=function(t){const e=t.array();M.transform(e[0],e[3],e[1],e[4],e[2],e[5])},fn.prototype.transformm=function(t){throw"p.transform is currently not supported in 3D mode"},cn.prototype.pushMatrix=function(){ct.load(ht),ft.load(ut),xn()},fn.prototype.pushMatrix=function(){ct.load(ht),ft.load(ut)},cn.prototype.popMatrix=function(){ht.set(ct.pop()),ut.set(ft.pop()),wn()},fn.prototype.popMatrix=function(){ht.set(ct.pop()),ut.set(ft.pop())},cn.prototype.resetMatrix=function(){ht.reset(),ut.reset(),M.setTransform(1,0,0,1,0,0)},fn.prototype.resetMatrix=function(){ht.reset(),ut.reset()},un.prototype.applyMatrix=function(){const t=arguments;ht.apply(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),ut.invApply(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},cn.prototype.applyMatrix=function(){const t=arguments;for(let e=t.length;e<16;e++)t[e]=0;t[10]=t[15]=1,un.prototype.applyMatrix.apply(this,t)},T.rotateX=function(t){ht.rotateX(t),ut.invRotateX(t)},cn.prototype.rotateZ=function(){throw"rotateZ() is not supported in 2D mode. Use rotate(float) instead."},fn.prototype.rotateZ=function(t){ht.rotateZ(t),ut.invRotateZ(t)},T.rotateY=function(t){ht.rotateY(t),ut.invRotateY(t)},cn.prototype.rotate=function(t){ht.rotateZ(t),ut.invRotateZ(t),M.rotate(t)},fn.prototype.rotate=function(t){arguments.length<4?T.rotateZ(t):(ht.rotate(t,arguments[1],arguments[2],arguments[3]),ut.rotate(-t,arguments[1],arguments[2],arguments[3]))},cn.prototype.shearX=function(t){ht.shearX(t),M.transform(1,0,t,1,0,0)},fn.prototype.shearX=function(t){ht.shearX(t)},cn.prototype.shearY=function(t){ht.shearY(t),M.transform(1,t,0,1,0,0)},fn.prototype.shearY=function(t){ht.shearY(t)},T.pushStyle=function(){xn(),T.pushMatrix();const t={doFill:gt,currentFillColor:yt,doStroke:At,currentStrokeColor:wt,curTint:Qt,curRectMode:Mt,curColorMode:qt,colorModeX:jt,colorModeZ:Kt,colorModeY:Yt,colorModeA:Xt,curTextFont:ge,horizontalTextAlignment:ae,verticalTextAlignment:le,textMode:he,curFontName:ue,curTextSize:ce,curTextAscent:fe,curTextDescent:pe,curTextLeading:me};je.push(t)},T.popStyle=function(){const t=je.pop();if(!t)throw"Too many popStyle() without enough pushStyle()";wn(),T.popMatrix(),gt=t.doFill,yt=t.currentFillColor,At=t.doStroke,wt=t.currentStrokeColor,Qt=t.curTint,Mt=t.curRectMode,qt=t.curColorMode,jt=t.colorModeX,Kt=t.colorModeZ,Yt=t.colorModeY,Xt=t.colorModeA,ge=t.curTextFont,ue=t.curFontName,ce=t.curTextSize,ae=t.horizontalTextAlignment,le=t.verticalTextAlignment,he=t.textMode,fe=t.curTextAscent,pe=t.curTextDescent,me=t.curTextLeading},T.year=function(){return(new Date).getFullYear()},T.month=function(){return(new Date).getMonth()+1},T.day=function(){return(new Date).getDate()},T.hour=function(){return(new Date).getHours()},T.minute=function(){return(new Date).getMinutes()},T.second=function(){return(new Date).getSeconds()},T.millis=function(){return Date.now()-te},cn.prototype.redraw=function(){En(),M.lineWidth=vt;const t=T.pmouseX,e=T.pmouseY;T.pmouseX=Wt,T.pmouseY=Zt,xn(),T.draw(),wn(),Wt=T.mouseX,Zt=T.mouseY,T.pmouseX=t,T.pmouseY=e},fn.prototype.redraw=function(){En();const t=T.pmouseX,e=T.pmouseY;T.pmouseX=Wt,T.pmouseY=Zt,M.clear(M.DEPTH_BUFFER_BIT),se={attributes:{},locations:{}},T.noLights(),T.lightFalloff(1,0,0),T.shininess(1),T.ambient(255,255,255),T.specular(0,0,0),T.emissive(0,0,0),T.camera(),T.draw(),Wt=T.mouseX,Zt=T.mouseY,T.pmouseX=t,T.pmouseY=e},T.noLoop=function(){Ct=!1,St=!1,clearInterval(Tt),_.onPause()},T.loop=function(){St||(ee=Date.now(),ne=0,Tt=a.setInterval(function(){try{_.onFrameStart(),T.redraw(),_.onFrameEnd()}catch(t){throw a.clearInterval(Tt),t}},Nt),Ct=!0,St=!0,_.onLoop())},T.frameRate=function(t){Nt=1e3/(Ot=t),Ct&&(T.noLoop(),T.loop())},T.exit=function(){var t;a.clearInterval(Tt),t=T.externals.canvas.id,A.splice(x[t],1),delete x[t],delete E.onmousedown;for(const t in w.lib)w.lib.hasOwnProperty(t)&&w.lib[t].hasOwnProperty("detach")&&w.lib[t].detach(T);let e=S.length;for(;e--;)C(S[e]);_.onExit()},T.cursor=function(){if(arguments.length>1||1===arguments.length&&arguments[0]instanceof T.PImage){let t,e,n=arguments[0];if(arguments.length>=3){if(t=arguments[1],e=arguments[2],t<0||e<0||e>=n.height||t>=n.width)throw"x and y must be non-negative and less than the dimensions of the image"}else t=n.width>>>1,e=n.height>>>1;const s='url("'+n.toDataURL()+'") '+t+" "+e+", default";Ft=E.style.cursor=s}else if(1===arguments.length){const t=arguments[0];Ft=E.style.cursor=t}else Ft=E.style.cursor=kt},T.noCursor=function(){Ft=E.style.cursor=u.NOCURSOR},T.link=function(t,n){n!==e?a.open(t,n):a.location=t},T.beginDraw=h,T.endDraw=h,cn.prototype.toImageData=function(t,n,s,i){return t=t!==e?t:0,n=n!==e?n:0,s=s!==e?s:T.width,i=i!==e?i:T.height,M.getImageData(t,n,s,i)},fn.prototype.toImageData=function(t,n,s,i){t=t!==e?t:0,n=n!==e?n:0,s=s!==e?s:T.width,i=i!==e?i:T.height;const r=l.createElement("canvas").getContext("2d").createImageData(s,i),o=new y(s*i*4);M.readPixels(t,n,s,i,M.RGBA,M.UNSIGNED_BYTE,o);for(let t=0,e=o.length,n=r.data;t<e;t++)n[t]=o[(i-1-Math.floor(t/4/s))*s*4+t%(4*s)];return r},T.status=function(t){a.status=t},T.binary=function(t,e){let n;if(e>0)n=e;else if(t instanceof Char)n=16,t|=0;else for(n=32;n>1&&!(t>>>n-1&1);)n--;let s="";for(;n>0;)s+=t>>>--n&1?"1":"0";return s},T.unbinary=function(t){let e=t.length-1,n=1,s=0;for(;e>=0;){const i=t[e--];if("0"!==i&&"1"!==i)throw"the value passed into unbinary was not an 8 bit binary number";"1"===i&&(s+=n),n<<=1}return s};function vn(t){let e=parseInt("0x"+t,16);return e>2147483647&&(e-=4294967296),e}T.hex=function(t,n){return 1===arguments.length&&(n=t instanceof Char?4:8),function(t,n){n=n===e||null===n?n=8:n,t<0&&(t=4294967295+t+1);let s=Number(t).toString(16).toUpperCase();for(;s.length<n;)s="0"+s;return s.length>=n&&(s=s.substring(s.length-n,s.length)),s}(t,n)},T.unhex=function(t){if(t instanceof Array){const e=[];for(let n=0;n<t.length;n++)e.push(vn(t[n]));return e}return vn(t)},T.loadStrings=function(t){if(p[t])return p[t].split("\n");let e=r(t);return"string"!=typeof e||""===e?[]:(e=e.replace(/(\r\n?)/g,"\n").replace(/\n$/,"")).split("\n")},T.saveStrings=function(t,e){p[t]=e.join("\n")},T.loadBytes=function(t){const e=r(t),n=[];for(let t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n},T.matchAll=function(t,e){let n,s=[];const i=new RegExp(e,"g");for(;null!==(n=i.exec(t));)s.push(n),0===n[0].length&&++i.lastIndex;return s.length>0?s:null},T.match=function(t,e){return t.match(e)};function Sn(t){return"number"==typeof t?0!==t:"boolean"==typeof t?t:"string"==typeof t?"true"===t.toLowerCase():t instanceof Char?49===t.code||84===t.code||116===t.code:void 0}function Pn(t){return"number"==typeof t?t:"boolean"==typeof t?t?1:0:"string"==typeof t?parseFloat(t):t instanceof Char?t.code:void 0}function Cn(t,e){if("number"==typeof t)return 4294967295&t;if("boolean"==typeof t)return t?1:0;if("string"==typeof t){return 4294967295&parseInt(t,e||10)}return t instanceof Char?t.code:void 0}T.println=function(){w.logger.println.apply(w.logger,arguments)},T.print=function(){w.logger.print.apply(w.logger,arguments)},T.str=function(t){if(t instanceof Array){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].toString()+"");return e}return t.toString()+""},T.parseBoolean=function(t){if(t instanceof Array){const e=[];for(let n=0;n<t.length;n++)e.push(Sn(t[n]));return e}return Sn(t)},T.parseByte=function(t){if(t instanceof Array){const e=[];for(let n=0;n<t.length;n++)e.push(0-(128&t[n])|127&t[n]);return e}return 0-(128&t)|127&t},T.parseChar=function(t){if("number"==typeof t)return new Char(String.fromCharCode(65535&t));if(t instanceof Array){const e=[];for(let n=0;n<t.length;n++)e.push(new Char(String.fromCharCode(65535&t[n])));return e}throw"char() may receive only one argument of type int, byte, int[], or byte[]."},T.parseFloat=function(t){if(t instanceof Array){const e=[];for(let n=0;n<t.length;n++)e.push(Pn(t[n]));return e}return Pn(t)},T.parseInt=function(t,e){if(t instanceof Array){const n=[];for(let s=0;s<t.length;s++)"string"!=typeof t[s]||/^\s*[+\-]?\d+\s*$/.test(t[s])?n.push(Cn(t[s],e)):n.push(0);return n}return Cn(t,e)},T.__int_cast=function(t){return 0|t},T.__instanceof=function(t,e){if("function"!=typeof e)throw"Function is expected as type argument for instanceof operator";if("string"==typeof t)return e===Object||e===String;if(t instanceof e)return!0;if("object"!=typeof t||null===t)return!1;let n=t.constructor;if(e.$isInterface){let t=[];for(;n;)n.$interfaces&&(t=t.concat(n.$interfaces)),n=n.$base;for(;t.length>0;){const n=t.shift();if(n===e)return!0;n.$interfaces&&(t=t.concat(n.$interfaces))}return!1}for(;n.hasOwnProperty("$base");)if((n=n.$base)===e)return!0;return!1},un.prototype.size=function(t,e,n){At&&T.stroke(0),gt&&T.fill(255);const s={fillStyle:M.fillStyle,strokeStyle:M.strokeStyle,lineCap:M.lineCap,lineJoin:M.lineJoin};E.style.length>0&&(E.style.removeProperty("width"),E.style.removeProperty("height")),E.width=T.width=t||100,E.height=T.height=e||100;for(const t in s)s.hasOwnProperty(t)&&(M[t]=s[t]);T.textFont(ge),T.background(),be=Math.max(1e3,t*e*.05),T.externals.context=M;for(let t=0;t<u.SINCOS_LENGTH;t++)Me[t]=T.sin(t*(u.PI/180)*.5),_e[t]=T.cos(t*(u.PI/180)*.5)},cn.prototype.size=function(t,n,s){M===e&&(M=E.getContext("2d"),ct=new yn,ft=new yn,ht=new gn,ut=new gn),un.prototype.size.apply(this,arguments)},fn.prototype.size=function(){let t=!1;return function(e,n,s){if(t)throw"Multiple calls to size() for 3D renders are not allowed.";t=!0;try{E.width=T.width=e||100,E.height=T.height=n||100,M=function(t){let e,n=["experimental-webgl","webgl","webkit-3d"];for(let s=0,i=n.length;s<i&&!(e=t.getContext(n[s],{antialias:!1,preserveDrawingBuffer:!0}));s++);return e}(E),J=M.createTexture(),tt=M.createTexture()}catch(t){w.debug(t)}if(!M)throw"WebGL context is not supported on this browser.";M.viewport(0,0,E.width,E.height),M.enable(M.DEPTH_TEST),M.enable(M.BLEND),M.blendFunc(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA),$=rn(M,"varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec2 aTextureCoord;uniform vec4 uColor;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;varying vec2 vTextureCoord;void main(void) {  gl_PointSize = uPointSize;  vFrontColor = uColor;  gl_Position = uProjection * uView * uModel * vec4(aVertex, 1.0);  vTextureCoord = aTextureCoord;}","#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform int uIsDrawingText;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  if(uIsDrawingText == 1){    float alpha = texture2D(uSampler, vTextureCoord).a;    gl_FragColor = vec4(vFrontColor.rgb * alpha, alpha);  }  else{    gl_FragColor = vFrontColor;  }}"),G=rn(M,"varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec4 aColor;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;void main(void) {  vFrontColor = aColor;  gl_PointSize = uPointSize;  gl_Position = uProjection * uView * vec4(aVertex, 1.0);}","#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  gl_FragColor = vFrontColor;}"),T.strokeWeight(1),B=rn(M,Qe,"#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform sampler2D uSampler;uniform bool uUsingTexture;varying vec2 vTexture;void main(void){  if( uUsingTexture ){    gl_FragColor = vec4(texture2D(uSampler, vTexture.xy)) * vFrontColor;  }  else{    gl_FragColor = vFrontColor;  }}"),M.useProgram(B),tn("usingTexture3d",B,"usingTexture",oe),T.lightFalloff(1,0,0),T.shininess(1),T.ambient(255,255,255),T.specular(0,0,0),T.emissive(0,0,0),V=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,V),M.bufferData(M.ARRAY_BUFFER,Ye,M.STATIC_DRAW),z=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,z),M.bufferData(M.ARRAY_BUFFER,We,M.STATIC_DRAW),U=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,U),M.bufferData(M.ARRAY_BUFFER,Ke,M.STATIC_DRAW),H=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,H),M.bufferData(M.ARRAY_BUFFER,Ze,M.STATIC_DRAW),X=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,X),M.bufferData(M.ARRAY_BUFFER,qe,M.STATIC_DRAW),j=M.createBuffer(),Y=M.createBuffer(),K=M.createBuffer(),W=M.createBuffer(),Z=M.createBuffer(),Q=M.createBuffer(),q=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,q),M.bufferData(M.ARRAY_BUFFER,new m([0,0,0]),M.STATIC_DRAW),et=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,et),M.bufferData(M.ARRAY_BUFFER,new m([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),M.STATIC_DRAW),nt=M.createBuffer(),M.bindBuffer(M.ARRAY_BUFFER,nt),M.bufferData(M.ARRAY_BUFFER,new m([0,0,1,0,1,1,0,1]),M.STATIC_DRAW),st=M.createBuffer(),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,st),M.bufferData(M.ELEMENT_ARRAY_BUFFER,new d([0,1,2,2,3,0]),M.STATIC_DRAW),at=new dn,lt=new dn,ht=new dn,ut=new dn,mt=new dn,T.camera(),T.perspective(),ct=new yn,ft=new yn,I=new dn,D=new dn,O=new dn,N=new dn,F=new dn,(k=new dn).set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0),un.prototype.size.apply(this,arguments)}}(),cn.prototype.ambientLight=un.prototype.a3DOnlyFunction,fn.prototype.ambientLight=function(t,e,n,s,i,r){if(Ee===u.MAX_LIGHTS)throw"can only create "+u.MAX_LIGHTS+" lights";const o=new PVector(s,i,r),a=new dn;a.scale(1,-1,1),a.apply(ht.array()),a.mult(o,o);const l=bn(t,e,n,0),h=[((l&u.RED_MASK)>>>16)/255,((l&u.GREEN_MASK)>>>8)/255,(l&u.BLUE_MASK)/255];M.useProgram(B),Je("uLights.color.3d."+Ee,B,"uLights"+Ee+".color",h),Je("uLights.position.3d."+Ee,B,"uLights"+Ee+".position",o.array()),tn("uLights.type.3d."+Ee,B,"uLights"+Ee+".type",0),tn("uLightCount3d",B,"uLightCount",++Ee)},cn.prototype.directionalLight=un.prototype.a3DOnlyFunction,fn.prototype.directionalLight=function(t,e,n,s,i,r){if(Ee===u.MAX_LIGHTS)throw"can only create "+u.MAX_LIGHTS+" lights";M.useProgram(B);let o=new dn;o.scale(1,-1,1),o.apply(ht.array());const a=[(o=o.array())[0]*s+o[4]*i+o[8]*r,o[1]*s+o[5]*i+o[9]*r,o[2]*s+o[6]*i+o[10]*r],l=bn(t,e,n,0),h=[((l&u.RED_MASK)>>>16)/255,((l&u.GREEN_MASK)>>>8)/255,(l&u.BLUE_MASK)/255];Je("uLights.color.3d."+Ee,B,"uLights"+Ee+".color",h),Je("uLights.position.3d."+Ee,B,"uLights"+Ee+".position",a),tn("uLights.type.3d."+Ee,B,"uLights"+Ee+".type",1),tn("uLightCount3d",B,"uLightCount",++Ee)},cn.prototype.lightFalloff=un.prototype.a3DOnlyFunction,fn.prototype.lightFalloff=function(t,e,n){M.useProgram(B),Je("uFalloff3d",B,"uFalloff",[t,e,n])},cn.prototype.lightSpecular=un.prototype.a3DOnlyFunction,fn.prototype.lightSpecular=function(t,e,n){const s=bn(t,e,n,0),i=[((s&u.RED_MASK)>>>16)/255,((s&u.GREEN_MASK)>>>8)/255,(s&u.BLUE_MASK)/255];M.useProgram(B),Je("uSpecular3d",B,"uSpecular",i)},T.lights=function(){T.ambientLight(128,128,128),T.directionalLight(128,128,128,0,0,-1),T.lightFalloff(1,0,0),T.lightSpecular(0,0,0)},cn.prototype.pointLight=un.prototype.a3DOnlyFunction,fn.prototype.pointLight=function(t,e,n,s,i,r){if(Ee===u.MAX_LIGHTS)throw"can only create "+u.MAX_LIGHTS+" lights";const o=new PVector(s,i,r),a=new dn;a.scale(1,-1,1),a.apply(ht.array()),a.mult(o,o);const l=bn(t,e,n,0),h=[((l&u.RED_MASK)>>>16)/255,((l&u.GREEN_MASK)>>>8)/255,(l&u.BLUE_MASK)/255];M.useProgram(B),Je("uLights.color.3d."+Ee,B,"uLights"+Ee+".color",h),Je("uLights.position.3d."+Ee,B,"uLights"+Ee+".position",o.array()),tn("uLights.type.3d."+Ee,B,"uLights"+Ee+".type",2),tn("uLightCount3d",B,"uLightCount",++Ee)},cn.prototype.noLights=un.prototype.a3DOnlyFunction,fn.prototype.noLights=function(){Ee=0,M.useProgram(B),tn("uLightCount3d",B,"uLightCount",Ee)},cn.prototype.spotLight=un.prototype.a3DOnlyFunction,fn.prototype.spotLight=function(t,e,n,s,i,r,o,a,l,h,c){if(Ee===u.MAX_LIGHTS)throw"can only create "+u.MAX_LIGHTS+" lights";M.useProgram(B);const f=new PVector(s,i,r);let p=new dn;p.scale(1,-1,1),p.apply(ht.array()),p.mult(f,f);const m=[(p=p.array())[0]*o+p[4]*a+p[8]*l,p[1]*o+p[5]*a+p[9]*l,p[2]*o+p[6]*a+p[10]*l],g=bn(t,e,n,0),d=[((g&u.RED_MASK)>>>16)/255,((g&u.GREEN_MASK)>>>8)/255,(g&u.BLUE_MASK)/255];Je("uLights.color.3d."+Ee,B,"uLights"+Ee+".color",d),Je("uLights.position.3d."+Ee,B,"uLights"+Ee+".position",f.array()),Je("uLights.direction.3d."+Ee,B,"uLights"+Ee+".direction",m),Je("uLights.concentration.3d."+Ee,B,"uLights"+Ee+".concentration",c),Je("uLights.angle.3d."+Ee,B,"uLights"+Ee+".angle",h),tn("uLights.type.3d."+Ee,B,"uLights"+Ee+".type",3),tn("uLightCount3d",B,"uLightCount",++Ee)},cn.prototype.beginCamera=function(){throw"beginCamera() is not available in 2D mode"},fn.prototype.beginCamera=function(){if(Re)throw"You cannot call beginCamera() again before calling endCamera()";Re=!0,ht=lt,ut=at},cn.prototype.endCamera=function(){throw"endCamera() is not available in 2D mode"},fn.prototype.endCamera=function(){if(!Re)throw"You cannot call endCamera() before calling beginCamera()";ht.set(at),ut.set(lt),Re=!1},T.camera=function(t,n,s,i,r,o,a,l,h){t===e&&(De=T.width/2,Oe=T.height/2,Ne=Oe/Math.tan(Ie/2),t=De,n=Oe,s=Ne,i=De,r=Oe,o=0,a=0,l=1,h=0);const u=new PVector(t-i,n-r,s-o);let c=new PVector(a,l,h);u.normalize();const f=PVector.cross(c,u);c=PVector.cross(u,f),f.normalize(),c.normalize();const p=f.x,m=f.y,g=f.z,d=c.x,y=c.y,b=c.z,A=u.x,x=u.y,w=u.z;at.set(p,m,g,0,d,y,b,0,A,x,w,0,0,0,0,1),at.translate(-t,-n,-s),lt.reset(),lt.invApply(p,m,g,0,d,y,b,0,A,x,w,0,0,0,0,1),lt.translate(t,n,s),ht.set(at),ut.set(lt)},T.perspective=function(t,e,n,s){let i,r,o,a;0===arguments.length&&(Oe=E.height/2,Ne=Oe/Math.tan(Ie/2),Fe=Ne/10,ke=10*Ne,Be=T.width/T.height,t=Ie,e=Be,n=Fe,s=ke),o=(i=n*Math.tan(t/2))*e,a=(r=-i)*e,T.frustum(a,o,r,i,n,s)},cn.prototype.frustum=function(){throw"Processing.js: frustum() is not supported in 2D mode"},fn.prototype.frustum=function(t,e,n,s,i,r){Le=!0,(mt=new dn).set(2*i/(e-t),0,(e+t)/(e-t),0,0,2*i/(s-n),(s+n)/(s-n),0,0,0,-(r+i)/(r-i),-2*r*i/(r-i),0,0,-1,0);const o=new dn;o.set(mt),o.transpose(),M.useProgram($),en("projection2d",$,"uProjection",!1,o.array()),M.useProgram(B),en("projection3d",B,"uProjection",!1,o.array()),M.useProgram(G),en("uProjectionUS",G,"uProjection",!1,o.array())},T.ortho=function(t,e,n,s,i,r){0===arguments.length&&(t=0,e=T.width,n=0,s=T.height,i=-10,r=10);const o=2/(e-t),a=2/(s-n),l=-2/(r-i),h=-(e+t)/(e-t),u=-(s+n)/(s-n),c=-(r+i)/(r-i);(mt=new dn).set(o,0,0,h,0,a,0,u,0,0,l,c,0,0,0,1);const f=new dn;f.set(mt),f.transpose(),M.useProgram($),en("projection2d",$,"uProjection",!1,f.array()),M.useProgram(B),en("projection3d",B,"uProjection",!1,f.array()),M.useProgram(G),en("uProjectionUS",G,"uProjection",!1,f.array()),Le=!1},T.printProjection=function(){mt.print()},T.printCamera=function(){at.print()},cn.prototype.box=un.prototype.a3DOnlyFunction,fn.prototype.box=function(t,e,n){e&&n||(e=n=t);const s=new dn;s.scale(t,e,n);const i=new dn;if(i.scale(1,-1,1),i.apply(ht.array()),i.transpose(),gt){if(M.useProgram(B),en("model3d",B,"uModel",!1,s.array()),en("view3d",B,"uView",!1,i.array()),M.enable(M.POLYGON_OFFSET_FILL),M.polygonOffset(1,1),Je("color3d",B,"uColor",dt),Ee>0){const t=new dn;t.set(i);const e=new dn;e.set(s),t.mult(e);const n=new dn;n.set(t),n.invert(),n.transpose(),en("uNormalTransform3d",B,"uNormalTransform",!1,n.array()),nn("aNormal3d",B,"aNormal",3,z)}else sn("aNormal3d",B,"aNormal");nn("aVertex3d",B,"aVertex",3,V),sn("aColor3d",B,"aColor"),sn("aTexture3d",B,"aTexture"),M.drawArrays(M.TRIANGLES,0,Ye.length/3),M.disable(M.POLYGON_OFFSET_FILL)}vt>0&&At&&(M.useProgram($),en("uModel2d",$,"uModel",!1,s.array()),en("uView2d",$,"uView",!1,i.array()),Je("uColor2d",$,"uColor",xt),tn("uIsDrawingText2d",$,"uIsDrawingText",!1),nn("vertex2d",$,"aVertex",3,U),sn("aTextureCoord2d",$,"aTextureCoord"),M.drawArrays(M.LINES,0,Ke.length/3))};function Tn(){gt&&(bt&&(M.fillStyle=T.color.toString(yt),bt=!1),M.fill())}function Mn(){At&&(Et&&(M.strokeStyle=T.color.toString(wt),Et=!1),M.stroke())}T.sphereDetail=function(t,e){let n;if(1===arguments.length&&(t=e=arguments[0]),t<3&&(t=3),e<2&&(e=2),t===Se&&e===ve)return;const s=u.SINCOS_LENGTH/t,i=new m(t),r=new m(t);for(n=0;n<t;n++)i[n]=_e[n*s%u.SINCOS_LENGTH|0],r[n]=Me[n*s%u.SINCOS_LENGTH|0];const o=t*(e-1)+2;let a=0;Pe=new m(o),Ce=new m(o),Te=new m(o);const l=.5*u.SINCOS_LENGTH/e;let h=l;for(n=1;n<e;n++){const e=Me[h%u.SINCOS_LENGTH|0],n=-_e[h%u.SINCOS_LENGTH|0];for(let s=0;s<t;s++)Pe[a]=i[s]*e,Ce[a]=n,Te[a++]=r[s]*e;h+=l}Se=t,ve=e,function(){let t,e,n,s;for(ot=[],t=0;t<Se;t++)ot.push(0),ot.push(-1),ot.push(0),ot.push(Pe[t]),ot.push(Ce[t]),ot.push(Te[t]);ot.push(0),ot.push(-1),ot.push(0),ot.push(Pe[0]),ot.push(Ce[0]),ot.push(Te[0]);let i=0;for(t=2;t<ve;t++){e=n=i,s=i+=Se;for(let t=0;t<Se;t++)ot.push(Pe[e]),ot.push(Ce[e]),ot.push(Te[e++]),ot.push(Pe[s]),ot.push(Ce[s]),ot.push(Te[s++]);e=n,s=i,ot.push(Pe[e]),ot.push(Ce[e]),ot.push(Te[e]),ot.push(Pe[s]),ot.push(Ce[s]),ot.push(Te[s])}for(t=0;t<Se;t++)s=i+t,ot.push(Pe[s]),ot.push(Ce[s]),ot.push(Te[s]),ot.push(0),ot.push(1),ot.push(0);ot.push(Pe[i]),ot.push(Ce[i]),ot.push(Te[i]),ot.push(0),ot.push(1),ot.push(0),M.bindBuffer(M.ARRAY_BUFFER,j),M.bufferData(M.ARRAY_BUFFER,new m(ot),M.STATIC_DRAW)}()},cn.prototype.sphere=un.prototype.a3DOnlyFunction,fn.prototype.sphere=function(){const t=arguments[0];(Se<3||ve<2)&&T.sphereDetail(30);const e=new dn;e.scale(t,t,t);const n=new dn;if(n.scale(1,-1,1),n.apply(ht.array()),n.transpose(),gt){if(Ee>0){const t=new dn;t.set(n);const s=new dn;s.set(e),t.mult(s);const i=new dn;i.set(t),i.invert(),i.transpose(),en("uNormalTransform3d",B,"uNormalTransform",!1,i.array()),nn("aNormal3d",B,"aNormal",3,j)}else sn("aNormal3d",B,"aNormal");M.useProgram(B),sn("aTexture3d",B,"aTexture"),en("uModel3d",B,"uModel",!1,e.array()),en("uView3d",B,"uView",!1,n.array()),nn("aVertex3d",B,"aVertex",3,j),sn("aColor3d",B,"aColor"),M.enable(M.POLYGON_OFFSET_FILL),M.polygonOffset(1,1),Je("uColor3d",B,"uColor",dt),M.drawArrays(M.TRIANGLE_STRIP,0,ot.length/3),M.disable(M.POLYGON_OFFSET_FILL)}vt>0&&At&&(M.useProgram($),en("uModel2d",$,"uModel",!1,e.array()),en("uView2d",$,"uView",!1,n.array()),nn("aVertex2d",$,"aVertex",3,j),sn("aTextureCoord2d",$,"aTextureCoord"),Je("uColor2d",$,"uColor",xt),tn("uIsDrawingText",$,"uIsDrawingText",!1),M.drawArrays(M.LINE_STRIP,0,ot.length/3))},T.modelX=function(t,e,n){const s=ht.array(),i=lt.array(),r=s[0]*t+s[1]*e+s[2]*n+s[3],o=s[4]*t+s[5]*e+s[6]*n+s[7],a=s[8]*t+s[9]*e+s[10]*n+s[11],l=s[12]*t+s[13]*e+s[14]*n+s[15],h=i[0]*r+i[1]*o+i[2]*a+i[3]*l,u=i[12]*r+i[13]*o+i[14]*a+i[15]*l;return 0!==u?h/u:h},T.modelY=function(t,e,n){const s=ht.array(),i=lt.array(),r=s[0]*t+s[1]*e+s[2]*n+s[3],o=s[4]*t+s[5]*e+s[6]*n+s[7],a=s[8]*t+s[9]*e+s[10]*n+s[11],l=s[12]*t+s[13]*e+s[14]*n+s[15],h=i[4]*r+i[5]*o+i[6]*a+i[7]*l,u=i[12]*r+i[13]*o+i[14]*a+i[15]*l;return 0!==u?h/u:h},T.modelZ=function(t,e,n){const s=ht.array(),i=lt.array(),r=s[0]*t+s[1]*e+s[2]*n+s[3],o=s[4]*t+s[5]*e+s[6]*n+s[7],a=s[8]*t+s[9]*e+s[10]*n+s[11],l=s[12]*t+s[13]*e+s[14]*n+s[15],h=i[8]*r+i[9]*o+i[10]*a+i[11]*l,u=i[12]*r+i[13]*o+i[14]*a+i[15]*l;return 0!==u?h/u:h},cn.prototype.ambient=un.prototype.a3DOnlyFunction,fn.prototype.ambient=function(t,e,n){M.useProgram(B),tn("uUsingMat3d",B,"uUsingMat",!0);const s=T.color(t,e,n);Je("uMaterialAmbient3d",B,"uMaterialAmbient",T.color.toGLArray(s).slice(0,3))},cn.prototype.emissive=un.prototype.a3DOnlyFunction,fn.prototype.emissive=function(t,e,n){M.useProgram(B),tn("uUsingMat3d",B,"uUsingMat",!0);const s=T.color(t,e,n);Je("uMaterialEmissive3d",B,"uMaterialEmissive",T.color.toGLArray(s).slice(0,3))},cn.prototype.shininess=un.prototype.a3DOnlyFunction,fn.prototype.shininess=function(t){M.useProgram(B),tn("uUsingMat3d",B,"uUsingMat",!0),Je("uShininess3d",B,"uShininess",t)},cn.prototype.specular=un.prototype.a3DOnlyFunction,fn.prototype.specular=function(t,e,n){M.useProgram(B),tn("uUsingMat3d",B,"uUsingMat",!0);const s=T.color(t,e,n);Je("uMaterialSpecular3d",B,"uMaterialSpecular",T.color.toGLArray(s).slice(0,3))},T.screenX=function(t,e,n){const s=ht.array();if(16===s.length){const i=s[0]*t+s[1]*e+s[2]*n+s[3],r=s[4]*t+s[5]*e+s[6]*n+s[7],o=s[8]*t+s[9]*e+s[10]*n+s[11],a=s[12]*t+s[13]*e+s[14]*n+s[15],l=mt.array();let h=l[0]*i+l[1]*r+l[2]*o+l[3]*a;const u=l[12]*i+l[13]*r+l[14]*o+l[15]*a;return 0!==u&&(h/=u),T.width*(1+h)/2}return ht.multX(t,e)},T.screenY=function(t,e,n){const s=ht.array();if(16===s.length){const i=s[0]*t+s[1]*e+s[2]*n+s[3],r=s[4]*t+s[5]*e+s[6]*n+s[7],o=s[8]*t+s[9]*e+s[10]*n+s[11],a=s[12]*t+s[13]*e+s[14]*n+s[15],l=mt.array();let h=l[4]*i+l[5]*r+l[6]*o+l[7]*a;const u=l[12]*i+l[13]*r+l[14]*o+l[15]*a;return 0!==u&&(h/=u),T.height*(1+h)/2}return ht.multY(t,e)},T.screenZ=function(t,e,n){const s=ht.array();if(16!==s.length)return 0;const i=mt.array(),r=s[0]*t+s[1]*e+s[2]*n+s[3],o=s[4]*t+s[5]*e+s[6]*n+s[7],a=s[8]*t+s[9]*e+s[10]*n+s[11],l=s[12]*t+s[13]*e+s[14]*n+s[15];let h=i[8]*r+i[9]*o+i[10]*a+i[11]*l;const u=i[12]*r+i[13]*o+i[14]*a+i[15]*l;return 0!==u&&(h/=u),(h+1)/2},un.prototype.fill=function(){const t=T.color.apply(this,arguments);t===yt&&gt||(gt=!0,yt=t)},cn.prototype.fill=function(){un.prototype.fill.apply(this,arguments),bt=!0},fn.prototype.fill=function(){un.prototype.fill.apply(this,arguments),dt=T.color.toGLArray(yt)},T.noFill=function(){gt=!1},un.prototype.stroke=function(){const t=T.color.apply(this,arguments);t===wt&&At||(At=!0,wt=t)},cn.prototype.stroke=function(){un.prototype.stroke.apply(this,arguments),Et=!0},fn.prototype.stroke=function(){un.prototype.stroke.apply(this,arguments),xt=T.color.toGLArray(wt)},T.noStroke=function(){At=!1},un.prototype.strokeWeight=function(t){vt=t},cn.prototype.strokeWeight=function(t){un.prototype.strokeWeight.apply(this,arguments),M.lineWidth=t},fn.prototype.strokeWeight=function(t){un.prototype.strokeWeight.apply(this,arguments),M.useProgram($),Je("pointSize2d",$,"uPointSize",t),M.useProgram(G),Je("pointSizeUnlitShape",G,"uPointSize",t),M.lineWidth(t)},T.strokeCap=function(t){R.$ensureContext().lineCap=t},T.strokeJoin=function(t){R.$ensureContext().lineJoin=t},cn.prototype.smooth=function(){Pt=!0;const t=E.style;t.setProperty("image-rendering","optimizeQuality","important"),t.setProperty("-ms-interpolation-mode","bicubic","important"),M.hasOwnProperty("mozImageSmoothingEnabled")&&(M.mozImageSmoothingEnabled=!0)},fn.prototype.smooth=function(){Pt=!0},cn.prototype.noSmooth=function(){Pt=!1;const t=E.style;t.setProperty("image-rendering","optimizeSpeed","important"),t.setProperty("image-rendering","-moz-crisp-edges","important"),t.setProperty("image-rendering","-webkit-optimize-contrast","important"),t.setProperty("image-rendering","optimize-contrast","important"),t.setProperty("-ms-interpolation-mode","nearest-neighbor","important"),M.hasOwnProperty("mozImageSmoothingEnabled")&&(M.mozImageSmoothingEnabled=!1)},fn.prototype.noSmooth=function(){Pt=!1},cn.prototype.point=function(t,e){At&&(Pt||(t=Math.round(t),e=Math.round(e)),M.fillStyle=T.color.toString(wt),bt=!0,vt>1?(M.beginPath(),M.arc(t,e,vt/2,0,u.TWO_PI,!1),M.fill()):M.fillRect(t,e,1,1))},fn.prototype.point=function(t,e,n){const s=new dn;s.translate(t,e,n||0),s.transpose();const i=new dn;i.scale(1,-1,1),i.apply(ht.array()),i.transpose(),M.useProgram($),en("uModel2d",$,"uModel",!1,s.array()),en("uView2d",$,"uView",!1,i.array()),vt>0&&At&&(Je("uColor2d",$,"uColor",xt),tn("uIsDrawingText2d",$,"uIsDrawingText",!1),tn("uSmooth2d",$,"uSmooth",Pt),nn("aVertex2d",$,"aVertex",3,q),sn("aTextureCoord2d",$,"aTextureCoord"),M.drawArrays(M.POINTS,0,1))},T.beginShape=function(t){Bt=t,$t=[],$e=[]},cn.prototype.vertex=function(t,e,n){const s=[];He&&(He=!1),s.isVert=!0,s[0]=t,s[1]=e,s[2]=0,s[3]=0,s[4]=0,s[5]=yt,s[6]=wt,$e.push(s),n&&($e[$e.length-1].moveTo=n)},fn.prototype.vertex=function(t,n,s,i,r){const o=[];He&&(He=!1),o.isVert=!0,r===e&&oe&&(r=i,i=s,s=0),i!==e&&r!==e&&(re===u.IMAGE&&(i/=ie.width,r/=ie.height),i=(i=i>1?1:i)<0?0:i,r=(r=r>1?1:r)<0?0:r),o[0]=t,o[1]=n,o[2]=s||0,o[3]=i||0,o[4]=r||0,o[5]=dt[0],o[6]=dt[1],o[7]=dt[2],o[8]=dt[3],o[9]=xt[0],o[10]=xt[1],o[11]=xt[2],o[12]=xt[3],o[13]=Rt,o[14]=Lt,o[15]=It,$e.push(o)};const _n=function(t,e){const n=new dn;n.scale(1,-1,1),n.apply(ht.array()),n.transpose(),M.useProgram(G),en("uViewUS",G,"uView",!1,n.array()),tn("uSmoothUS",G,"uSmooth",Pt),nn("aVertexUS",G,"aVertex",3,q),M.bufferData(M.ARRAY_BUFFER,new m(t),M.STREAM_DRAW),nn("aColorUS",G,"aColor",4,W),M.bufferData(M.ARRAY_BUFFER,new m(e),M.STREAM_DRAW),M.drawArrays(M.POINTS,0,t.length/3)},Rn=function(t,e,n){let s;s="LINES"===e?M.LINES:"LINE_LOOP"===e?M.LINE_LOOP:M.LINE_STRIP;const i=new dn;i.scale(1,-1,1),i.apply(ht.array()),i.transpose(),M.useProgram(G),en("uViewUS",G,"uView",!1,i.array()),nn("aVertexUS",G,"aVertex",3,Y),M.bufferData(M.ARRAY_BUFFER,new m(t),M.STREAM_DRAW),nn("aColorUS",G,"aColor",4,Z),M.bufferData(M.ARRAY_BUFFER,new m(n),M.STREAM_DRAW),M.drawArrays(s,0,t.length/3)},Ln=function(t,e,n,s){let i;i="TRIANGLES"===e?M.TRIANGLES:"TRIANGLE_FAN"===e?M.TRIANGLE_FAN:M.TRIANGLE_STRIP;const r=new dn;r.scale(1,-1,1),r.apply(ht.array()),r.transpose(),M.useProgram(B),en("model3d",B,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),en("view3d",B,"uView",!1,r.array()),M.enable(M.POLYGON_OFFSET_FILL),M.polygonOffset(1,1),Je("color3d",B,"uColor",[-1,0,0,0]),nn("vertex3d",B,"aVertex",3,K),M.bufferData(M.ARRAY_BUFFER,new m(t),M.STREAM_DRAW),oe&&null!==Qt&&Jt(n),nn("aColor3d",B,"aColor",4,W),M.bufferData(M.ARRAY_BUFFER,new m(n),M.STREAM_DRAW),sn("aNormal3d",B,"aNormal"),oe&&(tn("uUsingTexture3d",B,"uUsingTexture",oe),nn("aTexture3d",B,"aTexture",2,Q),M.bufferData(M.ARRAY_BUFFER,new m(s),M.STREAM_DRAW)),M.drawArrays(i,0,t.length/3),M.disable(M.POLYGON_OFFSET_FILL)};function In(){Tn(),Mn(),M.closePath()}cn.prototype.endShape=function(t){if(0===$e.length)return;const n=t===u.CLOSE;n&&$e.push($e[0]);const s=[],i=[],r=[],o=[];let a,l,h;He=!0;const c=$e.length;for(l=0;l<c;l++)for(a=$e[l],h=0;h<3;h++)s.push(a[h]);for(l=0;l<c;l++)for(a=$e[l],h=5;h<9;h++)i.push(a[h]);for(l=0;l<c;l++)for(a=$e[l],h=9;h<13;h++)r.push(a[h]);for(l=0;l<c;l++)a=$e[l],o.push(a[3]),o.push(a[4]);if(!ze||Bt!==u.POLYGON&&Bt!==e)if(!Ue||Bt!==u.POLYGON&&Bt!==e)if(Bt===u.POINTS)for(l=0;l<c;l++)a=$e[l],At&&T.stroke(a[6]),T.point(a[0],a[1]);else if(Bt===u.LINES)for(l=0;l+1<c;l+=2)a=$e[l],At&&T.stroke($e[l+1][6]),T.line(a[0],a[1],$e[l+1][0],$e[l+1][1]);else if(Bt===u.TRIANGLES)for(l=0;l+2<c;l+=3)a=$e[l],M.beginPath(),M.moveTo(a[0],a[1]),M.lineTo($e[l+1][0],$e[l+1][1]),M.lineTo($e[l+2][0],$e[l+2][1]),M.lineTo(a[0],a[1]),gt&&(T.fill($e[l+2][5]),Tn()),At&&(T.stroke($e[l+2][6]),Mn()),M.closePath();else if(Bt===u.TRIANGLE_STRIP)for(l=0;l+1<c;l++)a=$e[l],M.beginPath(),M.moveTo($e[l+1][0],$e[l+1][1]),M.lineTo(a[0],a[1]),At&&T.stroke($e[l+1][6]),gt&&T.fill($e[l+1][5]),l+2<c&&(M.lineTo($e[l+2][0],$e[l+2][1]),At&&T.stroke($e[l+2][6]),gt&&T.fill($e[l+2][5])),In();else if(Bt===u.TRIANGLE_FAN){if(c>2)for(M.beginPath(),M.moveTo($e[0][0],$e[0][1]),M.lineTo($e[1][0],$e[1][1]),M.lineTo($e[2][0],$e[2][1]),gt&&(T.fill($e[2][5]),Tn()),At&&(T.stroke($e[2][6]),Mn()),M.closePath(),l=3;l<c;l++)a=$e[l],M.beginPath(),M.moveTo($e[0][0],$e[0][1]),M.lineTo($e[l-1][0],$e[l-1][1]),M.lineTo(a[0],a[1]),gt&&(T.fill(a[5]),Tn()),At&&(T.stroke(a[6]),Mn()),M.closePath()}else if(Bt===u.QUADS)for(l=0;l+3<c;l+=4){for(a=$e[l],M.beginPath(),M.moveTo(a[0],a[1]),h=1;h<4;h++)M.lineTo($e[l+h][0],$e[l+h][1]);M.lineTo(a[0],a[1]),gt&&(T.fill($e[l+3][5]),Tn()),At&&(T.stroke($e[l+3][6]),Mn()),M.closePath()}else if(Bt===u.QUAD_STRIP){if(c>3)for(l=0;l+1<c;l+=2)a=$e[l],M.beginPath(),l+3<c?(M.moveTo($e[l+2][0],$e[l+2][1]),M.lineTo(a[0],a[1]),M.lineTo($e[l+1][0],$e[l+1][1]),M.lineTo($e[l+3][0],$e[l+3][1]),gt&&T.fill($e[l+3][5]),At&&T.stroke($e[l+3][6])):(M.moveTo(a[0],a[1]),M.lineTo($e[l+1][0],$e[l+1][1])),In()}else{for(M.beginPath(),M.moveTo($e[0][0],$e[0][1]),l=1;l<c;l++)(a=$e[l]).isVert&&(a.moveTo?M.moveTo(a[0],a[1]):M.lineTo(a[0],a[1]));In()}else{for(M.beginPath(),l=0;l<c;l++)a=$e[l],$e[l].isVert?$e[l].moveTo?M.moveTo(a[0],a[1]):M.lineTo(a[0],a[1]):M.bezierCurveTo($e[l][0],$e[l][1],$e[l][2],$e[l][3],$e[l][4],$e[l][5]);In()}else if(c>3){const t=[],e=1-Gt;for(M.beginPath(),M.moveTo($e[1][0],$e[1][1]),l=1;l+2<c;l++)a=$e[l],t[0]=[a[0],a[1]],t[1]=[a[0]+(e*$e[l+1][0]-e*$e[l-1][0])/6,a[1]+(e*$e[l+1][1]-e*$e[l-1][1])/6],t[2]=[$e[l+1][0]+(e*$e[l][0]-e*$e[l+2][0])/6,$e[l+1][1]+(e*$e[l][1]-e*$e[l+2][1])/6],t[3]=[$e[l+1][0],$e[l+1][1]],M.bezierCurveTo(t[1][0],t[1][1],t[2][0],t[2][1],t[3][0],t[3][1]);In()}ze=!1,Ue=!1,Ge=[],Ve=0,n&&$e.pop()},fn.prototype.endShape=function(t){if(0===$e.length)return;const n=t===u.CLOSE;let s,i,r,o,a=[],l=[],h=[],c=[],f=[];He=!0;const p=$e.length;for(i=0;i<p;i++)for(s=$e[i],r=0;r<3;r++)l.push(s[r]);for(i=0;i<p;i++)for(s=$e[i],r=5;r<9;r++)h.push(s[r]);for(i=0;i<p;i++)for(s=$e[i],r=9;r<13;r++)c.push(s[r]);for(i=0;i<p;i++)s=$e[i],f.push(s[3]),f.push(s[4]);if(n){for(l.push($e[0][0]),l.push($e[0][1]),l.push($e[0][2]),i=5;i<9;i++)h.push($e[0][i]);for(i=9;i<13;i++)c.push($e[0][i]);f.push($e[0][3]),f.push($e[0][4])}if(!ze||Bt!==u.POLYGON&&Bt!==e)if(!Ue||Bt!==u.POLYGON&&Bt!==e){if(Bt===u.POINTS){for(i=0;i<p;i++)for(s=$e[i],r=0;r<3;r++)a.push(s[r]);_n(a,c)}else if(Bt===u.LINES){for(i=0;i<p;i++)for(s=$e[i],r=0;r<3;r++)a.push(s[r]);for(i=0;i<p;i++)for(s=$e[i],r=5;r<9;r++)h.push(s[r]);Rn(a,"LINES",c)}else if(Bt===u.TRIANGLES){if(p>2)for(i=0;i+2<p;i+=3){for(l=[],f=[],a=[],h=[],c=[],r=0;r<3;r++)for(o=0;o<3;o++)a.push($e[i+r][o]),l.push($e[i+r][o]);for(r=0;r<3;r++)for(o=3;o<5;o++)f.push($e[i+r][o]);for(r=0;r<3;r++)for(o=5;o<9;o++)h.push($e[i+r][o]),c.push($e[i+r][o+4]);At&&Rn(a,"LINE_LOOP",c),(gt||oe)&&Ln(l,"TRIANGLES",h,f)}}else if(Bt===u.TRIANGLE_STRIP){if(p>2)for(i=0;i+2<p;i++){for(a=[],l=[],c=[],h=[],f=[],r=0;r<3;r++)for(o=0;o<3;o++)a.push($e[i+r][o]),l.push($e[i+r][o]);for(r=0;r<3;r++)for(o=3;o<5;o++)f.push($e[i+r][o]);for(r=0;r<3;r++)for(o=5;o<9;o++)c.push($e[i+r][o+4]),h.push($e[i+r][o]);(gt||oe)&&Ln(l,"TRIANGLE_STRIP",h,f),At&&Rn(a,"LINE_LOOP",c)}}else if(Bt===u.TRIANGLE_FAN){if(p>2){for(i=0;i<3;i++)for(s=$e[i],r=0;r<3;r++)a.push(s[r]);for(i=0;i<3;i++)for(s=$e[i],r=9;r<13;r++)c.push(s[r]);for(At&&Rn(a,"LINE_LOOP",c),i=2;i+1<p;i++){for(c=[],(a=[]).push($e[0][0]),a.push($e[0][1]),a.push($e[0][2]),c.push($e[0][9]),c.push($e[0][10]),c.push($e[0][11]),c.push($e[0][12]),r=0;r<2;r++)for(o=0;o<3;o++)a.push($e[i+r][o]);for(r=0;r<2;r++)for(o=9;o<13;o++)c.push($e[i+r][o]);At&&Rn(a,"LINE_STRIP",c)}(gt||oe)&&Ln(l,"TRIANGLE_FAN",h,f)}}else if(Bt===u.QUADS)for(i=0;i+3<p;i+=4){for(a=[],r=0;r<4;r++)for(s=$e[i+r],o=0;o<3;o++)a.push(s[o]);if(At&&Rn(a,"LINE_LOOP",c),gt){for(l=[],h=[],f=[],r=0;r<3;r++)l.push($e[i][r]);for(r=5;r<9;r++)h.push($e[i][r]);for(r=0;r<3;r++)l.push($e[i+1][r]);for(r=5;r<9;r++)h.push($e[i+1][r]);for(r=0;r<3;r++)l.push($e[i+3][r]);for(r=5;r<9;r++)h.push($e[i+3][r]);for(r=0;r<3;r++)l.push($e[i+2][r]);for(r=5;r<9;r++)h.push($e[i+2][r]);oe&&(f.push($e[i+0][3]),f.push($e[i+0][4]),f.push($e[i+1][3]),f.push($e[i+1][4]),f.push($e[i+3][3]),f.push($e[i+3][4]),f.push($e[i+2][3]),f.push($e[i+2][4])),Ln(l,"TRIANGLE_STRIP",h,f)}}else if(Bt===u.QUAD_STRIP){let t=[];if(p>3){for(i=0;i<2;i++)for(s=$e[i],r=0;r<3;r++)a.push(s[r]);for(i=0;i<2;i++)for(s=$e[i],r=9;r<13;r++)c.push(s[r]);for(Rn(a,"LINE_STRIP",c),p>4&&p%2>0&&(t=l.splice(l.length-3),$e.pop()),i=0;i+3<p;i+=2){for(a=[],c=[],r=0;r<3;r++)a.push($e[i+1][r]);for(r=0;r<3;r++)a.push($e[i+3][r]);for(r=0;r<3;r++)a.push($e[i+2][r]);for(r=0;r<3;r++)a.push($e[i+0][r]);for(r=9;r<13;r++)c.push($e[i+1][r]);for(r=9;r<13;r++)c.push($e[i+3][r]);for(r=9;r<13;r++)c.push($e[i+2][r]);for(r=9;r<13;r++)c.push($e[i+0][r]);At&&Rn(a,"LINE_STRIP",c)}(gt||oe)&&Ln(l,"TRIANGLE_LIST",h,f)}}else if(1===p){for(r=0;r<3;r++)a.push($e[0][r]);for(r=9;r<13;r++)c.push($e[0][r]);_n(a,c)}else{for(i=0;i<p;i++){for(s=$e[i],r=0;r<3;r++)a.push(s[r]);for(r=5;r<9;r++)c.push(s[r])}At&&n?Rn(a,"LINE_LOOP",c):At&&!n&&Rn(a,"LINE_STRIP",c),(gt||oe)&&Ln(l,"TRIANGLE_FAN",h,f)}oe=!1,M.useProgram(B),tn("usingTexture3d",B,"uUsingTexture",oe)}else(a=l).splice(a.length-3),c.splice(c.length-4),At&&Rn(a,null,c),gt&&Ln(l,"TRIANGLES",h);else a=l,At&&Rn(a,null,c),gt&&Ln(l,null,h);ze=!1,Ue=!1,Ge=[],Ve=0};const Dn=function(t,e){const n=1/t,s=n*n,i=s*n;e.set(0,0,0,1,i,s,n,0,6*i,2*s,0,0,6*i,0,0,0)},On=function(){O||(I=new dn,O=new dn,zt=!0);const t=Gt;I.set((t-1)/2,(t+3)/2,(-3-t)/2,(1-t)/2,1-t,(-5-t)/2,t+2,(t-1)/2,(t-1)/2,0,(1-t)/2,0,0,1,0,0),Dn(Vt,O),F||(D=new dn),D.set(I),D.preApply(F),O.apply(I)};cn.prototype.bezierVertex=function(){Ue=!0;const t=[];if(He)throw"vertex() must be used at least once before calling bezierVertex()";for(let e=0;e<arguments.length;e++)t[e]=arguments[e];$e.push(t),$e[$e.length-1].isVert=!1},fn.prototype.bezierVertex=function(){Ue=!0;if(He)throw"vertex() must be used at least once before calling bezierVertex()";if(9===arguments.length){N===e&&(N=new dn);const t=$e.length-1;Dn(Ht,N),N.apply(k);const n=N.array();let s=$e[t][0],i=$e[t][1],r=$e[t][2],o=n[4]*s+n[5]*arguments[0]+n[6]*arguments[3]+n[7]*arguments[6],a=n[8]*s+n[9]*arguments[0]+n[10]*arguments[3]+n[11]*arguments[6];const l=n[12]*s+n[13]*arguments[0]+n[14]*arguments[3]+n[15]*arguments[6];let h=n[4]*i+n[5]*arguments[1]+n[6]*arguments[4]+n[7]*arguments[7],u=n[8]*i+n[9]*arguments[1]+n[10]*arguments[4]+n[11]*arguments[7];const c=n[12]*i+n[13]*arguments[1]+n[14]*arguments[4]+n[15]*arguments[7];let f=n[4]*r+n[5]*arguments[2]+n[6]*arguments[5]+n[7]*arguments[8],p=n[8]*r+n[9]*arguments[2]+n[10]*arguments[5]+n[11]*arguments[8];const m=n[12]*r+n[13]*arguments[2]+n[14]*arguments[5]+n[15]*arguments[8];for(let t=0;t<Ht;t++)s+=o,o+=a,a+=l,i+=h,h+=u,u+=c,r+=f,f+=p,p+=m,T.vertex(s,i,r);T.vertex(arguments[6],arguments[7],arguments[8])}},T.texture=function(t){const e=R.$ensureContext();if(t.__texture)e.bindTexture(e.TEXTURE_2D,t.__texture);else if("canvas"===t.localName)e.bindTexture(e.TEXTURE_2D,J),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.generateMipmap(e.TEXTURE_2D),ie.width=t.width,ie.height=t.height;else{let n,s=e.createTexture(),i=l.createElement("canvas"),r=i.getContext("2d");if(t.width&t.width-1==0)i.width=t.width;else{for(n=1;n<t.width;)n*=2;i.width=n}if(t.height&t.height-1==0)i.height=t.height;else{for(n=1;n<t.height;)n*=2;i.height=n}r.drawImage(t.sourceImg,0,0,t.width,t.height,0,0,i.width,i.height),e.bindTexture(e.TEXTURE_2D,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.generateMipmap(e.TEXTURE_2D),t.__texture=s,ie.width=t.width,ie.height=t.height}oe=!0,e.useProgram(B),tn("usingTexture3d",B,"uUsingTexture",oe)},T.textureMode=function(t){re=t};cn.prototype.curveVertex=function(t,e){ze=!0,T.vertex(t,e)},fn.prototype.curveVertex=function(t,e,n){ze=!0,zt||On();const s=[];s[0]=t,s[1]=e,s[2]=n,Ge.push(s),++Ve>3&&function(t,e,n,s,i,r,o,a,l,h,u,c){let f=s,p=i,m=r;const g=O.array();let d=g[4]*t+g[5]*s+g[6]*o+g[7]*h,y=g[8]*t+g[9]*s+g[10]*o+g[11]*h;const b=g[12]*t+g[13]*s+g[14]*o+g[15]*h;let A=g[4]*e+g[5]*i+g[6]*a+g[7]*u,x=g[8]*e+g[9]*i+g[10]*a+g[11]*u;const w=g[12]*e+g[13]*i+g[14]*a+g[15]*u;let E=g[4]*n+g[5]*r+g[6]*l+g[7]*c,v=g[8]*n+g[9]*r+g[10]*l+g[11]*c;const S=g[12]*n+g[13]*r+g[14]*l+g[15]*c;T.vertex(f,p,m);for(let t=0;t<Vt;t++)f+=d,d+=y,y+=b,p+=A,A+=x,x+=w,m+=E,E+=v,v+=S,T.vertex(f,p,m)}(Ge[Ve-4][0],Ge[Ve-4][1],Ge[Ve-4][2],Ge[Ve-3][0],Ge[Ve-3][1],Ge[Ve-3][2],Ge[Ve-2][0],Ge[Ve-2][1],Ge[Ve-2][2],Ge[Ve-1][0],Ge[Ve-1][1],Ge[Ve-1][2])},cn.prototype.curve=function(t,e,n,s,i,r,o,a){T.beginShape(),T.curveVertex(t,e),T.curveVertex(n,s),T.curveVertex(i,r),T.curveVertex(o,a),T.endShape()},fn.prototype.curve=function(t,n,s,i,r,o,a,l,h,u,c,f){if(f!==e)return T.beginShape(),T.curveVertex(t,n,s),T.curveVertex(i,r,o),T.curveVertex(a,l,h),T.curveVertex(u,c,f),void T.endShape();T.beginShape(),T.curveVertex(t,n),T.curveVertex(s,i),T.curveVertex(r,o),T.curveVertex(a,l),T.endShape()},T.curveTightness=function(t){Gt=t},T.curveDetail=function(t){Vt=t,On()},T.rectMode=function(t){Mt=t},T.imageMode=function(t){switch(t){case u.CORNER:an=on;break;case u.CORNERS:an=ln;break;case u.CENTER:an=hn;break;default:throw"Invalid imageMode"}},T.ellipseMode=function(t){_t=t},T.arc=function(t,e,n,s,i,r,o){if(n<=0||r<i)return;for(_t===u.CORNERS?(n-=t,s-=e):_t===u.RADIUS?(t-=n,e-=s,n*=2,s*=2):_t===u.CENTER&&(t-=n/2,e-=s/2);i<0;)i+=u.TWO_PI,r+=u.TWO_PI;r-i>u.TWO_PI&&(r=i+u.TWO_PI);const a=n/2,l=s/2,h=t+a,c=e+l,f=function(t,e,n,s,i){return function(r,f,p,m,g){for(p=0,m=n,g=i+s,r.beginShape(),f&&r.vertex(t-.5,e-.5);m<g;m=++p*s+n)r.vertex(t+Math.cos(m)*a|0,e+Math.sin(m)*l|0);o===u.OPEN&&gt?r.vertex(h+Math.cos(n)*a,c+Math.sin(n)*l):o===u.CHORD?r.vertex(h+Math.cos(n)*a,c+Math.sin(n)*l):o===u.PIE&&(r.line(h+Math.cos(n)*a,c+Math.sin(n)*l,h,c),r.line(h,c,h+Math.cos(i)*a,c+Math.sin(i)*l)),r.endShape(f?u.CLOSE:void 0)}}(h+.5,c+.5,i,1/(a+l),r);if(gt){const t=At;At=!1,f(T,!0),At=t}if(At){const t=gt;gt=!1,f(T),gt=t}},cn.prototype.line=function(t,n,s,i){if(!At)return;if(Pt||(t=Math.round(t),s=Math.round(s),n=Math.round(n),i=Math.round(i)),t===s&&n===i)return void T.point(t,n);let r=e,o=e,a=!0,l=ht.array(),h=[1,0,0,0,1,0];for(let t=0;t<6&&a;t++)a=l[t]===h[t];a&&(t===s?(n>i&&(r=n,n=i,i=r),i++,vt%2==1&&M.translate(.5,0)):n===i&&(t>s&&(r=t,t=s,s=r),s++,vt%2==1&&M.translate(0,.5)),1===vt&&(o=M.lineCap,M.lineCap="butt")),M.beginPath(),M.moveTo(t||0,n||0),M.lineTo(s||0,i||0),Mn(),a&&(t===s&&vt%2==1?M.translate(-.5,0):n===i&&vt%2==1&&M.translate(0,-.5),1===vt&&(M.lineCap=o))},fn.prototype.line=function(t,n,s,i,r,o){if(r!==e&&o!==e||(o=0,r=i,i=s,s=0),t===i&&n===r&&s===o)return void T.point(t,n,s);const a=[t,n,s,i,r,o],l=new dn;l.scale(1,-1,1),l.apply(ht.array()),l.transpose(),vt>0&&At&&(M.useProgram($),en("uModel2d",$,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),en("uView2d",$,"uView",!1,l.array()),Je("uColor2d",$,"uColor",xt),tn("uIsDrawingText",$,"uIsDrawingText",!1),nn("aVertex2d",$,"aVertex",3,Y),sn("aTextureCoord2d",$,"aTextureCoord"),M.bufferData(M.ARRAY_BUFFER,new m(a),M.STREAM_DRAW),M.drawArrays(M.LINES,0,2))},cn.prototype.bezier=function(){if(8!==arguments.length)throw"You must use 8 parameters for bezier() in 2D mode";T.beginShape(),T.vertex(arguments[0],arguments[1]),T.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]),T.endShape()},fn.prototype.bezier=function(){if(12!==arguments.length)throw"You must use 12 parameters for bezier() in 3D mode";T.beginShape(),T.vertex(arguments[0],arguments[1],arguments[2]),T.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]),T.endShape()},T.bezierDetail=function(t){Ht=t},T.bezierPoint=function(t,e,n,s,i){return(1-i)*(1-i)*(1-i)*t+3*(1-i)*(1-i)*i*e+3*(1-i)*i*i*n+i*i*i*s},T.bezierTangent=function(t,e,n,s,i){return 3*i*i*(3*e-t-3*n+s)+6*i*(t-2*e+n)+3*(-t+e)},T.curvePoint=function(t,e,n,s,i){return.5*(2*e+(-t+n)*i+(2*t-5*e+4*n-s)*i*i+(3*e-t-3*n+s)*i*i*i)},T.curveTangent=function(t,e,n,s,i){return.5*(-t+n+2*(2*t-5*e+4*n-s)*i+3*(3*e-t-3*n+s)*i*i)},T.triangle=function(t,e,n,s,i,r){T.beginShape(u.TRIANGLES),T.vertex(t,e,0),T.vertex(n,s,0),T.vertex(i,r,0),T.endShape()},T.quad=function(t,e,n,s,i,r,o,a){T.beginShape(u.QUADS),T.vertex(t,e,0),T.vertex(n,s,0),T.vertex(i,r,0),T.vertex(o,a,0),T.endShape()};cn.prototype.rect=function(t,n,s,i,r,o,a,l){s!=""+s&&i!=""+i||(Mt===u.CORNERS?(s-=t,i-=n):Mt===u.RADIUS?(t-=(s*=2)/2,n-=(i*=2)/2):Mt===u.CENTER&&(t-=s/2,n-=i/2),Pt||(t=Math.round(t),n=Math.round(n),s=Math.round(s),i=Math.round(i)),r===e?(At&&vt%2==1&&M.translate(.5,.5),M.beginPath(),M.rect(t,n,s,i),Tn(),Mn(),At&&vt%2==1&&M.translate(-.5,-.5)):function(t,n,s,i,r,o,a,l){l===e&&(o=r,a=r,l=r);const h=s/2,u=i/2;(r>h||r>u)&&(r=Math.min(h,u)),(o>h||o>u)&&(o=Math.min(h,u)),(a>h||a>u)&&(a=Math.min(h,u)),(l>h||l>u)&&(l=Math.min(h,u)),gt&&!At||M.translate(.5,.5),M.beginPath(),M.moveTo(t+r,n),M.lineTo(t+s-o,n),M.quadraticCurveTo(t+s,n,t+s,n+o),M.lineTo(t+s,n+i-a),M.quadraticCurveTo(t+s,n+i,t+s-a,n+i),M.lineTo(t+l,n+i),M.quadraticCurveTo(t,n+i,t,n+i-l),M.lineTo(t,n+r),M.quadraticCurveTo(t,n,t+r,n),gt&&!At||M.translate(-.5,-.5),Tn(),Mn()}(t,n,s,i,r,o,a,l))},fn.prototype.rect=function(t,n,s,i,r,o,a,l){if(r!==e)throw"rect() with rounded corners is not supported in 3D mode";Mt===u.CORNERS?(s-=t,i-=n):Mt===u.RADIUS?(t-=(s*=2)/2,n-=(i*=2)/2):Mt===u.CENTER&&(t-=s/2,n-=i/2);const h=new dn;h.translate(t,n,0),h.scale(s,i,1),h.transpose();const c=new dn;if(c.scale(1,-1,1),c.apply(ht.array()),c.transpose(),vt>0&&At&&(M.useProgram($),en("uModel2d",$,"uModel",!1,h.array()),en("uView2d",$,"uView",!1,c.array()),Je("uColor2d",$,"uColor",xt),tn("uIsDrawingText2d",$,"uIsDrawingText",!1),nn("aVertex2d",$,"aVertex",3,H),sn("aTextureCoord2d",$,"aTextureCoord"),M.drawArrays(M.LINE_LOOP,0,Ze.length/3)),gt){if(M.useProgram(B),en("uModel3d",B,"uModel",!1,h.array()),en("uView3d",B,"uView",!1,c.array()),M.enable(M.POLYGON_OFFSET_FILL),M.polygonOffset(1,1),Je("color3d",B,"uColor",dt),Ee>0){const t=new dn;t.set(c);const e=new dn;e.set(h),t.mult(e);const n=new dn;n.set(t),n.invert(),n.transpose(),en("uNormalTransform3d",B,"uNormalTransform",!1,n.array()),nn("aNormal3d",B,"aNormal",3,X)}else sn("normal3d",B,"aNormal");nn("vertex3d",B,"aVertex",3,H),M.drawArrays(M.TRIANGLE_FAN,0,Ze.length/3),M.disable(M.POLYGON_OFFSET_FILL)}},cn.prototype.ellipse=function(t,e,n,s){if(t=t||0,e=e||0,!(n<=0&&s<=0))if(_t===u.RADIUS?(n*=2,s*=2):_t===u.CORNERS?(t+=(n-=t)/2,e+=(s-=e)/2):_t===u.CORNER&&(t+=n/2,e+=s/2),n===s)M.beginPath(),M.arc(t,e,n/2,0,u.TWO_PI,!1),Tn(),Mn();else{const i=n/2,r=s/2,o=.5522847498307933,a=o*i,l=o*r;T.beginShape(),T.vertex(t+i,e),T.bezierVertex(t+i,e-l,t+a,e-r,t,e-r),T.bezierVertex(t-a,e-r,t-i,e-l,t-i,e),T.bezierVertex(t-i,e+l,t-a,e+r,t,e+r),T.bezierVertex(t+a,e+r,t+i,e+l,t+i,e),T.endShape()}},fn.prototype.ellipse=function(t,e,n,s){if(t=t||0,e=e||0,n<=0&&s<=0)return;_t===u.RADIUS?(n*=2,s*=2):_t===u.CORNERS?(t+=(n-=t)/2,e+=(s-=e)/2):_t===u.CORNER&&(t+=n/2,e+=s/2);const i=n/2,r=s/2,o=.5522847498307933,a=o*i,l=o*r;if(T.beginShape(),T.vertex(t+i,e),T.bezierVertex(t+i,e-l,0,t+a,e-r,0,t,e-r,0),T.bezierVertex(t-a,e-r,0,t-i,e-l,0,t-i,e,0),T.bezierVertex(t-i,e+l,0,t-a,e+r,0,t,e+r,0),T.bezierVertex(t+a,e+r,0,t+i,e+l,0,t+i,e,0),T.endShape(),gt){let t,e,n=0,s=0;for(t=0;t<$e.length;t++)n+=$e[t][0],s+=$e[t][1];n/=$e.length,s/=$e.length;const i=[],r=[],o=[];for(i[0]=n,i[1]=s,i[2]=0,i[3]=0,i[4]=0,i[5]=dt[0],i[6]=dt[1],i[7]=dt[2],i[8]=dt[3],i[9]=xt[0],i[10]=xt[1],i[11]=xt[2],i[12]=xt[3],i[13]=Rt,i[14]=Lt,i[15]=It,$e.unshift(i),t=0;t<$e.length;t++){for(e=0;e<3;e++)r.push($e[t][e]);for(e=5;e<9;e++)o.push($e[t][e])}Ln(r,"TRIANGLE_FAN",o)}},T.normal=function(t,e,n){if(3!==arguments.length||"number"!=typeof t||"number"!=typeof e||"number"!=typeof n)throw"normal() requires three numeric arguments.";Rt=t,Lt=e,It=n,0!==Bt&&(Dt===u.NORMAL_MODE_AUTO?Dt=u.NORMAL_MODE_SHAPE:Dt===u.NORMAL_MODE_SHAPE&&(Dt=u.NORMAL_MODE_VERTEX))},T.save=function(t,n){return n!==e?a.open(n.toDataURL(),"_blank"):a.open(T.externals.canvas.toDataURL(),"_blank")};let Nn=0;T.saveFrame=function(t){t===e&&(t="screen-####.png");const n=t.replace(/#+/,function(t){let e=""+Nn++;for(;e.length<t.length;)e="0"+e;return e});T.save(n)};const Fn=l.createElement("canvas").getContext("2d"),kn=[e,e,e];function Bn(t,n,s){let i=kn.shift();i===e&&((i={}).canvas=l.createElement("canvas"),i.context=i.canvas.getContext("2d")),kn.push(i);const r=i.canvas,o=i.context,a=n||t.width,h=s||t.height;return r.width=a,r.height=h,t?"data"in t?o.putImageData(t,0,0):(o.clearRect(0,0,a,h),o.drawImage(t,0,0,a,h)):o.clearRect(0,0,a,h),i}const $n=function(t,e,n){if(this.__isDirty=!1,t instanceof f)this.fromHTMLImageData(t);else if(e||n){this.width=t||1,this.height=e||1;const s=this.sourceImg=l.createElement("canvas");s.width=this.width,s.height=this.height;this.imageData=s.getContext("2d").createImageData(this.width,this.height);if(this.format=n===u.ARGB||n===u.ALPHA?n:u.RGB,this.format===u.RGB)for(let t=3,e=this.imageData.data,n=e.length;t<n;t+=4)e[t]=255;this.__isDirty=!0,this.updatePixels()}else this.width=0,this.height=0,this.imageData=Fn.createImageData(1,1),this.format=u.ARGB;var s,i;this.pixels={getLength:(i=s=this,function(){if(i.isRemote)throw"Image is loaded remotely. Cannot get length.";return i.imageData.data.length?i.imageData.data.length/4:0}),getPixel:function(t){return function(e){const n=4*e,s=t.imageData.data;if(t.isRemote)throw"Image is loaded remotely. Cannot get pixels.";return s[n+3]<<24&u.ALPHA_MASK|s[n]<<16&u.RED_MASK|s[n+1]<<8&u.GREEN_MASK|s[n+2]&u.BLUE_MASK}}(s),setPixel:function(t){return function(e,n){const s=4*e,i=t.imageData.data;if(t.isRemote)throw"Image is loaded remotely. Cannot set pixel.";i[s+0]=(n&u.RED_MASK)>>>16,i[s+1]=(n&u.GREEN_MASK)>>>8,i[s+2]=n&u.BLUE_MASK,i[s+3]=(n&u.ALPHA_MASK)>>>24,t.__isDirty=!0}}(s),toArray:function(t){return function(){const e=[],n=t.imageData.data,s=t.width*t.height;if(t.isRemote)throw"Image is loaded remotely. Cannot get pixels.";for(let t=0,i=0;t<s;t++,i+=4)e.push(n[i+3]<<24&u.ALPHA_MASK|n[i]<<16&u.RED_MASK|n[i+1]<<8&u.GREEN_MASK|n[i+2]&u.BLUE_MASK);return e}}(s),set:function(t){return function(e){let n,s,i;if(this.isRemote)throw"Image is loaded remotely. Cannot set pixels.";s=t.imageData.data;for(let t=0,r=e.length;t<r;t++)i=e[t],s[0+(n=4*t)]=(i&u.RED_MASK)>>>16,s[n+1]=(i&u.GREEN_MASK)>>>8,s[n+2]=i&u.BLUE_MASK,s[n+3]=(i&u.ALPHA_MASK)>>>24;t.__isDirty=!0}}(s)}};function Gn(t,e,n,s){const i=new $n(n,s,u.ARGB);return i.fromImageData(T.toImageData(t,e,n,s)),i}function Vn(t,e,n,s,i){if(i.isRemote)throw"Image is loaded remotely. Cannot get x,y,w,h.";const r=new $n(n,s,u.ARGB),o=r.imageData.data,a=i.width,l=i.height,h=i.imageData.data,c=Math.max(0,-e),f=Math.max(0,-t),p=Math.min(s,l-e),m=Math.min(n,a-t);for(let s=c;s<p;++s){let i=4*((e+s)*a+(t+f)),r=4*(s*n+f);for(let t=f;t<m;++t)o[r++]=h[i++],o[r++]=h[i++],o[r++]=h[i++],o[r++]=h[i++]}return r.__isDirty=!0,r}function zn(){ye&&(M=it,ye=!1,T.updatePixels())}function Un(){function t(t,e){t[e]=function(){zn(),M[e].apply(M,arguments)}}function e(t,e){T.defineProperty(t,e,{get:function(){return zn(),M[e]},set:function(t){zn(),M[e]=t}})}for(const n in M)"function"==typeof M[n]?t(this,n):e(this,n)}function Hn(t,e,n){t<T.width&&t>=0&&e>=0&&e<T.height&&(ye||(T.loadPixels(),null===de&&(it=M,de=new Un),ye=!0,M=de,rt=0),T.pixels.setPixel((0|t)+T.width*(0|e),n),++rt>be&&zn())}$n.prototype={__isPImage:!0,updatePixels:function(){const t=this.sourceImg;t&&t instanceof c&&this.__isDirty&&t.getContext("2d").putImageData(this.imageData,0,0),this.__isDirty=!1},fromHTMLImageData:function(t){const e=Bn(t);try{const n=e.context.getImageData(0,0,t.width,t.height);this.fromImageData(n)}catch(e){t.width&&t.height&&(this.isRemote=!0,this.width=t.width,this.height=t.height)}this.sourceImg=t},get:function(t,e,n,s){return arguments.length?2===arguments.length?T.get(t,e,this):4===arguments.length?T.get(t,e,n,s,this):void 0:T.get(this)},set:function(t,e,n){T.set(t,e,n,this),this.__isDirty=!0},blend:function(t,e,n,s,i,r,o,a,l,h){9===arguments.length?T.blend(this,t,e,n,s,i,r,o,a,l,this):10===arguments.length&&T.blend(t,e,n,s,i,r,o,a,l,h,this),delete this.sourceImg},copy:function(t,e,n,s,i,r,o,a,l){8===arguments.length?T.blend(this,t,e,n,s,i,r,o,a,u.REPLACE,this):9===arguments.length&&T.blend(t,e,n,s,i,r,o,a,l,u.REPLACE,this),delete this.sourceImg},filter:function(t,e){2===arguments.length?T.filter(t,e,this):1===arguments.length&&T.filter(t,null,this),delete this.sourceImg},save:function(t){T.save(t,this)},resize:function(t,e){if(this.isRemote)throw"Image is loaded remotely. Cannot resize.";if(0!==this.width||0!==this.height){0===t&&0!==e?t=Math.floor(this.width/this.height*e):0===e&&0!==t&&(e=Math.floor(this.height/this.width*t));const n=Bn(this.imageData).canvas,s=Bn(n,t,e).context.getImageData(0,0,t,e);this.fromImageData(s)}},mask:function(t){let e,n,s=this.toImageData();if(t instanceof $n||t.__isPImage){if(t.width!==this.width||t.height!==this.height)throw"mask must have the same dimensions as PImage.";for(t=t.toImageData(),e=2,n=this.width*this.height*4;e<n;e+=4)s.data[e+1]=t.data[e]}else if(t instanceof Array){if(this.width*this.height!==t.length)throw"mask array must be the same length as PImage pixels array.";for(e=0,n=t.length;e<n;++e)s.data[4*e+3]=t[e]}this.fromImageData(s)},loadPixels:h,toImageData:function(){if(this.isRemote)return this.sourceImg;if(!this.__isDirty)return this.imageData;return Bn(this.sourceImg).context.getImageData(0,0,this.width,this.height)},toDataURL:function(){if(this.isRemote)throw"Image is loaded remotely. Cannot create dataURI.";return Bn(this.imageData).canvas.toDataURL()},fromImageData:function(t){const e=t.width,n=t.height,s=l.createElement("canvas"),i=s.getContext("2d");this.width=s.width=e,this.height=s.height=n,i.putImageData(t,0,0),this.format=u.ARGB,this.imageData=t,this.sourceImg=s}},T.PImage=$n,T.createImage=function(t,e,n){return new $n(t,e,n)},T.loadImage=function(t,e,n){let s;if(_.imageCache.images[t])return(s=new $n(_.imageCache.images[t])).loaded=!0,s;s=new $n;const i=l.createElement("img");return s.sourceImg=i,i.onload=function(t,e,n){const s=i,r=e,o=n;return function(){r.fromHTMLImageData(s),r.loaded=!0,o&&o()}}(0,s,n),i.src=t,s},T.requestImage=T.loadImage,T.get=function(t,e,n,s,i){return void 0!==i?Vn(t,e,n,s,i):void 0!==s?Gn(t,e,n,s):void 0!==n?function(t,e,n){if(n.isRemote)throw"Image is loaded remotely. Cannot get x,y.";const s=e*n.width*4+4*t,i=n.imageData.data;return i[s+3]<<24&u.ALPHA_MASK|i[s]<<16&u.RED_MASK|i[s+1]<<8&u.GREEN_MASK|i[s+2]&u.BLUE_MASK}(t,e,n):void 0!==e?function(t,e){let n;if(t>=T.width||t<0||e<0||e>=T.height)return 0;if(ye){const s=4*((0|t)+T.width*(0|e));return(n=T.imageData.data)[s+3]<<24&u.ALPHA_MASK|n[s]<<16&u.RED_MASK|n[s+1]<<8&u.GREEN_MASK|n[s+2]&u.BLUE_MASK}return(n=T.toImageData(0|t,0|e,1,1).data)[3]<<24&u.ALPHA_MASK|n[0]<<16&u.RED_MASK|n[1]<<8&u.GREEN_MASK|n[2]&u.BLUE_MASK}(t,e):void 0!==t?Vn(0,0,t.width,t.height,t):Gn(0,0,T.width,T.height)},T.createGraphics=function(t,e,n){const s=new w;return s.size(t,e,n),s.background(0,0),s},T.set=function(t,e,n,s){3===arguments.length?"number"==typeof n?Hn(t,e,n):(n instanceof $n||n.__isPImage)&&T.image(n,t,e):4===arguments.length&&function(t,e,n,s){if(s.isRemote)throw"Image is loaded remotely. Cannot set x,y.";const i=T.color.toArray(n),r=e*s.width*4+4*t,o=s.imageData.data;o[r]=i[0],o[r+1]=i[1],o[r+2]=i[2],o[r+3]=i[3]}(t,e,n,s)},T.imageData={},T.pixels={getLength:function(){return T.imageData.data.length?T.imageData.data.length/4:0},getPixel:function(t){const e=4*t,n=T.imageData.data;return n[e+3]<<24&4278190080|n[e+0]<<16&16711680|n[e+1]<<8&65280|255&n[e+2]},setPixel:function(t,e){const n=4*t,s=T.imageData.data;s[n+0]=(16711680&e)>>>16,s[n+1]=(65280&e)>>>8,s[n+2]=255&e,s[n+3]=(4278190080&e)>>>24},toArray:function(){const t=[],e=T.imageData.width*T.imageData.height,n=T.imageData.data;for(let s=0,i=0;s<e;s++,i+=4)t.push(n[i+3]<<24&4278190080|n[i+0]<<16&16711680|n[i+1]<<8&65280|255&n[i+2]);return t},set:function(t){for(let e=0,n=t.length;e<n;e++)this.setPixel(e,t[e])}},T.loadPixels=function(){T.imageData=R.$ensureContext().getImageData(0,0,T.width,T.height)},T.updatePixels=function(){T.imageData&&R.$ensureContext().putImageData(T.imageData,0,0)},T.hint=function(t){const e=R.$ensureContext();t===u.DISABLE_DEPTH_TEST?(e.disable(e.DEPTH_TEST),e.depthMask(!1),e.clear(e.DEPTH_BUFFER_BIT)):t===u.ENABLE_DEPTH_TEST?(e.enable(e.DEPTH_TEST),e.depthMask(!0)):t===u.ENABLE_OPENGL_2X_SMOOTH||t===u.ENABLE_OPENGL_4X_SMOOTH?Pt=!0:t===u.DISABLE_OPENGL_2X_SMOOTH&&(Pt=!1)};const Xn=function(t,e,n,s){let i;if(t instanceof $n||t.__isPImage){if(!(i=t).loaded)throw"Error using image in background(): PImage not loaded.";if(i.width!==T.width||i.height!==T.height)throw"Background image must be the same dimensions as the canvas."}else i=T.color(t,e,n,s);Ut=i};cn.prototype.background=function(t,n,s,i){t!==e&&Xn(t,n,s,i),Ut instanceof $n||Ut.__isPImage?(xn(),M.setTransform(1,0,0,1,0,0),T.image(Ut,0,0),wn()):(xn(),M.setTransform(1,0,0,1,0,0),T.alpha(Ut)!==Xt&&M.clearRect(0,0,T.width,T.height),M.fillStyle=T.color.toString(Ut),M.fillRect(0,0,T.width,T.height),bt=!0,wn())},fn.prototype.background=function(t,e,n,s){arguments.length>0&&Xn(t,e,n,s);const i=T.color.toGLArray(Ut);M.clearColor(i[0],i[1],i[2],i[3]),M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT)},cn.prototype.image=function(t,e,n,s,i){if(e=Math.round(e),n=Math.round(n),t.width>0){s||t.width,i||t.height;const r=an(e||0,n||0,s||t.width,i||t.height,arguments.length<4);if(!!t.sourceImg&&null===Qt){const e=t.sourceImg;t.__isDirty&&t.updatePixels(),M.drawImage(e,0,0,e.width,e.height,r.x,r.y,r.w,r.h)}else{const e=t.toImageData();null!==Qt&&(Qt(e),t.__isDirty=!0),M.drawImage(Bn(e).canvas,0,0,t.width,t.height,r.x,r.y,r.w,r.h)}}},fn.prototype.image=function(t,e,n,s,i){t.width>0&&(e=Math.round(e),n=Math.round(n),s=s||t.width,i=i||t.height,T.beginShape(T.QUADS),T.texture(t),T.vertex(e,n,0,0,0),T.vertex(e,n+i,0,0,i),T.vertex(e+s,n+i,0,s,i),T.vertex(e+s,n,0,s,0),T.endShape())},T.tint=function(t,e,n,s){const i=T.color(t,e,n,s),r=T.red(i)/jt,o=T.green(i)/Yt,a=T.blue(i)/Kt,l=T.alpha(i)/Xt;Qt=function(t){const e=t.data,n=4*t.width*t.height;for(let t=0;t<n;)e[t++]*=r,e[t++]*=o,e[t++]*=a,e[t++]*=l},Jt=function(t){for(let e=0;e<t.length;)t[e++]=r,t[e++]=o,t[e++]=a,t[e++]=l}},T.noTint=function(){Qt=null,Jt=null},T.copy=function(t,n,s,i,r,o,a,l,h){h===e&&(h=l,l=a,a=o,o=r,r=i,i=s,s=n,n=t,t=T),T.blend(t,n,s,i,r,o,a,l,h,u.REPLACE)},T.blend=function(t,n,s,i,r,o,a,l,h,u,c){if(t.isRemote)throw"Image is loaded remotely. Cannot blend image.";u===e&&(u=h,h=l,l=a,a=o,o=r,r=i,i=s,s=n,n=t,t=T);const f=n+i,p=s+r,m=o+l,g=a+h,d=c||T;c!==e&&u!==e||T.loadPixels(),t.loadPixels(),t===T&&T.intersect(n,s,f,p,o,a,m,g)?T.blit_resize(T.get(n,s,f-n,p-s),0,0,f-n-1,p-s-1,d.imageData.data,d.width,d.height,o,a,m,g,u):T.blit_resize(t,n,s,f,p,d.imageData.data,d.width,d.height,o,a,m,g,u),c===e&&T.updatePixels()};const jn=function(t,e){let n,s,i,r,o,a,l,h,u,c,f;const p=e.pixels.getLength(),g=new m(p),d=new m(p),y=new m(p),b=new m(p);let A,x,w,E,v=0;!function(t){let e,n=T.floor(3.5*t);if(n=n<1?1:n<248?n:248,T.shared.blurRadius!==n){T.shared.blurRadius=n,T.shared.blurKernelSize=1+(T.shared.blurRadius<<1),T.shared.blurKernel=new m(T.shared.blurKernelSize);const t=T.shared.blurKernel,s=T.shared.blurKernelSize;for(T.shared.blurRadius,e=0;e<s;e++)t[e]=0;const i=(n-1)*(n-1);for(e=1;e<n;e++)t[n+e]=t[n-e]=i;t[n]=n*n}}(t);const S=e.height,P=e.width,C=T.shared.blurKernelSize,M=T.shared.blurRadius,_=T.shared.blurKernel,R=e.imageData.data;for(x=0;x<S;x++){for(A=0;A<P;A++){if(r=i=s=o=n=0,(l=A-M)<0)f=-l,l=0;else{if(l>=P)break;f=0}for(w=f;w<C&&!(l>=P);w++)E=4*(l+v),o+=(a=_[w])*R[E+3],s+=a*R[E],i+=a*R[E+1],r+=a*R[E+2],n+=a,l++;b[h=v+A]=o/n,g[h]=s/n,d[h]=i/n,y[h]=r/n}v+=P}for(v=0,c=(u=-M)*P,x=0;x<S;x++){for(A=0;A<P;A++){if(r=i=s=o=n=0,u<0)f=h=-u,l=A;else{if(u>=S)break;f=0,h=u,l=A+c}for(w=f;w<C&&!(h>=S);w++)o+=(a=_[w])*b[l],s+=a*g[l],i+=a*d[l],r+=a*y[l],n+=a,h++,l+=P;R[E=4*(A+v)]=s/n,R[E+1]=i/n,R[E+2]=r/n,R[E+3]=o/n}v+=P,c+=P,u++}},Yn=function(t,e){let n=0;const s=e.pixels.getLength(),i=new g(s);let r,o,a,l,h,u,c,f,p,m,d,y,b,A,x,w,E;if(t)for(;n<s;)for(r=n,o=n+e.width;n<o;)a=l=e.pixels.getPixel(n),(c=n-1)<r&&(c=n),(u=n+1)>=o&&(u=n),(f=n-e.width)<0&&(f=0),(p=n+e.width)>=s&&(p=n),y=e.pixels.getPixel(f),d=e.pixels.getPixel(c),b=e.pixels.getPixel(p),(x=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<(h=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(l=d,h=x),(A=77*((m=e.pixels.getPixel(u))>>16&255)+151*(m>>8&255)+28*(255&m))<h&&(l=m,h=A),(w=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<h&&(l=y,h=w),(E=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<h&&(l=b,h=E),i[n++]=l;else for(;n<s;)for(r=n,o=n+e.width;n<o;)a=l=e.pixels.getPixel(n),(c=n-1)<r&&(c=n),(u=n+1)>=o&&(u=n),(f=n-e.width)<0&&(f=0),(p=n+e.width)>=s&&(p=n),y=e.pixels.getPixel(f),d=e.pixels.getPixel(c),b=e.pixels.getPixel(p),(x=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))>(h=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(l=d,h=x),(A=77*((m=e.pixels.getPixel(u))>>16&255)+151*(m>>8&255)+28*(255&m))>h&&(l=m,h=A),(w=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))>h&&(l=y,h=w),(E=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))>h&&(l=b,h=E),i[n++]=l;e.pixels.set(i)};T.filter=function(t,n,s){let i,r,o,a;if(3===arguments.length?(s.loadPixels(),i=s):(T.loadPixels(),i=T),n===e&&(n=null),i.isRemote)throw"Image is loaded remotely. Cannot filter image.";const l=i.pixels.getLength();switch(t){case u.BLUR:jn(n||1,i);break;case u.GRAY:if(i.format===u.ALPHA){for(a=0;a<l;a++)r=255-i.pixels.getPixel(a),i.pixels.setPixel(a,4278190080|r<<16|r<<8|r);i.format=u.RGB}else for(a=0;a<l;a++)o=77*((r=i.pixels.getPixel(a))>>16&255)+151*(r>>8&255)+28*(255&r)>>8,i.pixels.setPixel(a,r&u.ALPHA_MASK|o<<16|o<<8|o);break;case u.INVERT:for(a=0;a<l;a++)i.pixels.setPixel(a,16777215^i.pixels.getPixel(a));break;case u.POSTERIZE:if(null===n)throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)";var h=T.floor(n);if(h<2||h>255)throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)";var c=h-1;for(a=0;a<l;a++){let t=i.pixels.getPixel(a)>>16&255,e=i.pixels.getPixel(a)>>8&255,n=255&i.pixels.getPixel(a);t=255*(t*h>>8)/c,e=255*(e*h>>8)/c,n=255*(n*h>>8)/c,i.pixels.setPixel(a,4278190080&i.pixels.getPixel(a)|t<<16|e<<8|n)}break;case u.OPAQUE:for(a=0;a<l;a++)i.pixels.setPixel(a,4278190080|i.pixels.getPixel(a));i.format=u.RGB;break;case u.THRESHOLD:if(null===n&&(n=.5),n<0||n>1)throw"Level must be between 0 and 1 for filter(THRESHOLD, level)";var f=T.floor(255*n);for(a=0;a<l;a++){const t=T.max((i.pixels.getPixel(a)&u.RED_MASK)>>16,T.max((i.pixels.getPixel(a)&u.GREEN_MASK)>>8,i.pixels.getPixel(a)&u.BLUE_MASK));i.pixels.setPixel(a,i.pixels.getPixel(a)&u.ALPHA_MASK|(t<f?0:16777215))}break;case u.ERODE:Yn(!0,i);break;case u.DILATE:Yn(!1,i)}i.updatePixels()},T.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null},T.intersect=function(t,e,n,s,i,r,o,a){const l=n-t+1,h=s-e+1;let u=o-i+1,c=a-r+1;if(i<t)(u+=i-t)>l&&(u=l);else{const e=l+t-i;u>e&&(u=e)}if(r<e)(c+=r-e)>h&&(c=h);else{const t=h+e-r;c>t&&(c=t)}return!(u<=0||c<=0)};const Kn={};function Wn(t){return t instanceof String?t:"number"==typeof t?t===(0|t)?t.toString():T.nf(t,0,3):null===t||t===e?"":t.toString()}function Zn(t,e,n,s){let i,r;t.indexOf("\n")<0?(i=[t],r=1):r=(i=t.split(/\r?\n/g)).length;let o=0;le===u.TOP?o=fe+pe:le===u.CENTER?o=fe/2-(r-1)*me/2:le===u.BOTTOM&&(o=-(pe+(r-1)*me));for(let t=0;t<r;++t){const r=i[t];R.text$line(r,e,n+o,s,ae),o+=me}}function qn(t,e,n,s,i,r){if(0===t.length||0===s||0===i)return;if(ce>i)return;let o=-1,a=0,l=0;const h=[];for(var c=0,f=t.length;c<f;c++){const e=t[c],n=" "===e,i=ge.measureTextWidth(e);if("\n"!==e&&l+i<=s)n&&(o=c),l+=i;else{if(o+1===a){if(!(c>0))return;o=c}"\n"===e?(h.push({text:t.substring(a,c),width:l}),a=c+1):(h.push({text:t.substring(a,o+1),width:l}),a=o+1),l=0,c=a-1}}a<f&&h.push({text:t.substring(a),width:l});let p=1,m=fe;ae===u.CENTER?p=s/2:ae===u.RIGHT&&(p=s);const g=h.length,d=Math.min(g,Math.floor(i/me));let y,b,A;for(le===u.TOP?m=fe+pe:le===u.CENTER?m=i/2-me*(d/2-1):le===u.BOTTOM&&(m=pe+me),y=0;y<g&&!(m+(A=y*me)>i-pe);y++)b=h[y],R.text$line(b.text,e+p,n+m+A,r,ae)}function Qn(t){R="3D"===t?new fn:"2D"===t?new cn:new pn;for(const t in pn.prototype)pn.prototype.hasOwnProperty(t)&&t.indexOf("$")<0&&(T[t]=R[t]);R.$init()}function Jn(t){return function(){return Qn("2D"),R[t].apply(this,arguments)}}function ts(t){const e=t.which||t.keyCode;switch(e){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return e}function es(t){return"function"==typeof t.preventDefault?t.preventDefault():"function"==typeof t.stopPropagation&&t.stopPropagation(),!1}function ns(){let t;for(t in Ae)if(Ae.hasOwnProperty(t))return void(T.__keyPressed=!0);T.__keyPressed=!1}function ss(){T.__keyPressed=!1,Ae=[],xe=null}function is(t,e){Ae[t]=e,xe=null,T.key=e,T.keyCode=t,T.keyPressed(),T.keyCode=0,T.keyTyped(),ns()}if(Kn[u.BLEND]=T.modes.blend,Kn[u.ADD]=T.modes.add,Kn[u.SUBTRACT]=T.modes.subtract,Kn[u.LIGHTEST]=T.modes.lightest,Kn[u.DARKEST]=T.modes.darkest,Kn[u.REPLACE]=T.modes.replace,Kn[u.DIFFERENCE]=T.modes.difference,Kn[u.EXCLUSION]=T.modes.exclusion,Kn[u.MULTIPLY]=T.modes.multiply,Kn[u.SCREEN]=T.modes.screen,Kn[u.OVERLAY]=T.modes.overlay,Kn[u.HARD_LIGHT]=T.modes.hard_light,Kn[u.SOFT_LIGHT]=T.modes.soft_light,Kn[u.DODGE]=T.modes.dodge,Kn[u.BURN]=T.modes.burn,T.blit_resize=function(t,e,n,s,i,r,o,a,l,h,c,f,p){let m,g;e<0&&(e=0),n<0&&(n=0),s>=t.width&&(s=t.width-1),i>=t.height&&(i=t.height-1);const d=s-e,y=i-n;let b=c-l,A=f-h;if(b<=0||A<=0||d<=0||y<=0||l>=o||h>=a||e>=t.width||n>=t.height)return;const x=Math.floor(d/b*u.PRECISIONF),w=Math.floor(y/A*u.PRECISIONF),E=T.shared;E.srcXOffset=Math.floor(l<0?-l*x:e*u.PRECISIONF),E.srcYOffset=Math.floor(h<0?-h*w:n*u.PRECISIONF),l<0&&(b+=l,l=0),h<0&&(A+=h,h=0),b=Math.min(b,o-l),A=Math.min(A,a-h);let v,S=h*o+l;E.srcBuffer=t.imageData.data,E.iw=t.width,E.iw1=t.width-1,E.ih1=t.height-1;T.filter_bilinear,T.filter_new_scanline;let P,C,M,_,R,L,I=Kn[p],D=u.ALPHA_MASK,O=u.RED_MASK,N=u.GREEN_MASK,F=u.BLUE_MASK,k=u.PREC_MAXVAL,B=u.PRECISIONB,$=u.PREC_RED_SHIFT,G=u.PREC_ALPHA_SHIFT,V=E.srcBuffer,z=Math.min;for(g=0;g<A;g++){for(E.sX=E.srcXOffset,E.fracV=E.srcYOffset&k,E.ifV=k-E.fracV,E.v1=(E.srcYOffset>>B)*E.iw,E.v2=z(1+(E.srcYOffset>>B),E.ih1)*E.iw,m=0;m<b;m++)v=r[(C=4*(S+m))+3]<<24&D|r[C]<<16&O|r[C+1]<<8&N|r[C+2]&F,E.fracU=E.sX&k,E.ifU=k-E.fracU,E.ul=E.ifU*E.ifV>>B,E.ll=E.ifU*E.fracV>>B,E.ur=E.fracU*E.ifV>>B,E.lr=E.fracU*E.fracV>>B,E.u1=E.sX>>B,E.u2=z(E.u1+1,E.iw1),M=4*(E.v1+E.u1),_=4*(E.v1+E.u2),R=4*(E.v2+E.u1),L=4*(E.v2+E.u2),E.cUL=V[M+3]<<24&D|V[M]<<16&O|V[M+1]<<8&N|V[M+2]&F,E.cUR=V[_+3]<<24&D|V[_]<<16&O|V[_+1]<<8&N|V[_+2]&F,E.cLL=V[R+3]<<24&D|V[R]<<16&O|V[R+1]<<8&N|V[R+2]&F,E.cLR=V[L+3]<<24&D|V[L]<<16&O|V[L+1]<<8&N|V[L+2]&F,E.r=E.ul*((E.cUL&O)>>16)+E.ll*((E.cLL&O)>>16)+E.ur*((E.cUR&O)>>16)+E.lr*((E.cLR&O)>>16)<<$&O,E.g=E.ul*(E.cUL&N)+E.ll*(E.cLL&N)+E.ur*(E.cUR&N)+E.lr*(E.cLR&N)>>>B&N,E.b=E.ul*(E.cUL&F)+E.ll*(E.cLL&F)+E.ur*(E.cUR&F)+E.lr*(E.cLR&F)>>>B,E.a=E.ul*((E.cUL&D)>>>24)+E.ll*((E.cLL&D)>>>24)+E.ur*((E.cUR&D)>>>24)+E.lr*((E.cLR&D)>>>24)<<G&D,P=I(v,E.a|E.r|E.g|E.b),r[C]=(P&O)>>>16,r[C+1]=(P&N)>>>8,r[C+2]=P&F,r[C+3]=(P&D)>>>24,E.sX+=x;S+=o,E.srcYOffset+=w}},T.loadFont=function(t,n){if(t===e)throw"font name required in loadFont.";if(-1===t.indexOf(".svg"))return n===e&&(n=ge.size),PFont.get(t,n);const s=T.loadGlyphs(t);return{name:t,css:"12px sans-serif",glyph:!0,units_per_em:s.units_per_em,horiz_adv_x:1/s.units_per_em*s.horiz_adv_x,ascent:s.ascent,descent:s.descent,width:function(e){let n=0;const s=e.length;for(let i=0;i<s;i++)try{n+=parseFloat(T.glyphLook(T.glyphTable[t],e[i]).horiz_adv_x)}catch(t){w.debug(t)}return n/T.glyphTable[t].units_per_em}}},T.createFont=function(t,e){return T.loadFont(t,e)},T.textFont=function(t,n){n!==e&&(t.glyph||(t=PFont.get(t.name,n)),ce=n),ue=(ge=t).name,fe=ge.ascent,pe=ge.descent,me=ge.leading,R.$ensureContext().font=ge.css},T.textSize=function(t){ge=PFont.get(ue,t),ce=t,fe=ge.ascent,pe=ge.descent,me=ge.leading,R.$ensureContext().font=ge.css},T.textAscent=function(){return fe},T.textDescent=function(){return pe},T.textLeading=function(t){me=t},T.textAlign=function(t,e){ae=t,le=e||u.BASELINE},cn.prototype.textWidth=function(t){let e,n=Wn(t).split(/\r?\n/g),s=0,i=n.length;for(M.font=ge.css,e=0;e<i;++e)s=Math.max(s,ge.measureTextWidth(n[e]));return 0|s},fn.prototype.textWidth=function(t){let n,s=Wn(t).split(/\r?\n/g),i=0,r=s.length;L===e&&(L=l.createElement("canvas"));const o=L.getContext("2d");for(o.font=ge.css,n=0;n<r;++n)i=Math.max(i,o.measureText(s[n]).width);return 0|i},T.glyphLook=function(t,e){try{switch(e){case"1":return t.one;case"2":return t.two;case"3":return t.three;case"4":return t.four;case"5":return t.five;case"6":return t.six;case"7":return t.seven;case"8":return t.eight;case"9":return t.nine;case"0":return t.zero;case" ":return t.space;case"$":return t.dollar;case"!":return t.exclam;case'"':return t.quotedbl;case"#":return t.numbersign;case"%":return t.percent;case"&":return t.ampersand;case"'":return t.quotesingle;case"(":return t.parenleft;case")":return t.parenright;case"*":return t.asterisk;case"+":return t.plus;case",":return t.comma;case"-":return t.hyphen;case".":return t.period;case"/":return t.slash;case"_":return t.underscore;case":":return t.colon;case";":return t.semicolon;case"<":return t.less;case"=":return t.equal;case">":return t.greater;case"?":return t.question;case"@":return t.at;case"[":return t.bracketleft;case"\\":return t.backslash;case"]":return t.bracketright;case"^":return t.asciicircum;case"`":return t.grave;case"{":return t.braceleft;case"|":return t.bar;case"}":return t.braceright;case"~":return t.asciitilde;default:return t[e]}}catch(t){w.debug(t)}},cn.prototype.text$line=function(t,e,n,s,i){let r=0,o=0;if(ge.glyph){const s=T.glyphTable[ue];xn(),M.translate(e,n+ce),i!==u.RIGHT&&i!==u.CENTER||(r=s.width(t),o=i===u.RIGHT?-r:-r/2);const a=1/s.units_per_em*ce;M.scale(a,a);for(let e=0,n=t.length;e<n;e++)try{T.glyphLook(s,t[e]).draw()}catch(t){w.debug(t)}wn()}else t&&"fillText"in M&&(bt&&(M.fillStyle=T.color.toString(yt),bt=!1),i!==u.RIGHT&&i!==u.CENTER||(r=ge.measureTextWidth(t),o=i===u.RIGHT?-r:-r/2),M.fillText(t,e+o,n))},fn.prototype.text$line=function(t,n,s,i,r){L===e&&(L=l.createElement("canvas"));const o=M;(M=L.getContext("2d")).font=ge.css;const a=ge.measureTextWidth(t);L.width=a,L.height=ce,(M=L.getContext("2d")).font=ge.css,M.textBaseline="top",cn.prototype.text$line(t,0,0,0,u.LEFT);const h=L.width/L.height;(M=o).bindTexture(M.TEXTURE_2D,tt),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,L),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.LINEAR),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.LINEAR),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE);let c=0;r===u.RIGHT?c=-a:r===u.CENTER&&(c=-a/2);const f=new dn,p=.5*ce;f.translate(n+c-p/2,s-p,i),f.scale(-h*p,-p,p),f.translate(-1,-1,-1),f.transpose();const m=new dn;m.scale(1,-1,1),m.apply(ht.array()),m.transpose(),M.useProgram($),nn("aVertex2d",$,"aVertex",3,et),nn("aTextureCoord2d",$,"aTextureCoord",2,nt),tn("uSampler2d",$,"uSampler",[0]),tn("uIsDrawingText2d",$,"uIsDrawingText",!0),en("uModel2d",$,"uModel",!1,f.array()),en("uView2d",$,"uView",!1,m.array()),Je("uColor2d",$,"uColor",dt),M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,st),M.drawElements(M.TRIANGLES,6,M.UNSIGNED_SHORT,0)},T.text=function(){he!==u.SHAPE&&(3===arguments.length?Zn(Wn(arguments[0]),arguments[1],arguments[2],0):4===arguments.length?Zn(Wn(arguments[0]),arguments[1],arguments[2],arguments[3]):5===arguments.length?qn(Wn(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0):6===arguments.length&&qn(Wn(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]))},T.textMode=function(t){he=t},T.loadGlyphs=function(t){let n,s,i,r,o,h,u,c,f,p,m,g;const d=function(t,e){let n,s=0,i=[],r=new RegExp(t,"g");for(n=i[s]=r.exec(e);n;)n=i[++s]=r.exec(e);return i},y=function(t){const e=d("[A-Za-z][0-9\\- ]+|Z",t);g="return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();",n=0,s=0,i=0,r=0,o=0,h=0,t=0,c=0,f="",p=e.length-1;for(let a=0;a<p;a++){const l=e[a][0],u=d("[0-9\\-]+",l);switch(l[0]){case"M":n=parseFloat(u[0][0]),s=parseFloat(u[1][0]),g+="curContext.moveTo("+n+","+-s+");";break;case"L":n=parseFloat(u[0][0]),s=parseFloat(u[1][0]),g+="curContext.lineTo("+n+","+-s+");";break;case"H":n=parseFloat(u[0][0]),g+="curContext.lineTo("+n+","+-s+");";break;case"V":s=parseFloat(u[0][0]),g+="curContext.lineTo("+n+","+-s+");";break;case"T":o=parseFloat(u[0][0]),h=parseFloat(u[1][0]),"Q"===f||"T"===f?(t=Math.sqrt(Math.pow(n-i,2)+Math.pow(r-s,2)),c=Math.PI+Math.atan2(i-n,r-s),i=n+Math.sin(c)*t,r=s+Math.cos(c)*t):(i=n,r=s),g+="curContext.quadraticCurveTo("+i+","+-r+","+o+","+-h+");",n=o,s=h;break;case"Q":i=parseFloat(u[0][0]),r=parseFloat(u[1][0]),o=parseFloat(u[2][0]),h=parseFloat(u[3][0]),g+="curContext.quadraticCurveTo("+i+","+-r+","+o+","+-h+");",n=o,s=h;break;case"Z":g+="curContext.closePath();"}f=l[0]}return g+="afterPathDraw();",g+="curContext.translate("+m+",0);",g+="}}",new Function("beforePathDraw","afterPathDraw",g)(function(){return xn(),R.$ensureContext()},function(){Tn(),Mn(),wn()})},b=function(n){const s=n.getElementsByTagName("font");T.glyphTable[t].horiz_adv_x=s[0].getAttribute("horiz-adv-x");const i=n.getElementsByTagName("font-face")[0];T.glyphTable[t].units_per_em=parseFloat(i.getAttribute("units-per-em")),T.glyphTable[t].ascent=parseFloat(i.getAttribute("ascent")),T.glyphTable[t].descent=parseFloat(i.getAttribute("descent"));const r=n.getElementsByTagName("glyph"),o=r.length;for(let n=0;n<o;n++){const s=r[n].getAttribute("unicode"),i=r[n].getAttribute("glyph-name");null===(m=r[n].getAttribute("horiz-adv-x"))&&(m=T.glyphTable[t].horiz_adv_x),(u=r[n].getAttribute("d"))!==e&&(g=y(u),T.glyphTable[t][i]={name:i,unicode:s,horiz_adv_x:m,draw:g.draw})}};return T.glyphTable[t]={},function(){let e;try{e=l.implementation.createDocument("","",null)}catch(t){return void w.debug(t.message)}try{e.async=!1,e.load(t),b(e.getElementsByTagName("svg")[0])}catch(e){w.debug(e);try{const n=new a.XMLHttpRequest;n.open("GET",t,!1),n.send(null),b(n.responseXML.documentElement)}catch(t){w.debug(e)}}}(),T.glyphTable[t]},T.param=function(t){const e="data-processing-"+t;if(E.hasAttribute(e))return E.getAttribute(e);for(let e=0,n=E.childNodes.length;e<n;++e){const n=E.childNodes.item(e);if(1===n.nodeType&&"param"===n.tagName.toLowerCase()&&n.getAttribute("name")===t)return n.getAttribute("value")}return _.params.hasOwnProperty(t)?_.params[t]:null},pn.prototype.translate=Jn("translate"),pn.prototype.transform=Jn("transform"),pn.prototype.scale=Jn("scale"),pn.prototype.pushMatrix=Jn("pushMatrix"),pn.prototype.popMatrix=Jn("popMatrix"),pn.prototype.resetMatrix=Jn("resetMatrix"),pn.prototype.applyMatrix=Jn("applyMatrix"),pn.prototype.rotate=Jn("rotate"),pn.prototype.rotateZ=Jn("rotateZ"),pn.prototype.shearX=Jn("shearX"),pn.prototype.shearY=Jn("shearY"),pn.prototype.redraw=Jn("redraw"),pn.prototype.toImageData=Jn("toImageData"),pn.prototype.ambientLight=Jn("ambientLight"),pn.prototype.directionalLight=Jn("directionalLight"),pn.prototype.lightFalloff=Jn("lightFalloff"),pn.prototype.lightSpecular=Jn("lightSpecular"),pn.prototype.pointLight=Jn("pointLight"),pn.prototype.noLights=Jn("noLights"),pn.prototype.spotLight=Jn("spotLight"),pn.prototype.beginCamera=Jn("beginCamera"),pn.prototype.endCamera=Jn("endCamera"),pn.prototype.frustum=Jn("frustum"),pn.prototype.box=Jn("box"),pn.prototype.sphere=Jn("sphere"),pn.prototype.ambient=Jn("ambient"),pn.prototype.emissive=Jn("emissive"),pn.prototype.shininess=Jn("shininess"),pn.prototype.specular=Jn("specular"),pn.prototype.fill=Jn("fill"),pn.prototype.stroke=Jn("stroke"),pn.prototype.strokeWeight=Jn("strokeWeight"),pn.prototype.smooth=Jn("smooth"),pn.prototype.noSmooth=Jn("noSmooth"),pn.prototype.point=Jn("point"),pn.prototype.vertex=Jn("vertex"),pn.prototype.endShape=Jn("endShape"),pn.prototype.bezierVertex=Jn("bezierVertex"),pn.prototype.curveVertex=Jn("curveVertex"),pn.prototype.curve=Jn("curve"),pn.prototype.line=Jn("line"),pn.prototype.bezier=Jn("bezier"),pn.prototype.rect=Jn("rect"),pn.prototype.ellipse=Jn("ellipse"),pn.prototype.background=Jn("background"),pn.prototype.image=Jn("image"),pn.prototype.textWidth=Jn("textWidth"),pn.prototype.text$line=Jn("text$line"),pn.prototype.$ensureContext=Jn("$ensureContext"),pn.prototype.$newPMatrix=Jn("$newPMatrix"),pn.prototype.size=function(t,e,n){Qn(n===u.WEBGL?"3D":"2D"),T.size(t,e,n)},pn.prototype.$init=h,cn.prototype.$init=function(){T.size(T.width,T.height),M.lineCap="round",T.noSmooth(),T.disableContextMenu()},fn.prototype.$init=function(){T.use3DContext=!0,T.disableContextMenu()},un.prototype.$ensureContext=function(){return M},E.getAttribute("tabindex")||E.setAttribute("tabindex",0),v)_=new w.Sketch,Qn(),T.size=function(t,e,n){n&&n===u.WEBGL?Qn("3D"):Qn("2D"),T.size(t,e,n)};else{_=i instanceof w.Sketch?i:"function"==typeof i?new w.Sketch(i):i?w.compile(i):new w.Sketch(function(){}),T.externals.sketch=_,Qn(),E.onfocus=function(){T.focused=!0},E.onblur=function(){T.focused=!1,_.options.globalKeyEvents||ss()},_.options.pauseOnBlur&&(P(a,"focus",function(){Ct&&T.loop()}),P(a,"blur",function(){Ct&&St&&(T.noLoop(),Ct=!0),ss()}));const t=_.options.globalKeyEvents?a:E;P(t,"keydown",function(t){const e=ts(t);if(e===u.DELETE)return void is(e,new Char(127));if(we.indexOf(e)<0)return void(xe=e);const n=new Char(u.CODED);return T.key=n,T.keyCode=e,Ae[e]=n,T.keyPressed(),xe=null,ns(),es(t)}),P(t,"keypress",function(t){if(null===xe)return;return is(xe,function(t){let e=t.which||t.keyCode;const n=t.shiftKey||t.ctrlKey||t.altKey||t.metaKey;switch(e){case 13:e=n?13:10;break;case 8:e=n?127:8}return new Char(e)}(t)),es(t)}),P(t,"keyup",function(t){const n=ts(t),s=Ae[n];s!==e&&(T.key=s,T.keyCode=n,T.keyReleased(),delete Ae[n],ns())});for(const t in w.lib)w.lib.hasOwnProperty(t)&&(w.lib[t].hasOwnProperty("attach")?w.lib[t].attach(T):w.lib[t]instanceof Function&&w.lib[t].call(this));const s=100;var rs=function(t){if(_.imageCache.pending||PFont.preloading.pending(s))a.setTimeout(function(){rs(t)},s);else{if(a.opera){let t,e,n=_.imageCache.operaCache;for(t in n)n.hasOwnProperty(t)&&(null!==(e=n[t])&&l.body.removeChild(e),delete n[t])}_.attach(t,n),_.onLoad(t),t.setup&&(t.setup(),t.resetMatrix(),_.onSetup()),zn(),t.draw&&(Ct?t.loop():t.redraw())}};(os=this).externals.canvas.id!==e&&os.externals.canvas.id.length||(os.externals.canvas.id="__processing"+A.length),x[os.externals.canvas.id]=A.length,A.push(os),rs(T)}var os};return w.debug="console"in a?function(t){a.console.log("Processing.js: "+t)}:h,w.prototype=n,w.instances=A,w.getInstanceById=function(t){return A[x[t]]},function(t){let e,n,s="open() createOutput() createInput() BufferedReader selectFolder() dataPath() createWriter() selectOutput() beginRecord() saveStream() endRecord() selectInput() saveBytes() createReader() beginRaw() endRaw() PrintWriter delay()".split(" "),i=s.length;function r(t){return function(){throw"Processing.js does not support "+t+"."}}for(;i--;)t[n=(e=s[i]).replace("()","")]=r(e)}(n),w}},{}],28:[function(t,e,n){const s={virtEquals:t("./Helpers/virtEquals"),virtHashCode:t("./Helpers/virtHashCode"),ObjectIterator:t("./Helpers/ObjectIterator"),PConstants:t("./Helpers/PConstants"),ArrayList:t("./Objects/ArrayList"),HashMap:t("./Objects/HashMap"),PVector:t("./Objects/PVector"),PFont:t("./Objects/PFont"),Char:t("./Objects/Char"),XMLAttribute:t("./Objects/XMLAttribute"),XMLElement:t("./Objects/XMLElement"),PMatrix2D:t("./Objects/PMatrix2D"),PMatrix3D:t("./Objects/PMatrix3D"),PShape:t("./Objects/PShape"),colors:t("./Objects/webcolors"),PShapeSVG:t("./Objects/PShapeSVG"),CommonFunctions:t("./P5Functions/commonFunctions"),defaultScope:t("./Helpers/defaultScope"),Processing:t("./Processing"),setupParser:t("./Parser/Parser"),finalize:t("./Helpers/finalizeProcessing")};s.extend={withMath:t("./P5Functions/Math.js"),withProxyFunctions:t("./P5Functions/JavaProxyFunctions")(s.virtHashCode,s.virtEquals),withTouch:t("./P5Functions/touchmouse"),withCommonFunctions:s.CommonFunctions.withCommonFunctions},e.exports=function(e,n){let i=function(){},r=s.virtEquals,o=s.virtHashCode,a=s.PConstants,l=s.CommonFunctions,h=s.ObjectIterator,u=s.Char,c=s.XMLAttribute(),f=s.ArrayList({virtHashCode:o,virtEquals:r}),p=s.HashMap({virtHashCode:o,virtEquals:r}),m=s.PVector({PConstants:a}),g=s.PFont({Browser:e,noop:i}),d=s.XMLElement({Browser:e,XMLAttribute:c}),y=s.PMatrix2D({p:l}),b=s.PMatrix3D({p:l}),A=s.PShape({PConstants:a,PMatrix2D:y,PMatrix3D:b}),x=s.PShapeSVG({CommonFunctions:l,PConstants:a,PShape:A,XMLElement:d,colors:s.colors}),w=s.defaultScope({ArrayList:f,HashMap:p,PVector:m,PFont:g,PShapeSVG:x,ObjectIterator:h,PConstants:a,Char:u,XMLElement:d,XML:d}),E=s.Processing({defaultScope:w,Browser:e,extend:s.extend,noop:i});return E=s.setupParser(E,{Browser:e,aFunctions:n,defaultScope:w}),E=s.finalize(E,{version:t("../package.json").version,isDomPresent:e.isDomPresent,window:e.window,document:e.document,noop:i})}},{"../package.json":2,"./Helpers/ObjectIterator":3,"./Helpers/PConstants":4,"./Helpers/defaultScope":6,"./Helpers/finalizeProcessing":7,"./Helpers/virtEquals":8,"./Helpers/virtHashCode":9,"./Objects/ArrayList":10,"./Objects/Char":11,"./Objects/HashMap":12,"./Objects/PFont":13,"./Objects/PMatrix2D":14,"./Objects/PMatrix3D":15,"./Objects/PShape":16,"./Objects/PShapeSVG":17,"./Objects/PVector":18,"./Objects/XMLAttribute":19,"./Objects/XMLElement":20,"./Objects/webcolors":21,"./P5Functions/JavaProxyFunctions":22,"./P5Functions/Math.js":23,"./P5Functions/commonFunctions":24,"./P5Functions/touchmouse":25,"./Parser/Parser":26,"./Processing":27}]},{},[1]);